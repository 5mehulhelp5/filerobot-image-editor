import{_ as h,a as T,K as U,F as yt,g as fr,b as oi,c as oe,s as k,L as H,r as b,R as c,B as uc,u as dc,d as Z,S as pc,e as ae,f as Fe,I as fc,C as gc,h as mc,P as hc,E as Oc,M as gt,A as yc,i as Yt,j as bc,k as vc,l as Ec,m as wc,n as Sc,o as Tc,p as Ic,q as jc,T as Pc,t as gr,v as ai,w as Fn,x as Kt,y as xc,z as Cc,D as _c,G as Nc,H as Ac,J as kc,N as Rc,O as Fc,Q as Lc,U as ii,V as Ln,W as mr,X as si,Y as Dc,Z as Mc,$ as $c,a0 as Bc,a1 as zc,a2 as Wc,a3 as Xc,a4 as Gc,a5 as Hc,a6 as Yc,a7 as Kc,a8 as Uc,a9 as Le,aa as Vc,ab as qc,ac as ci,ad as Zc,ae as Jc,af as Qc,ag as el,ah as tl,ai as zt,aj as le,ak as li,al as ui,am as nl,an as rl,ao as ol,ap as al,aq as il,ar as di,as as sl,at as cl,au as ll,av as ul,aw as dl,ax as pl,ay as fl,az as gl,aA as ml,aB as hl,aC as Ol,aD as yl,aE as bl,aF as vl,aG as El,aH as wl,aI as Sl,aJ as Tl,aK as Il,aL as jl,aM as Pl,aN as xl,aO as Cl,aP as _l,aQ as Dn,aR as Nl,aS as Al,aT as kl,aU as Be,aV as bn,aW as Rl,aX as bt,aY as hr,aZ as Or}from"./vendor.fc245bb3.js";const Fl=function(){const r=document.createElement("link").relList;if(!(r&&r.supports&&r.supports("modulepreload"))){for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0})}function t(n){var e;n.ep||(n.ep=!0,e=function(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}(n),fetch(n.href,e))}};Fl();var vn=function(r,t,n,e){return Math.min(r/n,t/e)||1},Wt="FIE_root",Ll="FIE_design-layer",pi="FIE_transformers-layer",fi="FIE_original-image",gi="FIE_nodes-transformer",xe="watermark",En="353297d2-40b4-4684-a875-45a2178a8157",G={FINETUNE:"Finetune",FILTERS:"Filters",ADJUST:"Adjust",WATERMARK:"Watermark",ANNOTATE:"Annotate",RESIZE:"Resize"},E={CROP:"Crop",ROTATE:"Rotate",FLIP_X:"Flip_X",FLIP_Y:"Flip_Y",BRIGHTNESS:"Brightness",CONTRAST:"Contrast",HSV:"HueSaturationValue",WARMTH:"Warmth",BLUR:"Blur",THRESHOLD:"Threshold",POSTERIZE:"Posterize",PIXELATE:"Pixelate",NOISE:"Noise",FILTERS:"Filters",RECT:"Rect",ELLIPSE:"Ellipse",POLYGON:"Polygon",TEXT:"Text",LINE:"Line",IMAGE:"Image",ARROW:"Arrow",WATERMARK:"Watermark",PEN:"Pen",RESIZE:"Resize"},Mn={X:"X",Y:"Y"},dt=1,et=["png","jpeg","jpg","webp"],Dl=[].concat(et,["svg","gif","avif","apng"]),yr=et[0],Ee={DEFAULT:"default",DRAW:"crosshair",SELECT:"pointer",MOVE:"move",DRAG:"GRAB"},mi="original",hi="custom",De="ellipse",Q={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",MIDDLE_LEFT:"middle-left",MIDDLE_CENTER:"middle-center",MIDDLE_RIGHT:"middle-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},br={WIDTH:14,HEIGHT:14},$n={AFTER_SAVE:"after-saving",CLOSE_BUTTON:"close-button-clicked",BACK_BUTTON:"back-button-clicked"},tt={WARNING:"warning",ERROR:"error"},Ml=function(r,t){t.ratio!==De||2<arguments.length&&arguments[2]!==void 0&&arguments[2]?r.rect(t.x,t.y,t.width,t.height):r.ellipse(t.x+t.width/2,t.y+t.height/2,t.width/2,t.height/2,0,0,2*Math.PI)};function vr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Er(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?vr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):vr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Oi="ADD_FILTER",$l=function(r,t){return Er(Er({},r),{},{isDesignState:!t.dismissHistory,filter:t.filter||null})};function wr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Sr(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?wr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var M,Bn="HIDE_LOADER",Bl=function(r){return Sr(Sr({},r),{},{isLoadingGlobally:!1})},yi=(h(M={theme:{palette:{"bg-primary-active":"#ECF3FF"},typography:{fontFamily:"Roboto, Arial"}},annotationsCommon:{fill:"#000000",stroke:"#000000",strokeWidth:0,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"#000000",shadowOpacity:1,opacity:1}},E.TEXT,{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",fontFamily:"Arial",fonts:[{label:"Arial",value:"Arial"},"Tahoma","Sans-serif",{label:"Comic Sans",value:"Comic-sans"}],fontSize:14,letterSpacing:0,lineHeight:1,align:"left",fontStyle:"normal",onFontChange:void 0}),h(M,E.IMAGE,{fill:void 0}),h(M,E.RECT,{cornerRadius:0}),h(M,E.ELLIPSE,{}),h(M,E.POLYGON,{sides:3}),h(M,E.PEN,{strokeWidth:1,tension:.5,lineCap:"round"}),h(M,E.LINE,{lineCap:"butt",strokeWidth:1}),h(M,E.ARROW,{strokeWidth:6,lineCap:"butt",pointerLength:void 0,pointerWidth:void 0}),h(M,E.WATERMARK,{gallery:[]}),h(M,E.CROP,{minWidth:br.WIDTH,minHeight:br.HEIGHT,width:null,height:null,maxWidth:null,maxHeight:null,ratio:"original",ratioTitleKey:void 0,noPresets:!1,autoResize:!1,presetsItems:[],presetsFolders:[]}),h(M,"tabsIds",[]),h(M,"defaultTabId",G.ADJUST),h(M,"defaultToolId",E.CROP),h(M,"onClose",void 0),h(M,"onSave",void 0),h(M,"onBeforeSave",void 0),h(M,"closeAfterSave",!1),h(M,"defaultSavedImageName",void 0),h(M,"defaultSavedImageType",null),h(M,"forceToPngInEllipticalCrop",!1),h(M,"useBackendTranslations",!0),h(M,"translations",null),h(M,"language","en"),h(M,"avoidChangesNotSavedAlertOnLeave",!1),h(M,"loadableDesignState",null),h(M,"moreSaveOptions",[]),h(M,"savingPixelRatio",8),h(M,"previewPixelRatio",window&&window.devicePixelRatio||1),h(M,"showBackButton",!1),h(M,"useCloudimage",!1),h(M,"cloudimage",{token:"",dontPrefixUrl:!1,domain:"cloudimg.io",version:"",loadableQuery:"",secureProtocol:!0,imageSealing:{enable:!1,salt:"",charCount:10,includeParams:[]}}),h(M,"observePluginContainerSize",!1),h(M,"showCanvasOnly",!1),h(M,"getCurrentImgDataFnRef",void 0),h(M,"onModify",void 0),M);function bi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=100<(t[e]+t[e+1]+t[e+2])/3?255:0;t[e]=o,t[e+1]=o,t[e+2]=o}}var _={brightness:function(r,t){return t=1<(t=t)?1:t,[r[0]+(t=~~(255*(t=t<-1?-1:t))),r[1]+t,r[2]+t]},contrast:function(r,t){return t=259*(255+(t*=255))/(255*(259-t)),[t*(r[0]-128)+128,t*(r[1]-128)+128,t*(r[2]-128)+128]},saturation:function(a,n){var n=(n=n)<-1?-1:n,e=a[0],o=a[1],a=a[2],i=.2989*e+.587*o+.114*a;return[-i*n+e*(1+n),-i*n+o*(1+n),-i*n+a*(1+n)]},grayscale:function(e){var t=e[0],n=e[1],e=e[2];return[,,,].fill(.2126*t+.7152*n+.0722*e)},sepia:function(o,t){var n=o[0],e=o[1],o=o[2];return[n*(1-.607*t)+.769*e*t+.189*o*t,.349*n*t+e*(1-.314*t)+.168*o*t,.272*n*t+.534*e*t+o*(1-.869*t)]},adjustRGB:function(r,t){return[r[0]*t[0],r[1]*t[1],r[2]*t[2]]},colorFilter:function(o,t){var n=o[0],e=o[1],o=o[2],a=t[3];return[n-(n-t[0])*a,e-(e-t[1])*a,o-(o-t[2])*a]}},zl=.1,Wl=.1,Xl=.15;function vi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.brightness([t[e],t[e+1],t[e+2]],zl),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],Wl)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],Xl)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Gl=.04,Hl=-.15;function Ei(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.sepia([t[e],t[e+1],t[e+2]],Gl),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],Hl)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Yl=.1;function wi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.grayscale([t[e],t[e+1],t[e+2]]),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],Yl)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Kl=.08,Ul=[1,1.03,1.05],Vl=.12;function Si(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.brightness([t[e],t[e+1],t[e+2]],Kl),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.adjustRGB([t[e],t[e+1],t[e+2]],Ul)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],Vl)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var ql=.4,Zl=.13,Jl=-.05;function Ti(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.sepia([t[e],t[e+1],t[e+2]],ql),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],Zl)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],Jl)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Ql=[1.01,1.04,1],eu=.3;function Ii(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.adjustRGB([t[e],t[e+1],t[e+2]],Ql),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],eu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var tu=.1,nu=-.5;function ji(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.brightness([t[e],t[e+1],t[e+2]],tu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],nu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var ru=[1.04,1,1.02],ou=-.05;function Pi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.adjustRGB([t[e],t[e+1],t[e+2]],ru),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],ou)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var au=.05,iu=-.03;function xi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.brightness([t[e],t[e+1],t[e+2]],au),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],iu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var su=[228,130,225,.13],cu=-.2;function Ci(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],su),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],cu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var lu=[1.05,1.1,1];function _i(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.adjustRGB([t[e],t[e+1],t[e+2]],lu),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var uu=.3,du=.15;function Ni(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.saturation([t[e],t[e+1],t[e+2]],uu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],du)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var pu=[230,115,108,.05],fu=.15;function Ai(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],pu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],fu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var gu=[255,170,0,.1],mu=.09,hu=.1;function ki(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],gu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],mu)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],hu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Ou=[1,1,1.25],yu=.1,bu=.15;function Ri(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.adjustRGB([t[e],t[e+1],t[e+2]],Ou),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],yu)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],bu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var vu=[255,225,80,.08],Eu=.1,wu=.05;function Fi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],vu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],Eu)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],wu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Su=[255,255,0,.07],Tu=.2,Iu=.15;function Li(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],Su),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],Tu)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],Iu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var ju=-.15,Pu=.1;function Di(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.contrast([t[e],t[e+1],t[e+2]],ju),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],Pu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var xu=[100,28,210,.03],Cu=.1;function Mi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.grayscale([t[e],t[e+1],t[e+2]]),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.colorFilter([t[e],t[e+1],t[e+2]],xu)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],Cu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var _u=.15,Nu=.2;function $i(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.contrast([t[e],t[e+1],t[e+2]],_u),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],Nu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Au=.1,ku=.15;function Bi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.contrast([t[e],t[e+1],t[e+2]],Au),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],ku)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Ru=[220,115,188,.12],Fu=-.05;function zi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],Ru),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],Fu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Lu=.1,Du=.3;function Wi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.brightness([t[e],t[e+1],t[e+2]],Lu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.sepia([t[e],t[e+1],t[e+2]],Du)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Mu=[255,225,0,.05],$u=.06,Bu=.06;function Xi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],Mu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],$u)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],Bu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var zu=[255,165,40,.2];function Gi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],zu),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Wu=.2,Xu=[140,10,185,.1];function Hi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.contrast([t[e],t[e+1],t[e+2]],Wu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.colorFilter([t[e],t[e+1],t[e+2]],Xu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Gu=-.1,Hu=-.1;function Yi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.brightness([t[e],t[e+1],t[e+2]],Gu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],Hu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Yu=.1,Ku=[255,145,0,.2];function Ki(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.sepia([t[e],t[e+1],t[e+2]],Yu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.colorFilter([t[e],t[e+1],t[e+2]],Ku)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Uu=.1,Vu=[255,255,0,.2];function Ui(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.brightness([t[e],t[e+1],t[e+2]],Uu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.colorFilter([t[e],t[e+1],t[e+2]],Vu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var qu=[255,25,0,.15],Zu=.1;function Vi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],qu),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],Zu)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var Ju=[255,140,0,.1],Qu=[1.15,1.05,1],ed=.35;function qi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],Ju),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.adjustRGB([t[e],t[e+1],t[e+2]],Qu)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],ed)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var td=[225,240,0,.1],nd=.25,rd=.05;function Zi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],td),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.saturation([t[e],t[e+1],t[e+2]],nd)),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],rd)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var od=.06,ad=.1;function Ji(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.sepia([t[e],t[e+1],t[e+2]],od),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],ad)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var id=.35,sd=.1;function Qi(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.saturation([t[e],t[e+1],t[e+2]],id),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],sd)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var cd=.15,ld=.1;function es(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.contrast([t[e],t[e+1],t[e+2]],cd),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],ld)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var ud=[25,240,252,.05],dd=.3;function ts(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],ud),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.sepia([t[e],t[e+1],t[e+2]],dd)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var pd=[208,208,86,.2],fd=.15;function ns(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],pd),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],fd)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var gd=[255,160,25,.1],md=.1;function rs(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],gd),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.brightness([t[e],t[e+1],t[e+2]],md)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var hd=[255,50,80,.12],Od=.05;function os(r){for(var t=r.data,n=t.length,e=0;e<n;e+=4){var o=_.colorFilter([t[e],t[e+1],t[e+2]],hd),o=T(o,3),o=(t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2],_.contrast([t[e],t[e+1],t[e+2]],Od)),o=T(o,3);t[e]=o[0],t[e+1]=o[1],t[e+2]=o[2]}}var yd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",BlackAndWhite:bi,Clarendon:vi,Gingham:Ei,Moon:wi,Lark:Si,Reyes:Ti,Juno:Ii,Slumber:ji,Crema:Pi,Ludwig:xi,Aden:Ci,Perpetua:_i,Amaro:Ni,Mayfair:Ai,Rise:ki,Hudson:Ri,Valencia:Fi,XPro2:Li,Sierra:Di,Willow:Mi,LoFi:$i,Hefe:Bi,Nashville:zi,Stinson:Wi,Vesper:Xi,Earlybird:Gi,Brannan:Hi,Sutro:Yi,Toaster:Ki,Walden:Ui,NinteenSeventySeven:Vi,Kelvin:qi,Maven:Zi,Ginza:Ji,Skyline:Qi,Dogpatch:es,Brooklyn:ts,Helena:ns,Ashby:rs,Charmes:os}),as=function(r){return r?yd[r]||U.Filters[r]:null};function is(r){for(var t=this.warmth(),n=r.data,e=n.length,o=0;o<e;o+=4)n[o]+=t,n[o+2]-=t}function bd(r){for(var t=this.threshold(),n=r.data,e=n.length,o=0;o<e;o+=4)t!==0&&(n[o]=n[o]>=t?255:0,n[o+1]=n[o+1]>=t?255:0,n[o+2]=n[o+2]>=t?255:0)}yt.addGetterSetter(U.Image,"warmth",0,fr(),yt.afterSetFilter),yt.addGetterSetter(U.Image,"threshold",0,fr,yt.afterSetFilter);var vd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Warmth:is,CustomThreshold:bd}),ss=function(r){return Array.isArray(r)&&0<r.length?r.map(function(t){return U.Filters[t]||vd[t]}):[]};function Tr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Zt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Tr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Tr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var cs=function(){var r,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=Zt({},t.loadableDesignState);return Array.isArray(n.finetunes)&&(n.finetunes=ss(n.finetunes)),n.filter&&(n.filter=as(n.filter)),Zt(Zt({imgSrc:typeof t.source=="string"?t.source:((r=t.source)==null?void 0:r.src)||"",finetunes:[],finetunesProps:{},filter:null,adjustments:{crop:{ratio:t[E.CROP].ratio,ratioTitleKey:(r=t[E.CROP].ratioTitleKey)!=null?r:t[E.CROP].ratio,width:null,height:null,x:0,y:0},isFlippedX:!1,isFlippedY:!1,rotation:0},annotations:{},resize:{},shownImageDimensions:{}},n),{},{pointerCssIcon:Ee.DEFAULT,canvasScale:1,zoom:{factor:dt,x:null,y:null},isLoadingGlobally:!0,selectionsIds:[],tabId:t.defaultTabId||null,toolId:t.defaultToolId||null,feedback:{},pastDesignStates:[],futureDesignStates:[],isResetted:!0,haveNotSavedChanges:!1,latestColor:void 0})},nt=function(r){var t=cs(yi);return{imgSrc:r.imgSrc||t.imgSrc,finetunes:r.finetunes||t.finetunes,finetunesProps:r.finetunesProps||t.finetunesProps,filter:r.filter||t.filter,adjustments:r.adjustments||t.adjustments,annotations:r.annotations||t.annotations,resize:r.resize||t.resize}};function Ir(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Jt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ir(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ir(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var zn="REDO",ls=function(r){var t,n,e;return r.futureDesignStates&&0<r.futureDesignStates.length?(e=nt(r),t=(n=oi(r.futureDesignStates))[0],n=n.slice(1),e=[e].concat(oe(r.pastDesignStates||[])),Jt(Jt(Jt({},r),t),{},{selectionsIds:[],pastDesignStates:e,futureDesignStates:n,hasUndo:!0,hasRedo:0<n.length,haveNotSavedChanges:!0})):r};function jr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Qt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?jr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Wn="RESET",us=function(r){var t=nt({imgSrc:r.imgSrc});return Qt(Qt(Qt({},r),t),{},{selectionsIds:[],isResetted:!0,pastDesignStates:[],futureDesignStates:[],hasUndo:!1,hasRedo:!1,haveNotSavedChanges:!1})};function Pr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function xr(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Pr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Me="SET_FEEDBACK",Ed=function(r,t){return xr(xr({},r),{},{isLoadingGlobally:!1,feedback:t.feedback||{}})};function Cr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function _r(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Cr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Cr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Xn="SHOW_LOADER",wd=function(r){return _r(_r({},r),{},{isLoadingGlobally:!0})},Sd=k.div.withConfig({componentId:"sc-dwg14p-0"})(["padding:8px 1px 0;width:fit-content;margin:0 auto;max-width:99.5%;max-height:92px;[data-phone='true'] &{padding:0;margin-top:8px;max-height:initial;}"]),Td=k.div.withConfig({componentId:"sc-dwg14p-1"})(["display:flex;align-items:center;overflow-x:auto;[data-phone='true'] &{background:",";}"],function(r){return r.theme.palette["bg-primary"]}),Id=k.div.withConfig({componentId:"sc-dwg14p-2"})(function(r){return r=r.theme,`
    display: flex;
    border-radius: 2px;
    align-items: center;
    justify-content: center;
    padding: 8px;

    &:not(:last-child) {
      margin-right: 8px;
    }

    &,
    * {
      cursor: pointer;
    }

    &:hover {
      background: `.concat(r.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(r.palette["bg-primary-active"],`;

      * {
        color: `).concat(r.palette["accent-primary-active"],`;
      }
    }
  `)}),Gn=k(H).withConfig({componentId:"sc-dwg14p-3"})(["margin-left:6px;"]),jd=k.div.withConfig({componentId:"sc-dwg14p-4"})(["position:relative;width:100%;transition:max-height 100ms ease-in-out;display:flex;justify-content:center;align-items:center;",";"],function(r){return`
      max-height: `.concat(r.hasChildren?"40px":0,`;
      margin: `).concat(r.hasChildren?"0 auto 8px":0,`;
    `)}),Nr=function(s){var t=s.id,n=s.label,e=s.onClick,o=s.Icon,a=s.isSelected,i=s.children,s=s.className,l=b.exports.useCallback(function(d){e(t,d)},[]);return c.createElement(Id,{className:s,onClick:l,"aria-selected":a},c.createElement(o,{size:16}),n&&c.createElement(Gn,null,n),i)},ne=(Nr.defaultProps={isSelected:!1,id:void 0,children:null,label:""},b.exports.memo(Nr)),ds=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_brightness-tool-button",id:E.BRIGHTNESS,label:e("brightnessTool"),Icon:uc,onClick:t,isSelected:n})},Hn=(ds.defaultProps={isSelected:!1},b.exports.createContext({})),wn={name:"Name",save:"Save",saveAs:"Save as",back:"Back",loading:"Loading...",resetOperations:"Reset/delete all operations",changesLoseConfirmation:"All changes will be lost",changesLoseConfirmationHint:"Are you sure you want to continue?",cancel:"Cancel",continue:"Continue",undoTitle:"Undo last operation",redoTitle:"Redo last operation",showImageTitle:"Show original image",zoomInTitle:"Zoom in",zoomOutTitle:"Zoom out",resetZoomTitle:"Zoom percentage (Click to reset)",adjustTab:"Adjust",finetuneTab:"Finetune",filtersTab:"Filters",watermarkTab:"Watermark",annotateTab:"Draw",resize:"Resize",resizeTab:"Resize",invalidImageError:"Invalid image provided.",uploadImageError:"Error while uploading the image.",areNotImages:"are not images",isNotImage:"is not image",toBeUploaded:"to be uploaded",cropTool:"Crop",original:"Original",custom:"Custom",square:"Square",landscape:"Landscape",portrait:"Portrait",ellipse:"Ellipse",classicTv:"Classic TV",cinemascope:"Cinemascope",arrowTool:"Arrow",blurTool:"Blur",brightnessTool:"Brightness",contrastTool:"Contrast",ellipseTool:"Ellipse",unFlipX:"Un-Flip X",flipX:"Flip X",unFlipY:"Un-Flip Y",flipY:"Flip Y",hsvTool:"HSV",hue:"Hue",saturation:"Saturation",value:"Value",imageTool:"Image",importing:"Importing...",addImage:"+ Add image",lineTool:"Line",penTool:"Pen",polygonTool:"Polygon",sides:"Sides",rectangleTool:"Rectangle",cornerRadius:"Corner Radius",resizeWidthTitle:"Width in pixels",resizeHeightTitle:"Height in pixels",toggleRatioLockTitle:"Toggle ratio lock",reset:"Reset",resetSize:"Reset to original image size",rotateTool:"Rotate",textTool:"Text",textSpacings:"Text spacings",textAlignment:"Text alignment",fontFamily:"Font family",size:"Size",letterSpacing:"Letter Spacing",lineHeight:"Line height",warmthTool:"Warmth",addWatermark:"+ Add watermark",addWatermarkTitle:"Choose the watermark type",uploadWatermark:"Upload watermark",addWatermarkAsText:"Add as text",padding:"Padding",shadow:"Shadow",horizontal:"Horizontal",vertical:"Vertical",blur:"Blur",opacity:"Opacity",position:"Position",stroke:"Stroke",saveAsModalLabel:"Save the image as",extension:"Extension",nameIsRequired:"Name is required.",quality:"Quality",imageDimensionsHoverTitle:"Saved image size (width x height)",cropSizeLowerThanResizedWarning:"Note, the selected crop area is lower than the applied resize which might cause quality decrease"};function Ar(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Sn(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ar(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ar(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Lt={},Yn=Sn({},wn),kr="Error while loading translations from backend.",ps=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"en";return Object.assign(Yn,Lt[t==null?void 0:t.toLowerCase()]||{},r)},Pd=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return new Promise(function(t,n){var e=new XMLHttpRequest;e.responseType="json",e.onload=function(){var o;200<=e.status&&e.status<300?t(e.response):(console.warn("Error in sending translation key to backend ".concat((o=e.response)==null?void 0:o.hint,", ").concat(e.status)),n())},e.onerror=function(){var o;console.warn("Error in sending translation key to backend ".concat((o=e.response)==null?void 0:o.hint,", ").concat(e.status)),n()},e.open("POST","https://i18n.ultrafast.io/import/request-translations?grid_uuid=".concat(En)),e.send(JSON.stringify({grid_uuid:En,translations_requests:r}))})},xd=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"en",t=1<arguments.length?arguments[1]:void 0;return new Promise(function(n,e){var o=r.toLowerCase(),a=new XMLHttpRequest;a.responseType="json",a.onload=function(){var i,s;200<=a.status&&a.status<300?((a.response||[]).forEach(function(l){Lt[o]=Sn(Sn({},Lt[o]),{},h({},l.translation_key,l.translations[o]))}),i=[],Object.keys(wn).forEach(function(l){var d;!l||(d=Lt[o])!=null&&d[l]||i.push({key:l,lang:o,default:wn[l]})}),0<i.length&&Pd(i),ps(t,o),n(Yn)):(console.error("Status code: ".concat(a.status)),console.error(((s=a.response)==null?void 0:s.msg)||((s=a.response)==null?void 0:s.msg)||((s=a.response)==null?void 0:s.details)||kr),e())},a.onerror=function(){console.error("Status code ".concat(a.status,", error: ").concat(kr)),e()},a.open("GET","https://i18n.ultrafast.io/api/export?grid=".concat(En)),a.send()})},Cd=function(r){return Yn[r]||r||""},_d=function(r,t){return ha[t.type]&&ha[t.type](r,t.payload)||r};function Rr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Fr(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Rr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Rr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var en=!0,fs=function(s){var t=s.children,s=s.config,n=s===void 0?{}:s,s=Gd(_d,cs(n),n),s=T(s,2),e=s[0],o=s[1],a=(b.exports.useEffect(function(){return en=!0,function(){en=!1}},[]),b.exports.useCallback(function(){en&&o.apply(void 0,arguments)},[o])),i=(b.exports.useEffect(function(){ps(n.translations,n.language)},[n.useBackendTranslations,n.language,n.translations]),dc()),s=b.exports.useMemo(function(){return Fr(Fr({},e),{},{config:n,theme:i,dispatch:a,t:Cd})},[n,e]);return c.createElement(Hn.Provider,{value:s},t)},Nd=(fs.defaultProps={config:{}},function(n){var t=n.children,n=n.overridingValue;return c.createElement(Hn.Provider,{value:n},t)}),D=function(){return b.exports.useContext(Hn)};function Lr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Dr(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Lr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Lr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var je,mt=function(r,t){var n=D(),e=n.dispatch,o=n.finetunes,a=n.finetunesProps,i=b.exports.useCallback(function(s){e({type:Xs,payload:{finetune:r,finetuneProps:s}})},[]);return b.exports.useEffect(function(){o.includes(r)||i(Dr(Dr({},t),a))},[]),b.exports.useMemo(function(){return[a,i]},[a])},Ad=function(){var r=D(),t=r.dispatch,n=r.filter,e=b.exports.useCallback(function(o){t({type:Oi,payload:{filter:o}})},[]);return b.exports.useMemo(function(){return[n,e]},[n])},Ut=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return"".concat(r).concat(r?"-":"").concat(parseInt(Date.now()*Math.random(),10))},Vt=function(r){var t,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:300;return function(){var e;clearTimeout(t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=a[0],l=a.slice(1);t=setTimeout(r.bind.apply(r,[null,(e=s==null||(e=s.target)==null?void 0:e.value)!=null?e:s].concat(oe(l))),n)}},Tn=function(){var r,t=document.body,n=document.documentElement;return{topOffset:((r=window)==null?void 0:r.pageYOffset)||n.scrollTop||t.scrollTop,leftOffset:((r=window)==null?void 0:r.pageXOffset)||n.scrollLeft||t.scrollLeft}},gs=function(t){if(!t)return null;var t=t.getBoundingClientRect(),a=document.body,n=Tn(),i=n.topOffset,n=n.leftOffset,o=document.documentElement,e=o.clientTop||a.clientTop||0,o=o.clientLeft||a.clientLeft||0,a=t.top+i-e,i=t.left+n-o;return{top:Math.round(a),left:Math.round(i),width:t.width,height:t.height}},ee=function(r){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0;return Math.min(Math.max(t,+r),n||1e6)},Dt=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},t=t.parent,n=t.getStage(),e=n.attrs.zoomFactor,o=t.getRelativePointerPosition();return{offsetX:ee(o.x,0,r.width/(n.scaleX()/e))+t.attrs.xPadding,offsetY:ee(o.y,0,r.height/(n.scaleY()/e))+t.attrs.yPadding}},Mr=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n={},e=(2<arguments.length?arguments[2]:void 0).parent.attrs;return n.x=Math.min(r.offsetX,t.startedX)-e.xPadding||0,n.y=Math.min(r.offsetY,t.startedY)-e.yPadding||0,n.width=r.offsetX-t.startedX,n.height=r.offsetY-t.startedY,n.startedX=t.startedX-e.xPadding||0,n.startedY=t.startedY-e.yPadding||0,n},kd=["width","height","startedX","startedY"];function $r(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Br(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?$r(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$r(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}h(je={},E.RECT,U.Rect),h(je,E.ELLIPSE,U.Ellipse),h(je,E.POLYGON,U.RegularPolygon),h(je,E.LINE,U.Line),h(je,E.IMAGE,U.Image),h(je,E.TEXT,U.Text),h(je,E.ARROW,U.Arrow);var Rd=je,ms=[E.LINE,E.ARROW],Fd=[].concat(ms,[E.ELLIPSE,E.POLYGON]),zr=function(r){var t;return new Rd[r.name](Br(Br({},r),{},{opacity:(t=r.opacity)!=null?t:.7,x:(t=r.x)!=null?t:0,y:(t=r.y)!=null?t:0,width:Math.abs(r.width)||0,height:Math.abs(r.height)||0},ms.includes(r.name)?{stroke:r.stroke||"#000000"}:{}))},Ld=function(s,t,n){var e=s.width,o=s.height,a=s.startedX,i=s.startedY,s=Z(s,kd),l=Math.abs(e),d=Math.abs(o),u=e<0,p=o<0;return t===E.RECT?n?(s.width=Math.sqrt(l*l+d*d),s.height=s.width,s.x-=u?s.width-l:0,s.y-=p?s.height-d:0):(s.width=l,s.height=d):t===E.ELLIPSE?(n?(s.radiusX=Math.sqrt(l*l+d*d)/2,s.radiusY=s.radiusX,s.x-=u?2*s.radiusX-l:0,s.y-=p?2*s.radiusY-d:0):(s.radiusX=l/2,s.radiusY=d/2),s.offsetX=-s.radiusX,s.offsetY=-s.radiusY):t===E.POLYGON?(s.radius=(l+d)/2,s.x-=u?2*s.radius-l:0,s.y-=p?2*s.radius-d:0,s.offsetX=-s.radius,s.offsetY=-s.radius):t===E.LINE||t===E.ARROW?(s.x=a,s.y=i,s.points=[0,0],n?s.points.push(d<=l?e:0,l<d?o:0):s.points=[0,0,e,o]):(s.width=l,s.height=d),s},Dd=["id","x","y","points"],Md=["startedX","startedY","offsetX","offsetY","width","height"];function Wr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ze(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Wr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var fe={startedX:void 0,startedY:void 0,isOutOfCanvas:!1},se={passive:!0},at=1,We=null,it=null,ce=null,$d=function(r,t,n,e){function o(O){O.evt.preventDefault(),O.target.attrs.draggable||1<((O=O.evt.touches)==null?void 0:O.length)||(d(),O=Dt(n,a()),fe.startedX=O.offsetX,fe.startedY=O.offsetY,fe.isOutOfCanvas=!1,r.on("mousemove touchmove",u),r.on("mouseleave touchcancel",p),document.addEventListener("mouseup",S,se),document.addEventListener("touchend",S,se),document.addEventListener("mouseleave",S,se),document.addEventListener("touchcancel",S,se))}var a=function(){return gs(r.content)},i=function(O){We=zr(O),n.add(We),O.name===E.TEXT&&(it=zr(ze(ze({},O),{},{name:E.RECT,fill:"",stroke:"#000000",strokeWidth:2,shadowColor:"#ffffff",shadowBlur:1,shadowOpacity:.7})),n.add(it)),ce=O},s=function(O,y){O=Ld(O,ce.name,y),it&&it.setAttrs(O),We.setAttrs(O),ce=ze(ze({},ce),O)},l=function(O){var y=Dt(n,a());s(Mr(y,fe,n),O.shiftKey)},d=function(){n&&We&&n.destroyChildren()},u=function(O){var y;1<((y=O.evt.touches)==null?void 0:y.length)||(y=Dt(n,a()),fe.isOutOfCanvas&&(document.removeEventListener("mousemove",l,se),document.removeEventListener("touchmove",l,se),fe.isOutOfCanvas=!1),y=Mr(y,fe,n),We?s(y,O.evt.shiftKey):(t.id,t.x,t.y,t.points,O=Z(t,Dd),i(ze(ze({},O),y))))},p=function(){fe.isOutOfCanvas||(document.addEventListener("mousemove",l,se),document.addEventListener("touchmove",l,se),fe.isOutOfCanvas=!0)},S=function(){var O,y,v;d(),ce&&(ce.width>=at&&ce.height>=at||ce.radiusX>=at&&ce.radiusY>=at||(v=ce.points)!=null&&v[2]||(v=ce.points)!=null&&v[3]||ce.radius>=at)&&((v=ce).startedX,v.startedY,v.offsetX,v.offsetY,O=v.width,y=v.height,v=Z(v,Md),Fd.includes(t.name)||(v.width=O,v.height=y),e(v,!0)),ce=it=We=null,r.off("mousemove touchmove",u),r.off("mouseleave touchcancel",p),document.removeEventListener("mouseup",S,se),document.removeEventListener("touchend",S,se),document.removeEventListener("mouseleave",S,se),document.removeEventListener("touchcancel",S,se),document.removeEventListener("mousemove",l,se),document.removeEventListener("touchmove",l,se),fe.isOutOfCanvas=!1};return r.on("mousedown touchstart",o),function(){d(),r.off("mousedown touchstart",o)}},hs=function(r,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[];return b.exports.useCallback(Vt(r,t),n)},Bd=["fonts","onFontChange"],zd=["x","y","width","height","radius","radiusX","radiusY","points","image","text","scaleX","scaleY","rotation"],Wd=["shouldSave","neverSave"];function Xr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function K(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Xr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Xr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var _e=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],l=D(),n=l.dispatch,e=l.previewGroup,o=l.annotations,s=l.selectionsIds,a=s===void 0?[]:s,s=l.config,i=K(K({},s.annotationsCommon),s[((l=o[a[0]])==null?void 0:l.name)||r.name]),s=b.exports.useState(function(){return K(K(K({},i),r),o[a[0]])}),l=T(s,2),d=l[0],u=l[1],p=b.exports.useRef(),S=e==null?void 0:e.getStage(),O=b.exports.useCallback(function(g){g.fonts,g.onFontChange;var m=Z(g,Bd);n({type:Re,payload:m}),m.id&&r.name!==E.PEN&&Vt(function(){n({type:rt,payload:{annotationId:m.id}})},30)()},[]),y=hs(function(g){u(function(m){return K(K({},m),{},{shouldSave:!1,neverSave:!1},typeof g=="function"?g(m):g)})},15),v=b.exports.useCallback(function(g,m){return g.name===m?(g.x,g.y,g.width,g.height,g.radius,g.radiusX,g.radiusY,g.points,g.image,g.text,g.scaleX,g.scaleY,g.rotation,m=Z(g,zd),K(K(K({},i),r),m)):K(K({},i),r)},[]),w=b.exports.useCallback(function(g){u(function(m){return K(K(K({},v(m,g.name||r.name)),g),{},{id:g.id||Ut(g.name||m.name),shouldSave:!0,neverSave:!1})})},[]);return b.exports.useEffect(function(){var g=d.shouldSave,m=d.neverSave,I=Z(d,Wd),f=a.length===1&&o[a[0]];m||!g&&!f||O(K(K({},I),{},{id:(g?I:f).id}))},[d]),b.exports.useEffect(function(){setTimeout(function(){a.length===1?(p.current=d,u(K(K({},o[a[0]]),{},{neverSave:!0}))):p.current&&(u(K(K({},p.current),{},{neverSave:!0})),p.current=null)})},[a,o]),b.exports.useEffect(function(){var g,m=null;return S&&t&&(g=v(d,r.name),m=$d(S,K(K({},g),{},{name:r.name}),e,w)),function(){m&&m()}},[S,d,e]),b.exports.useMemo(function(){return[d,y,w]},[d,y,w])};function Gr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function tn(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Gr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Gr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Kn="UNDO",Os=function(r){var t,n,e;return r.pastDesignStates&&0<r.pastDesignStates.length?(e=nt(r),t=(n=oi(r.pastDesignStates))[0],n=n.slice(1),e=[e].concat(oe(r.futureDesignStates||[])),tn(tn(tn({},r),t),{},{selectionsIds:[],pastDesignStates:n,futureDesignStates:e,hasUndo:0<n.length,hasRedo:!0,haveNotSavedChanges:0<n.length})):r},Xd=["isDesignState"];function Hr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function vt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Hr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Hr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Yr,Gd=function(r,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},e=vt(vt({},t),{},{pastDesignStates:[],futureDesignStates:[],hasRedo:!1,hasUndo:!1});return b.exports.useReducer(function(o,a){var i,s=r(o,a)||e;return a.type===Kn?Os(o)||o:a.type===zn?ls(o)||o:a.type===Wn?us(o)||o:s.isDesignState?(a=nt(o),s.isDesignState,i=vt(vt({},Z(s,Xd)),{},{pastDesignStates:[a].concat(oe(o.pastDesignStates)),hasUndo:!0,hasRedo:!1,futureDesignStates:[],isResetted:!1,haveNotSavedChanges:!0}),Yr=setTimeout(function(){clearTimeout(Yr),typeof n.onModify=="function"&&n.onModify(i)}),i):s},e)},Hd=function(){var r=D(),t=r.tabId,n=r.dispatch,e=b.exports.useMemo(function(){return t!==G.ANNOTATE&&t!==G.WATERMARK},[t]),o=b.exports.useCallback(function(u){n({type:Re,payload:u})},[]),a=b.exports.useCallback(function(u){o({id:u.target.id(),x:u.target.x(),y:u.target.y()})},[]),i=b.exports.useCallback(function(u){var p={id:u.target.id(),rotation:u.target.rotation(),x:u.target.x(),y:u.target.y()};return u.target.name()===E.TEXT?(p.width=u.target.width()*u.target.scaleX(),p.height=u.target.height()*u.target.scaleY(),p.scaleX=1,p.scaleY=1):(p.scaleX=u.target.scaleX(),p.scaleY=u.target.scaleY()),p},[]),s=b.exports.useCallback(function(u){o(i(u))},[]),l=b.exports.useCallback(function(u){u.target.name()===E.TEXT&&u.target.setAttrs(i(u))}),d=b.exports.useCallback(function(u){var p;u.target.id()!==xe&&(p=u.evt.ctrlKey||u.evt.shiftKey||u.evt.metaKey,n({type:rt,payload:{annotationId:u.target.id(),multiple:p}}),n({type:Ht,payload:{toolId:u.target.name(),keepSelections:p}}))},[]);return b.exports.useMemo(function(){return e?{}:{onTransform:l,onTransformEnd:s,onDragEnd:a,onClick:d,onTap:d}},[e])},Un=function(){var r=b.exports.useRef(0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){}),t=b.exports.useRef(),n=b.exports.useCallback(function(l){l.forEach(function(d){var u,p;d.contentRect&&(u=(p=d.contentRect).width,p=p.height,r.current({entry:d,width:u,height:p}))})},[]),e=b.exports.useCallback(function(l){r.current=l},[]),o=b.exports.useCallback(function(){t.current||(t.current=new ResizeObserver(n))},[]),a=b.exports.useCallback(function(l,d){l&&(t.current||o(),t.current.observe(l),d&&(r.current=d))},[]),i=b.exports.useCallback(function(l,d){t.current&&l&&(t.current.unobserve(l),d&&(r.current=d))},[]),s=b.exports.useCallback(function(){t.current&&t.current.disconnect()},[]);return b.exports.useEffect(function(){return o(),s},[]),b.exports.useMemo(function(){return[a,i,e]},[])},Vn=function(){return window.matchMedia("(max-width: 438px)").matches},Oe=function(r,t,n,e,o){return(r-t)*(o-e)/(n-t)+e};function Kr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function nn(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Kr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Kr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Xt=function(r,t,n){var e;return nn(nn(nn({},r.x||r.x===0?{x:Math.round(Oe(r.x,0,t.width,0,n.width))}:{}),r.y||r.y===0?{y:Math.round(Oe(r.y,0,t.height,0,n.height))}:{}),{},{width:Math.round(Oe((e=r.width)!=null?e:t.width,0,t.width,0,n.width)),height:Math.round(Oe((e=r.height)!=null?e:t.height,0,t.height,0,n.height))})},Ce=function(r,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,a=Math.abs(n),n=Math.round(n),i=90<a,e=i?t:r,o=i?r:t,i=(i?a-90:a)*Math.PI/180,a=Math.abs(Math.sin(i)),i=Math.abs(Math.cos(i));return{width:Math.round(e*i)+Math.round(o*a),height:Math.round(e*a)+Math.round(o*i),offsetTop:0<=n&&n<=90?0:n<0&&-90<n||90<n?e*a:o*i+e*a,offsetLeft:n<=0&&-90<=n?0:90<n?e*i+o*a:o*a}},Yd=function(r){var t,n;return r instanceof HTMLImageElement?(n=(t=document.createElement("canvas")).getContext("2d"),t.width=r.width,t.height=r.height,n.drawImage(r,0,0),t.toDataURL()):""},ys=function(){var r,t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",n=1<arguments.length?arguments[1]:void 0,e=t;return!n&&Dl.some(function(o){return t.lastIndexOf(".".concat(o))===t.length-".".concat(o).length})&&(n=(r=(r=t.slice(t.lastIndexOf(".")+1))==null?void 0:r.toLowerCase())&&et.includes(r)?r:yr,e=t.slice(0,t.lastIndexOf("."))),n=n||yr,{fullName:"".concat(e,".").concat(n),name:e,extension:n}},be=function(r,t){return r<<t|r>>>32-t},st=function(r){for(var t="",n=7;0<=n;n--)t+=(15&r>>>4*n).toString(16);return t},Kd=function(r){for(var t,n=r.replace(/\r\n/g,`
`),e="",o=0;o<n.length;o++)(t=n.charCodeAt(o))<128?e+=String.fromCharCode(t):(127<t&&t<2048?e+=String.fromCharCode(192|t>>6):e=(e+=String.fromCharCode(224|t>>12))+String.fromCharCode(128|63&t>>6),e+=String.fromCharCode(128|63&t));return e},Ud=function(r){for(var t,n,e,o,a,i,s,l,d=r,u=Array(80),p=1732584193,S=4023233417,O=2562383102,y=271733878,v=3285377520,w=(d=Kd(d)).length,g=[],m=0;m<w-3;m+=4)n=d.charCodeAt(m)<<24|d.charCodeAt(m+1)<<16|d.charCodeAt(m+2)<<8|d.charCodeAt(m+3),g.push(n);switch(w%4){case 0:m=2147483648;break;case 1:m=8388608|d.charCodeAt(w-1)<<24;break;case 2:m=d.charCodeAt(w-2)<<24|d.charCodeAt(w-1)<<16|32768;break;case 3:m=d.charCodeAt(w-3)<<24|d.charCodeAt(w-2)<<16|d.charCodeAt(w-1)<<8|128}for(g.push(m);g.length%16!=14;)g.push(0);for(g.push(w>>>29),g.push(4294967295&w<<3),t=0;t<g.length;t+=16){for(m=0;m<16;m++)u[m]=g[t+m];for(m=16;m<=79;m++)u[m]=be(u[m-3]^u[m-8]^u[m-14]^u[m-16],1);for(e=p,o=S,a=O,i=y,s=v,m=0;m<=19;m++)l=4294967295&be(e,5)+(o&a|~o&i)+s+u[m]+1518500249,s=i,i=a,a=be(o,30),o=e,e=l;for(m=20;m<=39;m++)l=4294967295&be(e,5)+(o^a^i)+s+u[m]+1859775393,s=i,i=a,a=be(o,30),o=e,e=l;for(m=40;m<=59;m++)l=4294967295&be(e,5)+(o&a|o&i|a&i)+s+u[m]+2400959708,s=i,i=a,a=be(o,30),o=e,e=l;for(m=60;m<=79;m++)l=4294967295&be(e,5)+(o^a^i)+s+u[m]+3395469782,s=i,i=a,a=be(o,30),o=e,e=l;p=4294967295&p+e,S=4294967295&S+o,O=4294967295&O+a,y=4294967295&y+i,v=4294967295&v+s}return(l=st(p)+st(S)+st(O)+st(y)+st(v)).toLowerCase()},Vd=function(r){return btoa(r).replace(/=*$/g,"")},qd=function(r,t){return Ud(r).slice(0,t)},Zd=function(r,t,n,e){return r=Vd(r),t=qd(t+r+n,e),[t?"ci_seal=".concat(t):"",r?"ci_eqs=".concat(r):""].filter(function(o){return o}).join("&")},Jd=function(r,s,n){var s=s||{},e=s.salt,o=s.charCount,s=s.includeParams,a=s===void 0?[]:s,i=!a||(a==null?void 0:a.length)===0,s="",l=[],d=[];return r.split("&").forEach(function(u){var p=u.split("="),p=T(p,1)[0];(-1<(a==null?void 0:a.indexOf(p))||i?l:d).push(u)}),0<d.length&&(s=d.join("&")),[Zd(l.join("&"),n,e,o),s].filter(function(u){return u}).join("&")},Y=function(r){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:5;return r&&+parseFloat(r).toFixed(t)},Qd=["width","height","x","y","opacity","scaleX","scaleY"];function Ur(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Vr(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ur(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ur(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var ep=function(r,i,e){var i=Xt(r,i,e),e=i.x,o=i.y,a=i.width,i=i.height;return"tl_px=".concat(e,",").concat(o,"&br_px=").concat(e+a,",").concat(o+i).concat(r.ratio===De?"&radius=".concat(Math.max(a,i),"&force_format=png"):"")},tp=function(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},r=t.width,t=t.height;return"w=".concat(r,"&h=").concat(t)},np=function(r){return"r=".concat(-r)},rp=function(r,t){return"flip=".concat(r?"x":"").concat(t?"y":"")},op=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},u=1<arguments.length?arguments[1]:void 0,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},n=r.width,e=r.height,o=r.x,a=r.y,p=r.opacity,i=r.scaleX,i=i===void 0?1:i,s=r.scaleY,s=s===void 0?1:s,l=Z(r,Qd),d=u.width*u.scaledBy,u=u.height*u.scaledBy,p="wat=1&wat_gravity=absolute&wat_opacity=".concat(p,"&wat_pos=").concat(Math.floor((o-(t.x||0))/d*100,2),"p,").concat(Math.floor((a-(t.y||0))/u*100,2),"p");return r.name===E.TEXT?"".concat(p,"&wat_text=").concat(l.text.replaceAll(`
`,""),"&wat_font=").concat(l.fontFamily,"&wat_color=").concat(l.fill.replace("#",""),"&wat_fontsize=").concat(l.fontSize,"max"):(a=((o=l.image)==null?void 0:o.src)||l.image,t=!a.startsWith("blob:")&&a,"".concat(p,"&wat_scale=").concat(Y(n*i/d*100,2),"p,").concat(Y(e*s/u*100,2),"p").concat(t?"&wat_url=".concat(encodeURIComponent(t)):""))},Mt={Brighten:{cloudimage:{name:"bright",min:-100,max:100},internal:{propName:"brightness",min:-1,max:1}},Contrast:{cloudimage:{name:"contrast",min:-100,max:100},internal:{propName:"contrast",min:-100,max:100}},Blur:{cloudimage:{name:"blur",min:0,max:100},internal:{propName:"blurRadius",min:0,max:100}}},ap=function(r){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=[];return r.forEach(function(a){var o,a=a.name&&Mt[a.name];a&&(o=Y(Oe(t[a.internal.propName],a.internal.min,a.internal.max,a.cloudimage.min,a.cloudimage.max),2),n.push("".concat(a.cloudimage.name,"=").concat(o)))}),n.join("&")},ip=function(v,y,n,e){var w=v.token,g=v.domain,o=v.dontPrefixUrl,m=v.version,a=v.imageSealing,v=v.secureProtocol,i=y.imgSrc,u=y.adjustments,s=u.crop,l=u.rotation,d=u.isFlippedX,u=u.isFlippedY,p=y.resize,p=p===void 0?{}:p,S=y.finetunes,S=S===void 0?{}:S,O=y.finetunesProps,y=y.annotations,y=y===void 0?{}:y,v=o?"":"http".concat(v?"s":"","://").concat(w,".").concat(g.replace(/^(https?:\/\/)?(www\.)?|^\.|\/$/g,""),"/").concat(m?"".concat(m,"/"):""),w=[],g=(s.width&&s.height&&(s.x||s.x===0)&&(s.y||s.y===0)&&w.push(ep(s,n,e)),(p.width||p.height)&&w.push(tp(Vr(Vr({},e),p))),l&&w.push(np(l)),(d||u)&&w.push(rp(d,u)),0<S.length&&O&&w.push(ap(S,O)),y[xe]&&w.push(op(y[xe],n,s)),w.push("ci_url_encoded=1"),w.join("&")),m=(g=(g=a.enable?Jd(g,a,i):g).replaceAll(" ","+"),o&&i.indexOf("?")!==-1?"&":"?");return"".concat(v).concat(o?i:encodeURIComponent(i)).concat(g?"".concat(m).concat(g.replace(/&$/,"")):"")},sp=["filter"];function qr(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Xe(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?qr(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qr(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var bs=function(){var r=D(),t=r.dispatch,n=r.designLayer,e=r.shownImageDimensions,o=r.originalImage,y=r.adjustments,a=y.crop,d=y.rotation,i=d===void 0?0:d,s=y.isFlippedX,l=y.isFlippedY,d=r.config,u=d.savingPixelRatio,p=d.previewPixelRatio,S=d.forceToPngInEllipticalCrop,O=d.defaultSavedImageType,y=d.useCloudimage,v=d.cloudimage;return y?function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},g=nt(r),g=(g.filter,Z(g,sp)),m=ip(v,g,e,o),I=Xt({x:a.x,y:a.y,width:a.width,height:a.height},e,o);return{imageData:{cloudimageUrl:m,width:(w==null||(m=w.size)==null?void 0:m.width)||I.width,height:(w==null||(m=w.size)==null?void 0:m.height)||I.height},designState:g}}:function(){var m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},x=(U.pixelRatio=1<arguments.length&&arguments[1]!==void 0&&arguments[1]||u,n.attrs),B=x.clipWidth,N=x.clipHeight,j=x.clipX,x=x.clipY,C=(n.setAttr("isSaving",!0),n.getStage().clone({width:o.width,height:o.height,scaleX:s?-1:1,scaleY:l?-1:1})),f=T(C.children,1)[0],w=(C.children[1].destroy(),C.findOne("#".concat(fi))),g=(w.cache(),{x:C.width()/e.width,y:C.height()/e.height}),f=(f.setAttrs({rotation:0,offsetX:0,offsetY:0,x:0,y:0,scaleX:g.x,scaleY:g.y}),Xe(Xe({},(!m.name||!m.extension)&&ys(o.name,S&&a.ratio===De?"png":et.includes(O==null?void 0:O.toLowerCase())&&O)),m)),g=f.name,m=f.extension,I=f.quality,I=I===void 0?92:I,f=f.size,f=f===void 0?{}:f,P=["jpeg","jpg","webp"].includes(m),j=Xt({x:a.x||j,y:a.y||x,width:a.width||B,height:a.height||N},e,C.attrs),x=Ce(j.width,j.height,i),x=(C.setAttrs({offsetX:j.width/2+j.x,offsetY:j.height/2+j.y,width:x.width,height:x.height,x:x.width/2,y:x.height/2,rotation:i}),f.width&&(B=(s?-1:1)*(f.width/C.width()),C.setAttrs({scaleX:B,width:f.width,x:C.x()*Math.abs(B)})),f.height&&(N=(l?-1:1)*(f.height/C.height()),C.setAttrs({scaleY:N,height:f.height,y:C.y()*Math.abs(N)})),Xe({mimeType:"image/".concat(m==="jpg"?"jpeg":m)},P?{quality:I}:{})),B=C.toCanvas(x),N=C.toDataURL(x),F=Xe(Xe({},nt(r)),{},{shownImageDimensions:{width:r.shownImageDimensions.width,height:r.shownImageDimensions.height,scaledBy:r.shownImageDimensions.scaledBy}}),C=(F.filter&&(F.filter=F.filter.name),F.finetunes=F.finetunes.map(function(A){return A.name}),Object.keys(F.annotations).forEach(function(A){var R=F.annotations[A],$=R.name===E.IMAGE&&(($=R.image)==null?void 0:$.src);$&&$.startsWith("blob:")?F.annotations[A].image=Yd(R.image):R.image instanceof HTMLImageElement&&(F.annotations[A].image=$)}),Xe({fullName:"".concat(g,".").concat(m),name:g,extension:m,mimeType:"image/".concat(m),imageCanvas:B,imageBase64:N,width:f.width||j.width,height:f.height||j.height},P?{quality:I}:{}));return n.setAttr("isSaving",!1),t({type:qs}),w.clearCache(),U.pixelRatio=p,t({type:Bn}),{imageData:C,designState:F}}},cp=k(pc).withConfig({componentId:"sc-1wort0h-0"})(["width:",";max-width:",";user-select:none;margin-bottom:24px;.SfxSlider-annotation{font-size:13px;line-height:16px;}"],function(r){return r.width||"100px"},function(r){return r.width||"100px"}),lp=["onChange"],te=function(n){var t=n.onChange,n=Z(n,lp);return c.createElement(cp,ae({annotation:"",onChange:function(e,o){return t?t(o):void 0}},n))},Zr=-1,Jr={brightness:0},Qr=1,up={width:150,padding:0},dp=function(){var r=mt(U.Filters.Brighten,Jr),r=T(r,2),t=r[0],n=r[1];return c.createElement(te,{className:"FIE_brightness-option",min:Zr,step:.05,max:Qr,value:(r=t.brightness)!=null?r:Jr.brightness,onChange:function(e){n({brightness:ee(e,Zr,Qr)})},style:up})},pp=k(Fe).withConfig({componentId:"sc-ldar2z-0"})(["margin:0 0 0 6px;padding:0;"]),fp=k.div.withConfig({componentId:"sc-ldar2z-1"})(["margin-right:6px;svg,span{vertical-align:middle;}"]),gp=k(H).withConfig({componentId:"sc-ldar2z-2"})(["margin-left:4px;cursor:pointer;"]),mp=[{titleKey:"original",ratio:mi,icon:fc},{titleKey:"custom",ratio:hi,icon:gc},{titleKey:"landscape",descriptionKey:"16:9",ratio:Y(16/9),icon:mc},{titleKey:"portrait",descriptionKey:"9:16",ratio:Y(9/16),icon:hc},{titleKey:"ellipse",ratio:De,icon:Oc}],hp={height:16,width:16},qn=function(r){var t=r.titleKey,n=r.description,e=r.ratio,o=r.onClick,a=r.Icon,i=r.isActive,s=r.width,l=r.height,d=r.t,u=r.disableManualResize;return c.createElement(gt,{active:i,onClick:function(p){return o(p,e,{ratioTitleKey:t,width:s,height:l,disableManualResize:u})},size:"sm"},a&&c.createElement(fp,null,typeof a=="string"?c.createElement("span",{dangerouslySetInnerHTML:{__html:a}}):c.createElement(a,hp)),d(t),n&&c.createElement(gp,null,n))};function eo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function to(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?eo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):eo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}qn.defaultProps={Icon:void 0,width:void 0,height:void 0,disableManualResize:!1};var Op=function(l){function t(S,O,y){o(S,O,to(to({},y),{},{ratioGroupKey:n}))}var n=l.groupTitleKey,e=l.items,o=l.onItemSelect,a=l.t,i=l.isExpanded,s=l.setExpandedGroup,l=D().adjustments.crop,d=l.ratio,u=l.ratioGroupKey,p=l.ratioTitleKey;return c.createElement(yc,{label:a(n),onChange:function(){s(i?null:n)},expanded:i},e.map(function(m){var O=m.titleKey,I=m.ratio,y=m.width,v=m.height,w=m.descriptionKey,g=m.icon,m=m.disableManualResize,I=I!=null?I:Y(y/v);return c.createElement(qn,{key:O,titleKey:O,t:a,description:a(w),size:"sm",onClick:t,width:y,height:v,ratio:I,Icon:g,disableManualResize:m,isActive:d===I&&p===O&&u===n})}))};function no(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ro(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?no(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):no(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var ge,vs=function(u){function t(O,y,v){a(O,y,ro(ro({},v),{},{ratioFolderKey:n}))}var n=u.titleKey,e=u.Icon,o=u.groups,a=u.onItemSelect,i=u.prefixIconDimensions,s=u.t,u=D().adjustments.crop,l=u.ratioFolderKey,d=u.ratioGroupKey,u=b.exports.useState(""),u=T(u,2),p=u[0],S=u[1];return c.createElement(gt,{size:"sm",list:[{content:s(n),key:n,active:n===l,prefix:e&&(typeof e=="string"?c.createElement("span",{dangerouslySetInnerHTML:{__html:e}}):c.createElement(e,i)),subList:o.map(function(v){var y=v.titleKey,v=v.items;return{content:c.createElement(Op,{groupTitleKey:y,setExpandedGroup:S,isExpanded:p===""?d===y:p===y,t:s,items:v,onItemSelect:t}),key:y,disableHover:!0}})}]})},yp=(vs.defaultProps={Icon:void 0},{height:16,width:16}),oo=function(o){function t(S,O,y){S.stopPropagation(),S={ratio:O,ratioTitleKey:y.ratioTitleKey,ratioGroupKey:y.ratioGroupKey,ratioFolderKey:y.ratioFolderKey},a({type:rr,payload:S}),u.autoResize&&a({type:Qe,payload:{width:y.width,height:y.height,manualChangeDisabled:y.disableManualResize}}),e()}var n=o.anchorEl,e=o.onClose,o=D(),a=o.dispatch,i=o.t,p=o.adjustments,p=(p=p===void 0?{}:p).crop,s=(p=p===void 0?{}:p).ratio,l=p.ratioTitleKey,d=p.ratioFolderKey,u=o.config[E.CROP],p=b.exports.useMemo(function(){var S=u.presetsItems,S=S===void 0?[]:S,O=u.presetsFolders;return[].concat(oe(O===void 0?[]:O),oe(mp),oe(S))},[u]);return c.createElement(c.Fragment,null,c.createElement(Gn,{className:"FIE_crop-tool-label FIE_selected-crop-preset-label"},i(l||"cropTool")),c.createElement(pp,{className:"FIE_crop-presets-opener-button",color:"link",size:"lg"},n?c.createElement(c.Fragment,null,"\u25B4"):c.createElement(c.Fragment,null,"\u25BE")),c.createElement(Yt,{className:"FIE_crop-presets-menu",anchorEl:n,enableOverlay:!0,onClose:e,open:!!n,position:"top"},p.map(function(f){var O=f.titleKey,y=f.descriptionKey,v=f.ratio,w=f.width,g=f.height,m=f.groups,I=f.icon,f=f.disableManualResize;return m?c.createElement(vs,{key:O,titleKey:O,groups:m,Icon:I,onItemSelect:t,prefixIconDimensions:yp,t:i,disableManualResize:f}):c.createElement(qn,{key:v,ratio:v!=null?v:Y(w/g),titleKey:O,t:i,description:i(y),Icon:I,isActive:s===(v!=null?v:Y(w/g))&&!d,width:w,height:g,onClick:t,disableManualResize:f})})))},Es=(oo.defaultProps={anchorEl:null},function(n){var t=n.selectTool,n=n.isSelected,o=D(),e=o.config,o=o.t,a=b.exports.useState(),a=T(a,2),i=a[0],s=a[1];return c.createElement(ne,{className:"FIE_crop-tool",id:E.CROP,Icon:bc,onClick:function(l,d){t(l),s(d.currentTarget)},isSelected:n},e[E.CROP].noPresets?c.createElement(Gn,{className:"FIE_crop-tool-label"},o("cropTool")):c.createElement(oo,{anchorEl:i,onClose:function(){s(null)}}))}),bp=(Es.defaultProps={isSelected:!1},{transform:"scaleX(-1)"}),ws=function(s){var t=s.selectTool,n=s.isSelected,e=s.t,s=D(),o=s.dispatch,a=s.adjustments.isFlippedX,s=b.exports.useMemo(function(){return{reverseLabelOfCurrXFlipDir:e(a?"unFlipX":"flipX"),reverseIconOfCurrXFlipDir:function(){return c.createElement(vc,{style:a?bp:void 0})}}},[a]),i=s.reverseLabelOfCurrXFlipDir,s=s.reverseIconOfCurrXFlipDir,l=b.exports.useCallback(function(){o({type:nr,payload:{direction:Mn.X}})},[]),d=b.exports.useCallback(function(u){t(u),l()},[]);return c.createElement(ne,{className:"FIE_flip-x-tool-button",id:E.FLIP_X,label:i,Icon:s,onClick:d,isSelected:n})},vp=(ws.defaultProps={isSelected:!1},{transform:"scaleY(-1)"}),Ss=function(s){var t=s.selectTool,n=s.isSelected,e=s.t,s=D(),o=s.dispatch,a=s.adjustments.isFlippedY,s=b.exports.useMemo(function(){return{reverseLabelOfCurrXFlipDir:e(a?"unFlipY":"flipY"),reverseIconOfCurrXFlipDir:function(){return c.createElement(Ec,{style:a?vp:void 0})}}},[a]),i=s.reverseLabelOfCurrXFlipDir,s=s.reverseIconOfCurrXFlipDir,l=b.exports.useCallback(function(){o({type:nr,payload:{direction:Mn.Y}})},[]),d=b.exports.useCallback(function(u){t(u),l()},[]);return c.createElement(ne,{className:"FIE_flip-y-tool-button",id:E.FLIP_Y,label:i,Icon:s,onClick:d,isSelected:n})},Ts=(Ss.defaultProps={isSelected:!1},function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_rotate-tool-button",id:E.ROTATE,label:e("rotateTool"),Icon:wc,onClick:t,isSelected:n})}),Ep=(Ts.defaultProps={isSelected:!1},function(){var e=D(),r=e.dispatch,t=e.adjustments.rotation,t=t===void 0?0:t,e=e.resize,n=e===void 0?{}:e,e=hs(function(o,i){var i=ee(i,-180,180);r({type:Gs,payload:{rotation:i}}),n.width&&n.height&&(i=Ce(n.width,n.height,i),r({type:Qe,payload:{width:i.width,height:i.height}}))},20);return c.createElement(Sc,{className:"FIE_rotate-slider",min:-180,max:180,value:t,angle:60,onChange:e,style:{marginBottom:20}})}),Is=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_contrast-tool-button",id:E.CONTRAST,label:e("contrastTool"),Icon:Tc,onClick:t,isSelected:n})},ao=(Is.defaultProps={isSelected:!1},-100),io={contrast:0},so=100,wp={width:150,padding:0},Sp=function(){var r=mt(U.Filters.Contrast,io),r=T(r,2),t=r[0],n=r[1];return c.createElement(te,{className:"FIE_contrast-option",min:ao,max:so,value:(r=t.contrast)!=null?r:io.contrast,onChange:function(e){n({contrast:ee(e,ao,so)})},style:wp})},js=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_hsv-tool-button",id:E.HSV,label:e("hsvTool"),Icon:Ic,onClick:t,isSelected:n})},rn=(js.defaultProps={isSelected:!1},k.div.withConfig({componentId:"sc-tm5uj2-0"})(["margin:6px;"])),Et={hue:0,saturation:0,value:0},on={padding:0},Tp=function(n){function t(i,s){a(h({},i,+s))}var n=n.t,e=mt(U.Filters.HSV,Et),e=T(e,2),o=e[0],a=e[1];return c.createElement(c.Fragment,null,c.createElement(rn,{className:"FIE_hue-option-wrapper"},c.createElement(H,{className:"FIE_hue-option-label"},n("hue")),c.createElement(te,{className:"FIE_hue-option",min:0,step:1,max:259,value:(e=o.hue)!=null?e:Et.hue,onChange:function(i){return t("hue",i)},style:on})),c.createElement(rn,{className:"FIE_saturation-option-wrapper"},c.createElement(H,{className:"FIE_saturation-option-label"},n("saturation")),c.createElement(te,{className:"FIE_saturation-option",min:-2,step:.5,max:10,value:(e=o.saturation)!=null?e:Et.saturation,onChange:function(i){return t("saturation",i)},style:on})),c.createElement(rn,{className:"FIE_value-option-wrapper"},c.createElement(H,{className:"FIE_value-option-label"},n("value")),c.createElement(te,{className:"FIE_value-option",min:-2,step:.1,max:2,value:(e=o.value)!=null?e:Et.value,onChange:function(i){return t("value",i)},style:on})))},Ps=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_blur-tool-button",id:E.BLUR,label:e("blurTool"),Icon:jc,onClick:t,isSelected:n})},co=(Ps.defaultProps={isSelected:!1},0),lo={blurRadius:0},uo=100,Ip={width:150,padding:0},jp=function(){var r=mt(U.Filters.Blur,lo),r=T(r,2),t=r[0],n=r[1];return c.createElement(te,{className:"FIE_blur-option",min:co,max:uo,value:(r=t.blurRadius)!=null?r:lo.blurRadius,onChange:function(e){n({blurRadius:ee(e,co,uo)})},style:Ip})},xs=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_warmth-tool-button",id:E.WARMTH,label:e("warmthTool"),Icon:Pc,onClick:t,isSelected:n})},po=(xs.defaultProps={isSelected:!1},0),fo={warmth:0},go=200,Pp={width:150,padding:0},xp=function(){var r=mt(is,fo),r=T(r,2),t=r[0],n=r[1];return c.createElement(te,{className:"FIE_warmth-option",min:po,max:go,value:(r=t.warmth)!=null?r:fo.warmth,onChange:function(e){n({warmth:ee(e,po,go)})},style:Pp})},Cp=k.div.withConfig({componentId:"sc-1nr0bka-0"})(["max-width:680px;min-width:150px;position:relative;overflow:hidden;touch-action:pan-y pinch-zoom;"]),_p=k.ul.withConfig({componentId:"sc-1nr0bka-1"})(["padding:0;margin:0;white-space:nowrap;overflow:hidden;"]),Np=k.li.withConfig({componentId:"sc-1nr0bka-2"})(["padding:4px;display:inline-block;list-style-type:none;user-select:none;"]),Ap=k.div.withConfig({componentId:"sc-1nr0bka-3"})([""," left:0;background:linear-gradient( 90deg,#ffffff 1.56%,rgba(255,255,255,0.93) 70%,rgba(255,255,255,0) 100% );svg{transform:scaleX(-1);}"],`
  position: absolute;
  top: 0;
  height: 100%;
  width: 30px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
`),kp=k.div.withConfig({componentId:"sc-1nr0bka-4"})([""," background:linear-gradient( 270deg,#ffffff 1.56%,rgba(255,255,255,0.93) 70%,rgba(255,255,255,0) 100% );right:0;"],`
  position: absolute;
  top: 0;
  height: 100%;
  width: 30px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
`),Zn=function(O){function t(g,m){var I=g.findIndex(function(f){return f.classList.contains("FIE_carousel-item")});I!==-1&&(g[I].scrollIntoView({inline:m,behavior:"smooth",block:"nearest"}),setTimeout(function(){y()},500))}function n(g){var m;i.current=(((m=g.touches)==null?void 0:m[0])||g).pageX,document.addEventListener("mousemove",v),document.addEventListener("mouseup",w),document.addEventListener("touchmove",v),document.addEventListener("touchcancel",w),document.addEventListener("touchend",w)}var e=O.children,o=O.style,a=O.className,i=b.exports.useRef(!1),s=b.exports.useRef(),O=Un(),l=T(O,1)[0],O=b.exports.useState(!1),O=T(O,2),d=O[0],u=O[1],O=b.exports.useState(!1),O=T(O,2),p=O[0],S=O[1],O=b.exports.Children.toArray(e),y=function(){var g,m,I;s.current&&(m=(g=s.current).scrollWidth,I=g.offsetWidth,g=g.scrollLeft,m=Math.round(m-I),I=Math.round(m-g),u(0<g),S(0<I))},v=function(g){var m;i.current&&(m=(((m=g.touches)==null?void 0:m[0])||g).pageX,s.current.scrollBy(i.current-m,0),i.current=m,Vt(y,30)())},w=function(){i.current=null,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",v),document.removeEventListener("touchcancel",w),document.removeEventListener("touchend",w)};return b.exports.useEffect(function(){s.current&&l(s.current,y)},[]),c.createElement(Cp,{className:"".concat(a,"-wrapper"),style:o,onMouseDown:n,onTouchStart:n},d&&c.createElement(Ap,{className:"FIE_carousel-prev-button",onClick:function(g){var I=Tn(),m=I.topOffset,I=I.leftOffset,I=document.elementsFromPoint(g.pageX+g.currentTarget.offsetWidth-I,g.pageY-m);t(I,"end")}},c.createElement(gr,null)),c.createElement(_p,{className:"".concat(a,"-items"),ref:s},O.map(function(g){return c.createElement(Np,{className:"".concat(a,"-item-wrapper FIE_carousel-item"),key:g.key},g)})),p&&c.createElement(kp,{className:"FIE_carousel-next-button",onClick:function(g){var I=Tn(),m=I.topOffset,I=I.leftOffset,I=document.elementsFromPoint(g.pageX-g.currentTarget.offsetWidth-I,g.pageY-m);t(I,"start")}},c.createElement(gr,null)))},Rp=(Zn.defaultProps={style:null},k.div.withConfig({componentId:"sc-oxugzy-0"})(["display:inline-flex;flex-direction:column;align-items:center;justify-content:center;margin:0 4px;padding:2px;cursor:pointer;border-radius:2px;canvas{border-radius:2px;}"])),Fp=k(ai).withConfig({componentId:"sc-oxugzy-1"})(["[aria-selected='true'] &{padding:1px;border:2px solid ",";border-radius:2px;}"],function(r){return r.theme.palette["accent-primary-active"]}),Lp=k(H).withConfig({componentId:"sc-oxugzy-2"})(["margin-top:6px;font-size:11px;line-height:12px;[aria-selected='true'] &{color:",";}"],function(r){return r.theme.palette["accent-primary-active"]}),mo=60,ho=45,Oo=function(s){var t=s.filterLabel,n=s.filterFn,e=s.applyFilter,o=s.isActive,a=s.image,i=b.exports.useRef(),s=b.exports.useCallback(function(){e(n)},[n]),l=b.exports.useCallback(function(){i.current?i.current.cache():setTimeout(l,0)},[]);return b.exports.useEffect(function(){return a&&l(),function(){var d;(d=i.current)!=null&&d.clearCache()}},[a]),c.createElement(Rp,{className:"FIE_filters-item",onClick:s,"aria-selected":o},c.createElement(Fp,{className:"FIE_filters-item-preview",width:mo,height:ho},c.createElement(Fn,{onTap:s},c.createElement(Kt,{image:a,filters:n?[n]:[],width:mo,height:ho,x:0,y:0,ref:i}))),c.createElement(Lp,{className:"FIE_filters-item-label"},t))},Dp=(Oo.defaultProps={filterFn:void 0},b.exports.memo(Oo)),wt=U.Filters,Mp=[{label:"Original",filterFn:null},{label:"Invert",filterFn:wt.Invert},{label:"Black & White",filterFn:bi},{label:"Sepia",filterFn:wt.Sepia},{label:"Solarize",filterFn:wt.Solarize},{label:"Clarendon",filterFn:vi},{label:"Gingham",filterFn:Ei},{label:"Moon",filterFn:wi},{label:"Lark",filterFn:Si},{label:"Reyes",filterFn:Ti},{label:"Juno",filterFn:Ii},{label:"Slumber",filterFn:ji},{label:"Crema",filterFn:Pi},{label:"Ludwig",filterFn:xi},{label:"Aden",filterFn:Ci},{label:"Perpetua",filterFn:_i},{label:"Amaro",filterFn:Ni},{label:"Mayfair",filterFn:Ai},{label:"Rise",filterFn:ki},{label:"Hudson",filterFn:Ri},{label:"Valencia",filterFn:Fi},{label:"X-Pro II",filterFn:Li},{label:"Sierra",filterFn:Di},{label:"Willow",filterFn:Mi},{label:"Lo-Fi",filterFn:$i},{label:"Inkwell",filterFn:wt.Grayscale},{label:"Hefe",filterFn:Bi},{label:"Nashville",filterFn:zi},{label:"Stinson",filterFn:Wi},{label:"Vesper",filterFn:Xi},{label:"Earlybird",filterFn:Gi},{label:"Brannan",filterFn:Hi},{label:"Sutro",filterFn:Yi},{label:"Toaster",filterFn:Ki},{label:"Walden",filterFn:Ui},{label:"1977",filterFn:Vi},{label:"Kelvin",filterFn:qi},{label:"Maven",filterFn:Zi},{label:"Ginza",filterFn:Ji},{label:"Skyline",filterFn:Qi},{label:"Dogpatch",filterFn:es},{label:"Brooklyn",filterFn:ts},{label:"Helena",filterFn:ns},{label:"Ashby",filterFn:rs},{label:"Charmes",filterFn:os}],$p={maxWidth:"100%",width:"100%"},Bp=function(){var r=D().originalImage,t=Ad(),t=T(t,2),n=t[0],e=t[1];return c.createElement(Zn,{className:"FIE_filters",style:$p},Mp.map(function(o){return c.createElement(Dp,{key:o.label,filterLabel:o.label,filterFn:o.filterFn,applyFilter:e,isActive:n===o.filterFn,image:r})}))},Cs=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_text-tool-button",id:E.TEXT,label:e("textTool"),Icon:xc,onClick:t,isSelected:n})},zp=(Cs.defaultProps={isSelected:!1},k.div.withConfig({componentId:"sc-qvjmv1-0"})(["display:flex;align-items:center;justify-content:center;margin-top:8px;flex-wrap:wrap;"])),_s=k.div.withConfig({componentId:"sc-qvjmv1-1"})(["background:",";box-shadow:0px 1px 2px ",";border-radius:2px;overflow:visible;*{font-family:'Roboto',sans-serif;}"],function(r){return r.theme.palette["bg-secondary"]},function(r){return r.theme.palette["light-shadow"]}),Ne=k.div.withConfig({componentId:"sc-qvjmv1-2"})(["padding:8px 12px;"]),Wp=k(H).withConfig({componentId:"sc-qvjmv1-3"})(["font-weight:500;margin-bottom:12px;"]),yo=k.div.withConfig({componentId:"sc-qvjmv1-4"})(["display:flex;align-items:center;justify-content:space-between;"]),St=k.div.withConfig({componentId:"sc-qvjmv1-5"})(["&:not(:first-child){margin-left:12px;}"]),Pe=k.div.withConfig({componentId:"sc-qvjmv1-6"})(function(o){var t=o.theme,n=o.addThinBorder,e=o.noMargin,o=o.secondaryIconColor;return`
    cursor: pointer;
    padding: 3px 6px;
    margin: `.concat(e?0:"0 4px",`;
    display: inline-block;

    svg {
      vertical-align: middle;
      margin: 0 auto;
    }

    `).concat(n?"border: 0.5px solid ".concat(t.palette["borders-secondary"]):"",`;
    color: `).concat(o?"#959DA8":"",`;

    &[aria-selected='true'] {
      background: `).concat(t.palette["bg-primary-active"],`;

      * {
        color: `).concat(t.palette["accent-primary-active"],`;
      }
    }

    :hover {
      background: `).concat(t.palette["bg-primary-active"],`;
    }
  `)}),Xp=0,Gp=1,Hp=function(n){var e=n.annotation,t=n.updateAnnotation,n=n.t,e=e.opacity;return c.createElement(Ne,null,c.createElement(H,null,n("opacity")),c.createElement(te,{annotation:"%",onChange:function(o){t({opacity:ee(o/100,Xp,Gp)})},value:Math.round(100*e)}))},Yp=k.div.attrs(function(r){return r=r.$color,{style:{background:r==="rgba(0,0,0,0)"?"repeating-conic-gradient(#5d6d7e 0% 25%, transparent 0% 50%) 50% / 8px 8px":r}}}).withConfig({componentId:"sc-zmv0gj-0"})(["background:",";border-radius:2px;width:24px;height:24px;border:2px solid ",";cursor:pointer;box-sizing:border-box;"],function(r){return r.theme.palette["icons-primary"]},function(r){return r.theme.palette["borders-strong"]}),Kp=k(Cc).withConfig({componentId:"sc-zmv0gj-1"})(["max-width:212px;"]),an="FIE_pinnedColors",qt=function(O){function t(w){u(d?null:w.currentTarget)}var n=O.position,n=n===void 0?"top":n,e=O.onChange,o=O.color,O=D(),p=O.selectionsIds,a=p===void 0?[]:p,p=O.config.annotationsCommon,i=p===void 0?{}:p,s=O.dispatch,l=O.latestColor,p=b.exports.useState(),O=T(p,2),d=O[0],u=O[1],p=b.exports.useState(function(){return l||o||i.fill}),O=T(p,2),p=O[0],S=O[1],O=b.exports.useState((O=window)!=null&&O.localStorage?JSON.parse(localStorage.getItem(an)||"[]"):[]),O=T(O,2),y=O[0],v=O[1];return b.exports.useEffect(function(){var w=a.length===0&&l||o;S(w),e(w)},[o,a]),c.createElement(c.Fragment,null,c.createElement(Yp,{className:"FIE_color-picker-triggerer",onClick:t,$color:p,onChange:e}),c.createElement(_c,{className:"FIE_color-picker",anchorEl:d,open:!!d,position:n,onClick:t,overlay:!0,zIndex:11111},c.createElement(Kp,{onChange:function(w,g,m){var I;S(g),e(g),m=m,(I=window)!=null&&I.localStorage&&(I=window.localStorage.getItem(an),JSON.stringify(m)!==I&&(I=m.slice(-9),window.localStorage.setItem(an,JSON.stringify(I)),v(I))),l!==g&&s({type:Zs,payload:{latestColor:g}})},defaultColor:p,pinnedColors:y,showTransparentColor:!0})))},Up=(qt.defaultProps={position:"top",color:void 0},0),Vp=100,qp=function(n){var o=n.annotation,t=n.updateAnnotation,n=n.t,e=o.stroke,o=o.strokeWidth;return c.createElement(Ne,null,c.createElement(H,null,n("stroke")),c.createElement(te,{annotation:"px",onChange:function(a){t({strokeWidth:ee(a,Up,Vp)})},value:o}),c.createElement(qt,{color:e,onChange:function(a){t({stroke:a})}}))},Zp=function(e){function t(d,u){n(h({},d,ee(u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,3<arguments.length&&arguments[3]!==void 0?arguments[3]:100)))}var l=e.annotation,n=e.updateAnnotation,e=e.t,o=l.shadowOffsetX,a=l.shadowOffsetY,i=l.shadowBlur,s=l.shadowColor,l=l.shadowOpacity;return c.createElement(Ne,null,c.createElement(Wp,null,e("shadow")),c.createElement(yo,null,c.createElement(St,null,c.createElement(H,null,e("horizontal")),c.createElement(te,{annotation:"px",min:-100,max:100,onChange:function(d){return t("shadowOffsetX",d,-100,100)},value:o||0,hideTrack:!0})),c.createElement(St,null,c.createElement(H,null,e("vertical")),c.createElement(te,{annotation:"px",min:-100,max:100,onChange:function(d){return t("shadowOffsetY",d,-100,100)},value:a||0,hideTrack:!0}))),c.createElement(yo,null,c.createElement(St,null,c.createElement(H,null,e("blur")),c.createElement(te,{annotation:"%",onChange:function(d){return t("shadowBlur",d)},value:i})),c.createElement(St,null,c.createElement(H,null,e("opacity")),c.createElement(te,{annotation:"%",onChange:function(d){return t("shadowOpacity",d/100,0,1)},value:Math.round(100*l)}))),c.createElement(qt,{color:s,onChange:function(d){n({shadowColor:d})}}))},Jp=function(d,t,n){var o=d.width,s=d.height,i=d.scaleX,u=d.scaleY,p=d.rotation,e=d.padding,e=e===void 0?0:e,l=d.radius,a=d.radiusX,d=d.radiusY,o=Ce((o||2*(l||a))*(i===void 0?1:i),(s||2*(l||d))*(u===void 0?1:u),p===void 0?0:p),a=t.attrs,i=a.clipWidth,s=a.clipHeight,l=a.clipX,d=l===void 0?0:l,u=a.clipY,p=u===void 0?0:u,S={left:d+o.offsetLeft+e,center:d+i/2-(o.width/2-o.offsetLeft)+e,right:d+i-o.width-e+o.offsetLeft},O={top:p+o.offsetTop+e,middle:p+s/2-(o.height/2-o.offsetTop)+e,bottom:p+s-o.height-e+o.offsetTop};return h(t={},Q.TOP_LEFT,function(){return{x:S.left,y:O.top}}),h(t,Q.TOP_CENTER,function(){return{x:S.center,y:O.top}}),h(t,Q.TOP_RIGHT,function(){return{x:S.right,y:O.top}}),h(t,Q.MIDDLE_LEFT,function(){return{x:S.left,y:O.middle}}),h(t,Q.MIDDLE_CENTER,function(){return{x:S.center,y:O.middle}}),h(t,Q.MIDDLE_RIGHT,function(){return{x:S.right,y:O.middle}}),h(t,Q.BOTTOM_LEFT,function(){return{x:S.left,y:O.bottom}}),h(t,Q.BOTTOM_CENTER,function(){return{x:S.center,y:O.bottom}}),h(t,Q.BOTTOM_RIGHT,function(){return{x:S.right,y:O.bottom}}),t[n]()},bo=Object.values(Q),Qp=(h(ge={},Q.TOP_LEFT,-145),h(ge,Q.TOP_CENTER,-90),h(ge,Q.TOP_RIGHT,-45),h(ge,Q.MIDDLE_LEFT,180),h(ge,Q.MIDDLE_CENTER,0),h(ge,Q.MIDDLE_RIGHT,0),h(ge,Q.BOTTOM_LEFT,135),h(ge,Q.BOTTOM_CENTER,90),h(ge,Q.BOTTOM_RIGHT,45),ge),Te={OPACITY:"opacity",STROKE:"stroke",SHADOW:"shadow",POSITION:"position"},ef=function(r){var t=r.annotation,n=r.updateAnnotation,e=D().designLayer,o=bo.length;return bo.map(function(a,i){return c.createElement(b.exports.Fragment,{key:a},c.createElement(Pe,{onClick:function(){n(Jp(t,e,a))},secondaryIconColor:!0,addThinBorder:!0,noMargin:!0},a===Q.MIDDLE_CENTER?c.createElement(Nc,null):c.createElement(Ac,{style:{transform:"rotate(".concat(Qp[a],"deg)")}})),(i+1)%3==0&&i+1!==o&&c.createElement("div",null))})},tf=["children","morePoppableOptionsPrepended","moreOptionsPopupComponentsObj","morePoppableOptionsAppended","annotation","updateAnnotation","hideFillOption","hidePositionField","className"];function vo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Eo(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?vo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):vo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var sn,L,W,Je,In,jn,we=function(u){var t=u.children,n=u.morePoppableOptionsPrepended,e=u.moreOptionsPopupComponentsObj,o=u.morePoppableOptionsAppended,a=u.annotation,i=u.updateAnnotation,s=u.hideFillOption,l=u.hidePositionField,d=u.className,u=Z(u,tf),g=b.exports.useState(null),g=T(g,2),p=g[0],S=g[1],g=b.exports.useState(null),g=T(g,2),O=g[0],y=g[1],g=D(),v=g.config.useCloudimage,w=g.t,g=b.exports.useMemo(function(){return[].concat(oe(n),[{titleKey:"opacity",name:Te.OPACITY,Icon:kc}],oe(v?[]:[{titleKey:"stroke",name:Te.STROKE,Icon:Rc},{titleKey:"shadow",name:Te.SHADOW,Icon:Fc}]),[l?void 0:{titleKey:"position",name:Te.POSITION,Icon:Lc}])},[n]),f=b.exports.useMemo(function(){var P;return Eo(Eo({},e),{},(h(P={},Te.OPACITY,Hp),h(P,Te.STROKE,qp),h(P,Te.SHADOW,Zp),h(P,Te.POSITION,ef),P),o)},[e]),m=b.exports.useCallback(function(P,j){P=P==null?void 0:P.currentTarget,S(P),y(j)},[]),I=b.exports.useCallback(function(P){i({fill:P})},[i]),f=p&&O&&f[O];return c.createElement(zp,{className:"FIE_annotations-options".concat(d?" ".concat(d):"")},!s&&c.createElement(qt,{color:a.fill,onChange:I}),t,g.map(function(P){return P&&c.createElement(Pe,{className:"FIE_annotation-option-triggerer",key:P.name,title:w(P.titleKey),onClick:function(j){return m(j,P.name)}},c.createElement(P.Icon,{size:18}))}),f&&c.createElement(Yt,{className:"FIE_annotation-option-popup",anchorEl:p,open:!!p,onClose:m,position:"top"},c.createElement(_s,null,c.createElement(f,ae({annotation:a,updateAnnotation:i},u)))))},nf=(we.defaultProps={children:void 0,morePoppableOptionsPrepended:[],moreOptionsPopupComponentsObj:{},morePoppableOptionsAppended:[],hideFillOption:!1,hidePositionField:!1,className:void 0},k(ii).withConfig({componentId:"sc-1cwdnjz-0"})(["width:88px;margin:0 4px;"])),rf=k(Ln).withConfig({componentId:"sc-1cwdnjz-1"})(["width:70px;margin:0 4px;"]),of=0,af=100,wo=1,sf=function(e){function t(i,s){n(h({},i,ee(s,of,af)))}var a=e.annotation,n=e.updateAnnotation,e=e.t,o=a.letterSpacing,a=a.lineHeight;return c.createElement(Ne,null,c.createElement(H,null,e("letterSpacing")),c.createElement(te,{annotation:"px",isActive:!!o,onChange:function(i){return t("letterSpacing",i)},value:o,step:wo}),c.createElement(H,null,e("lineHeight")),c.createElement(te,{annotation:"px",isActive:!!a,onChange:function(i){return t("lineHeight",i)},value:a,step:wo}))},cf={transform:"scaleX(-1)"},lf=function(o){function t(a){e({align:a})}var n=o.annotation,e=o.updateAnnotation,o=n.align;return c.createElement(Ne,null,c.createElement(Pe,{onClick:function(){return t("left")},"aria-selected":o==="left"},c.createElement(mr,null)),c.createElement(Pe,{onClick:function(){return t("center")},"aria-selected":o==="center"},c.createElement(si,null)),c.createElement(Pe,{onClick:function(){return t("right")},"aria-selected":o==="right"},c.createElement(mr,{style:cf})))},uf=[{titleKey:"textAlignment",name:"text-alignment",Icon:si},{titleKey:"textSpacings",name:"text-spacings",Icon:Dc}],df=(h(sn={},"text-alignment",lf),h(sn,"text-spacings",sf),sn),Ns=function(r){r.target!==L&&(r=L.value,Gt(),In(r))},Gt=function(){L&&L.remove(L),window&&window.removeEventListener("click",Ns),W&&W.show(),Je&&(Je.show(),Je.forceUpdate()),typeof jn=="function"&&jn(),Je=L=W=null},pf=function(l,t,s,a,i){In=a,jn=i,Je=s,(W=t.findOne("#".concat(l))).hide(),Je.hide();var a=W.absolutePosition(),i=(L=document.createElement("textarea"),t.container().parentNode.appendChild(L),L.value=W.text(),L.style.position="absolute",L.style.top="".concat(a.y,"px"),L.style.left="".concat(a.x,"px"),L.style.width="".concat(W.width()-2*W.padding(),"px"),L.style.height="".concat(W.height()-2*W.padding()+5,"px"),L.style.maxWidth="".concat(W.width()-2*W.padding(),"px"),L.style.maxHeight="".concat(W.height()-2*W.padding()+5,"px"),L.style.fontSize="".concat(W.fontSize(),"px"),L.style.border="1px solid rgba(0, 0, 0, 0.5)",L.style.padding="0px",L.style.margin="0px",L.style.overflow="hidden",L.style.background="none",L.style.outline="none",L.style.resize="none",L.style.lineHeight=W.lineHeight(),L.style.fontFamily=W.fontFamily(),L.style.transformOrigin="left top",L.style.textAlign=W.align(),L.style.fontStyle=W.fontStyle(),L.style.letterSpacing=W.letterSpacing(),L.style.lineHeight=W.lineHeight(),L.style.color=W.fill(),W.rotation()),s="",l=(i&&(s+="rotateZ(".concat(i,"deg)")),0),d=-1<navigator.userAgent.toLowerCase().indexOf("firefox");d&&(l+=2+Math.round(W.fontSize()/20)),s+="translateY(-".concat(l,"px)"),L.style.transform=s,L.style.height="auto",L.style.height="".concat(L.scrollHeight+3,"px"),L.focus(),L.addEventListener("keydown",function(u){var p;u.key!=="Enter"||u.shiftKey||(p=L.value,Gt(),In(p)),u.key==="Escape"&&Gt()}),L.addEventListener("keydown",function(u){u.key!=="Enter"&&u.key!=="Escape"&&(u=W.getAbsoluteScale().x,u=(u=W.width()*u)||W.placeholder.length*W.fontSize(),(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||d)&&(u=Math.ceil(u)),(document.documentMode||/Edge/.test(navigator.userAgent))&&(u+=1),L.style.width="".concat(u,"px"),L.style.height="auto",L.style.height="".concat(L.scrollHeight+W.fontSize(),"px"))}),window&&setTimeout(function(){window.addEventListener("click",Ns)})},Pn=function(e){var t=e.text,n=e.saveText,e=e.children,S=D(),o=S.dispatch,a=S.textIdOfEditableContent,i=S.designLayer,s=S.t,S=S.config,l=S.useCloudimage,S=S[E.TEXT],d=S.fonts,d=d===void 0?[]:d,u=S.onFontChange,p=b.exports.useCallback(function(g){var g=g.target,m=g.name,I=g.value,f=g.type;n(function(P){return h({id:P.id},m,f==="number"?ee(I,1,500):I)})},[n]),S=b.exports.useCallback(function(w){var g;p({target:{name:"fontFamily",value:w}}),t.fontFamily!==w&&typeof u=="function"&&(g=i.draw.bind(i),u(w,g))},[p,t,i]),O=b.exports.useCallback(function(w){var g=((g=t.fontStyle)==null?void 0:g.replace("normal","").split(" "))||[];0<Object.keys(g).length&&g.includes(w)?g=g.filter(function(m){return m!==w}):g.push(w),p({target:{name:"fontStyle",value:g.join(" ").trim()||"normal"}})},[t]),y=b.exports.useCallback(function(){o({type:ar,payload:{textIdOfEditableContent:null}})},[]),v=b.exports.useCallback(function(w){p({target:{name:"text",value:w}}),y()},[]);return b.exports.useEffect(function(){var w,g;return a&&t.id===a&&(w=i.getStage(),g=T(w.findOne("#".concat(pi)).children,1)[0],pf(a,w,g,v,y)),function(){g&&a&&Gt()}},[a]),c.createElement(we,{className:"FIE_text-tool-options",annotation:t,updateAnnotation:n,morePoppableOptionsPrepended:l?[]:uf,moreOptionsPopupComponentsObj:l?{}:df,t:s},Array.isArray(d)&&1<d.length&&c.createElement(nf,{className:"FIE_text-font-family-option",onChange:S,value:t.fontFamily,placeholder:s("fontFamily"),size:"sm"},d.map(function(){var w,g=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return c.createElement(gt,{className:"FIE_text-font-family-item",key:(w=g.value)!=null?w:g,value:(w=g.value)!=null?w:g},(w=g.label)!=null?w:g)})),c.createElement(rf,{className:"FIE_text-size-option",value:t.fontSize||"",name:"fontSize",onChange:p,inputMode:"numeric",type:"number",size:"sm",placeholder:s("size")}),!l&&c.createElement(c.Fragment,null,c.createElement(Pe,{className:"FIE_text-bold-option","aria-selected":(t.fontStyle||"").includes("bold"),onClick:function(){return O("bold")}},c.createElement(Mc,null)),c.createElement(Pe,{className:"FIE_text-italic-option","aria-selected":(t.fontStyle||"").includes("italic"),onClick:function(){return O("italic")}},c.createElement($c,null))),e)},ff=(Pn.defaultProps={children:null},function(t){var t=t.t,e=_e({name:E.TEXT}),e=T(e,2),n=e[0],e=e[1];return c.createElement(Pn,{text:n,saveText:e,t})}),As=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_image-tool-button",id:E.IMAGE,label:e("imageTool"),Icon:Bc,onClick:t,isSelected:n})},gf=(As.defaultProps={isSelected:!1},k.input.withConfig({componentId:"sc-h20emh-0"})(["display:none;width:1px;height:1px;position:absolute;z-index:-1;"])),mf=function(r,t){return c.createElement(gf,ae({type:"file",ref:t},r))},ks=b.exports.forwardRef(mf),Jn=function(o){var t=o.image,n=o.saveImage,e=o.children,o=o.t;return c.createElement(we,{className:"FIE_image-tool-options",annotation:t,updateAnnotation:n,t:o,hideFillOption:!0},e)},So=(Jn.defaultProps={children:null},.15),hf=function(){function r(y){O.current+=1,O.current===y&&(O.current=0,e(!1))}function t(y){i({type:Me,payload:{feedback:{message:y,status:tt.WARNING}}})}var d=b.exports.useState(),d=T(d,2),n=d[0],e=d[1],o=b.exports.useRef(),d=D(),a=d.shownImageDimensions,i=d.dispatch,u=d.adjustments.crop,s=u===void 0?{}:u,l=d.t,u=_e({name:E.IMAGE,opacity:1},!1),d=T(u,3),u=d[0],p=d[1],S=d[2],O=b.exports.useRef(0);return c.createElement(Jn,{image:u,saveImage:p,t:l},c.createElement(Fe,{className:"FIE_image-tool-add-option",color:"secondary",onClick:n?void 0:function(){o.current&&o.current.click()},disabled:n,size:"sm",style:{maxHeight:24}},l(n?"importing":"addImage")),c.createElement(ks,{ref:o,onChange:n?void 0:function(y){var v,w,g;y.target.files&&(e(!0),v=[],g=Array.from(y.target.files),w=g.length,g.forEach(function(m){var I;m.type.startsWith("image/")?((I=new Image).onload=function(){var f,P,j,x,B,N;f=I,P=s.width||a.width,j=s.height||a.height,x=s.x||0,B=s.y||0,N=Math.min(1,P/(f.width+f.width*So),j/(f.height+f.height*So)),S({image:f,x:x+P/2-f.width*N/2,y:B+j/2-f.height*N/2,width:f.width*N,height:f.height*N}),URL.revokeObjectURL(m),r(w)},I.onerror=function(){t(l("uploadImageError")),r(w)},I.src=URL.createObjectURL(m)):(v.push(m.name),r(w))}),0<v.length&&(g=1<v.length?l("areNotImages"):l("isNotImage"),t("".concat(v.join(", ")," ").concat(g," ").concat(l("toBeUploaded"),".")))),y.target.value=""},disabled:n,multiple:!0}))},Rs=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_rect-tool-button",id:E.RECT,label:e("rectangleTool"),Icon:zc,onClick:t,isSelected:n})},To=(Rs.defaultProps={isSelected:!1},0),Io=150,Of=function(n){var e=n.annotation,t=n.updateAnnotation,n=n.t,e=e.cornerRadius;return c.createElement(Ne,null,c.createElement(H,null,n("cornerRadius")),c.createElement(te,{annotation:"px",onChange:function(o){t({cornerRadius:ee(o,To,Io)})},value:e,min:To,max:Io}))},yf=[{titleKey:"cornerRadius",name:"corner-radius",Icon:Wc}],bf=h({},"corner-radius",Of),vf=function(t){var t=t.t,e=_e({name:E.RECT}),e=T(e,2),n=e[0],e=e[1];return c.createElement(we,{className:"FIE_rect-tool-options",moreOptionsPopupComponentsObj:bf,morePoppableOptionsPrepended:yf,annotation:n,updateAnnotation:e,t})},Fs=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_ellipse-tool-button",id:E.ELLIPSE,label:e("ellipseTool"),Icon:Xc,onClick:t,isSelected:n})},Ef=(Fs.defaultProps={isSelected:!1},function(t){var t=t.t,e=_e({name:E.ELLIPSE}),e=T(e,2),n=e[0],e=e[1];return c.createElement(we,{className:"FIE_ellipse-tool-options",annotation:n,updateAnnotation:e,t})}),Ls=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_pen-tool-button",id:E.PEN,label:e("penTool"),Icon:Gc,onClick:t,isSelected:n})};function jo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function cn(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?jo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}Ls.defaultProps={isSelected:!1};var Ie={passive:!0},wf=function(t){var t=t.t,a=D(),n=a.dispatch,e=a.designLayer,o=a.previewGroup,a=a.config,a=_e(cn(cn(cn({},a.annotationsCommon),a[E.PEN]),{},{name:E.PEN}),!1),a=T(a,3),i=a[0],s=a[1],l=a[2],d=b.exports.useRef(null),u=b.exports.useRef({points:[],moved:!1,id:""}),p=b.exports.useCallback(function(){var v=gs(d.current.content),v=Dt(o,v);return[v.offsetX-(e.attrs.xPadding||0),v.offsetY-(e.attrs.yPadding||0)]},[]),S=b.exports.useCallback(function(){u.current.moved?(u.current.points=u.current.points.concat(p()),n({type:Re,payload:{id:u.current.id,points:u.current.points,dismissHistory:!0}})):(u.current={moved:!0,id:Ut(E.PEN),points:[].concat(oe(u.current.points),oe(p()))},l({id:u.current.id,name:E.PEN,points:u.current.points}))},[]),O=b.exports.useCallback(function(){u.current.id&&n({type:rt,payload:{annotationId:u.current.id}}),u.current=null,d.current.off("mousemove touchmove",S),d.current.off("mouseleave touchcancel",O),document.removeEventListener("mouseup",O,Ie),document.removeEventListener("touchend",O,Ie),document.removeEventListener("mouseleave",O,Ie),document.removeEventListener("touchcancel",O,Ie)},[]),y=b.exports.useCallback(function(v){v.target.attrs.draggable||(v.evt.preventDefault(),u.current={points:p()},d.current.on("mousemove touchmove",S),d.current.on("mouseleave touchcancel",O),document.addEventListener("mouseup",O,Ie),document.addEventListener("touchend",O,Ie),document.addEventListener("mouseleave",O,Ie),document.addEventListener("touchcancel",O,Ie))},[]);return b.exports.useEffect(function(){return d.current=e==null?void 0:e.getStage(),d.current&&d.current.on("mousedown touchstart",y),function(){d.current&&d.current.off("mousedown touchstart",y)}},[]),c.createElement(we,{className:"FIE_pen-tool-options",annotation:i,updateAnnotation:s,t,hidePositionField:!0,hideFillOption:!0})},Ds=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_line-tool-button",id:E.LINE,label:e("lineTool"),Icon:Hc,onClick:t,isSelected:n})},Sf=(Ds.defaultProps={isSelected:!1},function(t){var t=t.t,e=_e({name:E.LINE}),e=T(e,2),n=e[0],e=e[1];return c.createElement(we,{className:"FIE_line-tool-options",annotation:n,updateAnnotation:e,t,hidePositionField:!0,hideFillOption:!0})}),Ms=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_arrow-tool-button",id:E.ARROW,label:e("arrowTool"),Icon:Yc,onClick:t,isSelected:n})},Tf=(Ms.defaultProps={isSelected:!1},function(t){var t=t.t,e=_e({name:E.ARROW}),e=T(e,2),n=e[0],e=e[1];return c.createElement(we,{className:"FIE_arrow-tool-options",annotation:n,updateAnnotation:e,t,hidePositionField:!0,hideFillOption:!0})}),$s=function(e){var t=e.selectTool,n=e.isSelected,e=e.t;return c.createElement(ne,{className:"FIE_polygon-tool-button",id:E.POLYGON,label:e("polygonTool"),Icon:Kc,onClick:t,isSelected:n})},Po=($s.defaultProps={isSelected:!1},3),xo=25,If=function(n){var e=n.annotation,t=n.updateAnnotation,n=n.t,e=e.sides;return c.createElement(Ne,null,c.createElement(H,null,n("sides")),c.createElement(te,{annotation:"",onChange:function(o){t({sides:ee(o,Po,xo)})},value:e,min:Po,max:xo}))},jf=[{titleKey:"sides",name:"sides-number",Icon:Uc}],Pf=h({},"sides-number",If),xf=function(t){var t=t.t,e=_e({name:E.POLYGON}),e=T(e,2),n=e[0],e=e[1];return c.createElement(we,{className:"FIE_polygon-tool-options",morePoppableOptionsPrepended:jf,moreOptionsPopupComponentsObj:Pf,annotation:n,updateAnnotation:e,t,hidePositionField:!0})};function Co(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function _o(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Co(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Co(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Bs=function(r,t,n,e){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0;if(r.width&&r.height)return r;var a=Xt(t,n,e),a=Ce(a.width,a.height,o);return r.width||r.height?{width:r.width||a.width,height:r.height||a.height}:a.width&&a.height&&a||_o(_o({},e),Ce(e.width,e.height,o))},Cf=k.div.withConfig({componentId:"sc-17otqpz-0"})(["display:flex;justify-content:",";align-items:center;flex-wrap:wrap;"],function(r){return r.alignLeft?"left":"center"}),No=k(Ln).withConfig({componentId:"sc-17otqpz-1"})(["width:70px;height:24px;margin:",";"],function(r){return r.noLeftMargin?"8px 8px 8px 0":"8px"}),_f=k(Le).withConfig({componentId:"sc-17otqpz-2"})(["margin-right:16px;"]),Nf=k(H).withConfig({componentId:"sc-17otqpz-3"})(["font-size:13px;line-height:15px;"]),Qn=function(a){function t(I){var w,g=(I=I.target).name,I=I.value,m=Ce(s.width,s.height,d),I=h({},g,ee(I,1)),f=g==="height",P=f?"width":"height";return((w=e.ratioUnlocked)!=null?w:l.ratioUnlocked)||(w=m.width/m.height,I[P]=Math.round(f?I[g]*w:I[g]/w)),I[g]===l[g]&&I[P]===l[P]?void 0:typeof n=="function"?void n(I):void i({type:Qe,payload:I})}var n=a.onChange,e=a.currentSize,o=a.hideResetButton,a=a.alignLeft,p=D(),i=p.dispatch,s=p.originalImage,l=p.resize,y=p.shownImageDimensions,u=p.adjustments,O=u.crop,u=u.rotation,d=u===void 0?0:u,u=p.theme,p=p.t,S=!l.width&&!l.height||s.width===l.width&&s.height===l.height,O=Bs((e.width||e.height)&&e||l,O,y,s,d),y=l.manualChangeDisabled;return c.createElement(Cf,{className:"FIE_resize-tool-options",alignLeft:a},c.createElement(No,{className:"FIE_resize-width-option",value:O.width,name:"width",onChange:y?void 0:t,inputMode:"numeric",title:p("resizeWidthTitle"),type:"number",size:"sm",placeholder:"Width",noLeftMargin:a,disabled:y}),c.createElement(Nf,{className:"FIE_resize-x-label"},"x"),c.createElement(No,{className:"FIE_resize-height-option",value:O.height,name:"height",onChange:y?void 0:t,inputMode:"numeric",title:p("resizeHeightTitle"),type:"number",size:"sm",placeholder:"Height",disabled:y}),c.createElement(_f,{className:"FIE_resize-ratio-locker",title:p("toggleRatioLockTitle"),onClick:y?void 0:function(){return typeof n=="function"?void n({ratioUnlocked:!e.ratioUnlocked}):void i({type:Qe,payload:{ratioUnlocked:!l.ratioUnlocked}})},color:"link",size:"sm",disabled:y},e.ratioUnlocked||l.ratioUnlocked?c.createElement(Vc,{color:u.palette["icons-secondary"]}):c.createElement(qc,{color:u.palette["icons-secondary"]})),!o&&c.createElement(Fe,{className:"FIE_resize-reset-button",size:"sm",onClick:S||y?void 0:function(){i({type:Qe,payload:{width:null,height:null,ratioUnlocked:!1}})},disabled:S||y,title:p("resetSize")},p("reset")))},Af=(Qn.defaultProps={onChange:void 0,currentSize:{},hideResetButton:!1,alignLeft:!1},k.div.withConfig({componentId:"sc-m9ezm7-0"})(["height:22px;display:flex;align-items:center;margin-right:4px;"])),kf=k(Fe).withConfig({componentId:"sc-m9ezm7-1"})(["height:100%;padding:4px 8px;flex-grow:1;justify-content:center;align-items:center;",";span{font-size:12px !important;line-height:14px !important;}"],function(r){return r.keepBorderRadius?"":"border-top-right-radius: 0; border-bottom-right-radius: 0"}),Rf=k(Le).withConfig({componentId:"sc-m9ezm7-2"})(["border-top-left-radius:0;border-bottom-left-radius:0;margin-left:1px;height:100%;padding:4px 8px;svg{transform:rotate(-90deg);width:10px;margin-top:-4px;}"]),Tt=!0,er=function(y){function t(m){Tt&&(m.stopPropagation(),w(m.currentTarget))}function n(){Tt&&w(null)}var e=y.label,o=y.onClick,a=y.title,i=y.color,s=y.menuFromBtn,l=y.menuItems,d=y.menuPosition,d=d===void 0?"bottom":d,u=y.arrowColor,p=y.disabled,p=p!==void 0&&p,S=y.className,O=y.menuStyle,y=y.wrapperStyle,g=b.exports.useState(null),g=T(g,2),v=g[0],w=g[1],g=(b.exports.useEffect(function(){return Tt=!0,function(){Tt=!1}},[]),0<l.length);return c.createElement(c.Fragment,null,c.createElement(Af,{className:"".concat(S,"-wrapper"),onClick:p?void 0:function(m){s&&t(m),typeof o=="function"&&o()},style:y},c.createElement(kf,{className:"".concat(S,"-button"),color:i,size:"md",title:a,keepBorderRadius:!g,disabled:p},e),g&&c.createElement(Rf,{className:"".concat(S,"-menu-opener"),color:i,size:"md",onClick:s||p?void 0:t,disabled:p},c.createElement(ci,{color:u}))),g&&c.createElement(Yt,{className:"".concat(S,"-menu"),anchorEl:v,onClose:n,open:!0,style:O,position:d},l.map(function(m){return m&&c.createElement(gt,{className:"".concat(S,"-menu-item"),key:m.key,active:m.isActive,onClick:function(){var I;typeof(I=m.onClick)=="function"&&I(),n()},size:"md"},m.icon&&c.createElement(Zc,{size:"md"},typeof m.icon=="string"?c.createElement("span",{dangerouslySetInnerHTML:{__html:m.icon}}):c.createElement(m.icon,null)),c.createElement(Jc,null,m.label))})))},Ff=(er.defaultProps={title:"",color:"primary",menuFromBtn:!1,menuPosition:"bottom",onClick:void 0,disabled:!1,arrowColor:void 0,menuStyle:void 0,wrapperStyle:void 0},k.div.withConfig({componentId:"sc-fvaj5j-0"})(["display:flex;align-items:center;justify-content:center;flex-wrap:wrap;overflow:hidden;",";"],function(r){return r.noWrap?"margin-left: 4px; flex-wrap: nowrap;":""})),Ao=k.div.withConfig({componentId:"sc-fvaj5j-1"})(["margin-bottom:8px;"]),Lf=k.div.withConfig({componentId:"sc-fvaj5j-2"})(function(r){return r=r.theme,`
    padding: 4px;
    border: 1px solid `.concat(r.palette["borders-primary"],`;
    width: fit-content;
    height: 32px;
    border-radius: 2px;
    overflow: hidden;
    cursor: pointer;

    :hover {
      background: `).concat(r.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(r.palette["bg-primary-active"],`;
      border-color: `).concat(r.palette["accent-primary-active"],`;
    }

    img {
      max-width: 100%;
      max-height: 100%;
    }
  `)}),zs=function(e){function t(l){n(l.currentTarget.children[0])}var n=e.selectWatermark,e=e.style,i=D(),s=i.config,o=i.annotations,a=b.exports.useMemo(function(){var l;return(l=(o[xe]||{}).image)==null?void 0:l.src},[o[xe]]),i=(s[E.WATERMARK]||{}).gallery,s=i===void 0?[]:i;return s.length===0?null:c.createElement(Zn,{className:"FIE_watermark-gallery",style:e},s.map(function(l){return c.createElement(Lf,{className:"FIE_watermark-selected-item",onClick:t,key:l,"aria-selected":l===a},c.createElement("img",{src:l,alt:l,crossOrigin:"Anonymous",draggable:!1}))}))},Df=(zs.defaultProps={style:void 0},function(e){var t=e.watermark,n=e.saveWatermark,e=e.t,i=b.exports.useState(null),i=T(i,2),o=i[0],a=i[1],i=t.padding;return c.createElement(c.Fragment,null,c.createElement(Pe,{className:"FIE_watermark-padding-triggerer",title:e("padding"),onClick:function(s){a(s.currentTarget)}},c.createElement(Qc,{size:18})),c.createElement(Yt,{className:"FIE_watermark-padding-popup",anchorEl:o,open:!!o,onClose:function(){a(null)},position:"top"},c.createElement(_s,null,c.createElement(Ne,null,c.createElement(H,null,e("padding")),c.createElement(te,{annotation:"px",onChange:function(s){n({padding:ee(s,0,100)})},value:i})))))});function ko(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function me(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ko(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ko(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var q,Ae,It=.33,Ge="watermark",Mf=function(){function r(f){var P=f.width/f.height,j={},x=(v<w?(x=w*It/f.height,j.height=f.height*x,j.width=j.height*P):(x=v*It/f.width,j.width=f.width*x,j.height=j.width/P),me(me(me(me({},i.annotationsCommon),i[E.IMAGE]),j),{},{padding:1,image:f,x:g+v/2-j.width/2,y:m+w/2-j.height/2,id:Ge,name:E.IMAGE,replaceCurrent:!0}));s({type:Re,payload:x})}function t(f){s({type:Re,payload:me(me({},typeof f=="function"?f(y):f),{},{id:Ge})})}function n(){return c.createElement(Df,{watermark:y,saveWatermark:t,t:l})}var d=D(),e=d.annotations,o=d.shownImageDimensions,a=d.selectionsIds,i=d.config,s=d.dispatch,l=d.t,d=d.adjustments.crop,d=d===void 0?{}:d,u=Vn(),I=b.exports.useState(!1),I=T(I,2),p=I[0],S=I[1],O=b.exports.useRef(),y=b.exports.useMemo(function(){return e[Ge]},[e[Ge]]),v=d.width||o.width,w=d.height||o.height,g=d.x||0,m=d.y||0,I=[!i.useCloudimage&&{key:"upload-watermark",label:l("uploadWatermark"),icon:el,onClick:function(){O.current&&O.current.click()}},{key:"add-text-watermark",label:l("addWatermarkAsText"),icon:tl,onClick:function(){var f={height:w*It,width:v*It},f=me(me(me(me({},i.annotationsCommon),i[E.TEXT]),f),{},{padding:1,x:g+v/2-f.width/2,y:m+w/2-f.height/2,fill:"#000000",id:Ge,name:E.TEXT,replaceCurrent:!0});s({type:Re,payload:f})}}];return b.exports.useEffect(function(){y&&(s({type:tr}),s({type:rt,payload:{annotationId:"watermark"}}))},[y]),b.exports.useEffect(function(){!y||a.length!==0&&a[0].id===Ge||s({type:rt,payload:{annotationId:"watermark"}})},[a]),c.createElement("div",{className:"FIE_watermark-tool-wrapper"},(y==null?void 0:y.name)===E.TEXT&&c.createElement(Ao,{className:"FIE_watermark-options-wrapper"},c.createElement(Pn,{text:y,saveText:t,t:l},n())),(y==null?void 0:y.name)===E.IMAGE&&c.createElement(Ao,{className:"FIE_watermark-options-wrapper"},c.createElement(Jn,{image:y,saveImage:t,t:l},n())),c.createElement(Ff,{className:"FIE_watermark-add-wrapper",noWrap:y!=null&&y.name},c.createElement(er,{className:"FIE_watermark-add",color:"secondary",label:l("addWatermark"),title:l("addWatermarkTitle"),menuPosition:"top",menuItems:I,menuFromBtn:!0}),c.createElement(zs,{selectWatermark:r,style:u&&y!=null&&y.name?{width:"55%"}:void 0}),c.createElement(ks,{onChange:p?void 0:function(f){var P,j;f.target.files&&(S(!0),(P=f.target.files[0]).type.startsWith("image/")&&((j=new Image).onload=function(){r(j),URL.revokeObjectURL(P),S(!1)},j.onerror=function(){var x;x=l("uploadImageError"),s({type:Me,payload:{feedback:{message:x,status:tt.WARNING}}}),S(!1)},j.src=URL.createObjectURL(P))),f.target.value=""},disabled:p,ref:O})))},ct=(h(q={},E.CROP,{id:E.CROP,Item:Es}),h(q,E.ROTATE,{id:E.ROTATE,Item:Ts,ItemOptions:Ep}),h(q,E.FLIP_X,{id:E.FLIP_X,Item:ws}),h(q,E.FLIP_Y,{id:E.FLIP_Y,Item:Ss}),h(q,E.BRIGHTNESS,{id:E.BRIGHTNESS,Item:ds,ItemOptions:dp}),h(q,E.CONTRAST,{id:E.CONTRAST,Item:Is,ItemOptions:Sp}),h(q,E.HSV,{id:E.HSV,Item:js,ItemOptions:Tp,hideFn:function(r){return r.useCloudimage}}),h(q,E.BLUR,{id:E.BLUR,Item:Ps,ItemOptions:jp}),h(q,E.WARMTH,{id:E.WARMTH,Item:xs,ItemOptions:xp,hideFn:function(r){return r.useCloudimage}}),h(q,E.FILTERS,{id:E.FILTERS,Item:Bp}),h(q,E.WATERMARK,{id:E.WATERMARK,Item:Mf}),h(q,E.TEXT,{id:E.TEXT,Item:Cs,ItemOptions:ff}),h(q,E.IMAGE,{id:E.IMAGE,Item:As,ItemOptions:hf}),h(q,E.RECT,{id:E.RECT,Item:Rs,ItemOptions:vf}),h(q,E.POLYGON,{id:E.POLYGON,Item:$s,ItemOptions:xf}),h(q,E.ELLIPSE,{id:E.ELLIPSE,Item:Fs,ItemOptions:Ef}),h(q,E.PEN,{id:E.PEN,Item:Ls,ItemOptions:wf}),h(q,E.LINE,{id:E.LINE,Item:Ds,ItemOptions:Sf}),h(q,E.ARROW,{id:E.ARROW,Item:Ms,ItemOptions:Tf}),h(q,E.RESIZE,{id:E.RESIZE,Item:Qn}),q),$t=(h(Ae={},G.ADJUST,[E.CROP,E.ROTATE,E.FLIP_X,E.FLIP_Y]),h(Ae,G.FINETUNE,[E.BRIGHTNESS,E.CONTRAST,E.HSV,E.BLUR,E.WARMTH]),h(Ae,G.FILTERS,[E.FILTERS]),h(Ae,G.WATERMARK,[E.WATERMARK]),h(Ae,G.ANNOTATE,[E.TEXT,E.IMAGE,E.RECT,E.ELLIPSE,E.POLYGON,E.PEN,E.LINE,E.ARROW]),h(Ae,G.RESIZE,[E.RESIZE]),Ae);function Ro(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Fo(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ro(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ro(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Ws="SELECT_TAB",$f=function(r,t){return t.tabId===r.tabId?r:Fo(Fo({},r),{},{tabId:t.tabId,toolId:$t[t.tabId][0],selectionsIds:[],pointerCssIcon:t.tabId===G.ANNOTATE?Ee.DRAW:Ee.DEFAULT})};function Lo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function jt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Lo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Lo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Xs="SET_FINETUNE",Bf=function(r,t){return jt(jt({},r),{},{isDesignState:!t.dismissHistory,finetunes:!t.finetune||r.finetunes.includes(t.finetune)?r.finetunes:[].concat(oe(r.finetunes),[t.finetune]),finetunesProps:jt(jt({},r.finetunesProps),t.finetuneProps)})},zf=["dismissHistory","replaceCurrent"];function Do(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function He(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Do(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Do(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Re="SET_ANNOTATION",Wf=function(r){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},t=o.dismissHistory,n=o.replaceCurrent,e=Z(o,zf),o=(o=e.id)!=null?o:Ut(e.name),a=r.annotations[o];return a&&!Object.keys(e).some(function(i){return(e[i]||e[i]===0)&&e[i]!==a[i]})?r:He(He({},r),{},{isDesignState:!(t!==void 0&&t),annotations:He(He({},r.annotations),{},h({},o,He(He({},n!==void 0&&n?{}:a),e)))})};function Mo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function $o(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Mo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Mo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var pt="CHANGE_POINTER_ICON",Xf=function(r,t){return r.pointerCssIcon===t.pointerCssIcon?r:$o($o({},r),{},{pointerCssIcon:t.pointerCssIcon})};function Bo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function zo(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Bo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Bo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var rt="SELECT_ANNOTATION",Gf=function(r,t){return r.selectionsIds.length===1&&r.selectionsIds[0]===t.annotationId?r:(t.multiple?(n=r.selectionsIds.filter(function(e){return e!==t.annotationId})).length===r.selectionsIds.length&&n.push(t.annotationId):n=[t.annotationId],zo(zo({},r),{},{selectionsIds:n}));var n};function Wo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Xo(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Wo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var tr="CLEAR_ANNOTATIONS_SELECTIONS",Hf=function(r){return r.selectionsIds.length===0?r:Xo(Xo({},r),{},{selectionsIds:[]})};function Go(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ho(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Go(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Go(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var xn="TOGGLE_ORIGINAL_IMAGE_DISPLAY",Yf=function(r,t){return Ho(Ho({},r),{},{isShowOriginalImage:t.isShow})};function Yo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ko(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Yo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Yo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Ht="SELECT_TOOL",Kf=function(r,t){return r.toolId===t.toolId?r:Ko(Ko({},r),{},{toolId:t.toolId,selectionsIds:t.keepSelections?r.selectionsIds:[]})};function Uo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Pt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Uo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Uo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var nr="TOGGLE_FLIP",Uf=function(r,t){var n="isFlipped".concat(t.direction===Mn.X?"X":"Y");return Pt(Pt({},r),{},{isDesignState:!t.dismissHistory,adjustments:Pt(Pt({},r.adjustments),{},h({},n,!r.adjustments[n]))})};function Vo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ye(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Vo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var rr="SET_CROP",Vf=function(r,t){var n=(n=r.adjustments.crop)!=null?n:{},e={x:(e=Y(t.x))!=null?e:n.x,y:(e=Y(t.y))!=null?e:n.y,ratio:typeof t.ratio=="string"?t.ratio:(e=Y(t.ratio))!=null?e:n.ratio,width:(e=Y(t.width))!=null?e:n.width,height:(e=Y(t.height))!=null?e:n.height,ratioTitleKey:(e=t.ratioTitleKey)!=null?e:n.ratioTitleKey,ratioGroupKey:t.ratioGroupKey,ratioFolderKey:t.ratioFolderKey};return n.x!==e.x||n.y!==e.y||n.width!==e.width&&(e.width!==Y(r.shownImageDimensions.width)||n.width)||n.height!==e.height&&(e.height!==Y(r.shownImageDimensions.height)||n.height)||n.ratio!==e.ratio||n.ratioTitleKey!==e.ratioTitleKey||n.ratioGroupKey!==e.ratioGroupKey||n.ratioFolderKey!==e.ratioFolderKey?Ye(Ye({},r),{},{isDesignState:!t.dismissHistory,adjustments:Ye(Ye({},r.adjustments),{},{crop:Ye(Ye({},n),e)})}):r};function qo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function xt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?qo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):qo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Gs="CHANGE_ROTATION",qf=function(r,t){return r.adjustments.rotation===t.rotation?r:xt(xt({},r),{},{isDesignState:!t.dismissHistory,adjustments:xt(xt({},r.adjustments),{},{rotation:t.rotation})})};function Zo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Jo(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Zo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Zo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Zf=function(r,t,n,e){if(r.factor===dt)return{x:0,y:0,factor:dt};var o=r.factor>t.factor,i=(r.x-t.x||0)/t.factor,a=(r.y-t.y||0)/t.factor,i={x:r.x-i*r.factor,y:r.y-a*r.factor};return o&&t.factor===1||(i.x=Math.min(0,Math.max(i.x,n*(1-t.factor))),i.y=Math.min(0,Math.max(i.y,e*(1-t.factor)))),r.factor<1&&(a=n-n*r.factor,o=e-e*r.factor,i.x+=a/2,i.y+=o/2),Jo(Jo({},i),{},{factor:r.factor})},Jf=["preparedDimensions"];function Qo(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ct(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Qo(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Qo(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var or="ZOOM_CANVAS",Qf=.05,eg=50,tg=function(r,t){var n,e=ee(parseFloat(t.factor).toFixed(2),Qf,eg);return(n=t.preparedDimensions?(t.preparedDimensions,Z(t,Jf)):(t={x:t.x==="center"||!t.x&&t.x!==0?r.canvasWidth/2:(n=t.x)!=null?n:r.zoom.x,y:t.y==="center"||!t.y&&t.y!==0?r.canvasHeight/2:(n=t.y)!=null?n:r.zoom.y},Zf(Ct(Ct({},t),{},{factor:e}),r.zoom,r.canvasWidth,r.canvasHeight))).factor===r.zoom.factor&&n.x===r.zoom.x&&n.y===r.zoom.y?r:Ct(Ct({},r),{},{zoom:n})};function ea(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ta(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ea(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ea(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Hs="SET_CANVAS_SIZE",ng=function(r,t){if(r.canvasWidth===t.canvasWidth&&r.canvasHeight===t.canvasHeight)return r;var n=r.initialCanvasWidth,n=n===void 0?t.canvasWidth:n,e=r.initialCanvasHeight,e=e===void 0?t.canvasHeight:e,a=vn(r.initialCanvasWidth,r.initialCanvasHeight,r.originalImage.width,r.originalImage.height),o=a*r.originalImage.width,a=a*r.originalImage.height,i=1;return n===t.canvasWidth&&e===t.canvasHeight||(o=t.canvasWidth/o,a=t.canvasHeight/a,i=Math.min(o,a)),ta(ta({},r),{},{initialCanvasWidth:n,initialCanvasHeight:e,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,canvasScale:i})};function na(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ra(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?na(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):na(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Ys="SET_ORIGINAL_IMAGE",rg=function(r,t){return ra(ra({},r),{},{feedback:{},originalImage:t.originalImage,imgSrc:t.originalImage.src})};function oa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function _t(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?oa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Ks="SET_SHOWN_IMAGE_DIMENSIONS",og=function(r,t){return _t(_t({},r),{},{shownImageDimensions:_t(_t({},r.shownImageDimensions),t.shownImageDimensions),designLayer:t.designLayer||r.designLayer,previewGroup:t.previewGroup||r.previewGroup})};function aa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ia(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?aa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Us="REMOVE_ANNOTATIONS",ag=function(r,t){var n=r.annotations,e=r.selectionsIds;return t.annotationsIds.forEach(function(o){var a;e=e.filter(function(i){return i!==o}),r.designLayer&&n[o]&&((a=r.designLayer.findOne("#".concat(o)))&&a.destroy(),delete n[o])}),ia(ia({},r),{},{isDesignState:t.isDesignState||!0,annotations:n,selectionsIds:[]})};function sa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ke(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?sa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):sa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Vs="DUPLICATE_ANNOTATIONS",ig=function(r,t){var n=r.annotations,e={};return t.annotationsIds.forEach(function(i){var a,i=n[i];i&&(a=Ut(i.name),e[a]=Ke(Ke({},i),{},{id:a,x:i.x+20,y:i.y+20}))}),Ke(Ke({},r),{},{isDesignState:!t.dismissHistory,annotations:Ke(Ke({},n),e)})};function ca(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function la(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ca(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ca(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var ar="ENABLE_TEXT_CONTENT_EDIT",sg=function(r,t){return la(la({},r),{},{textIdOfEditableContent:t.textIdOfEditableContent||null})};function ua(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function lt(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ua(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ua(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Qe="SET_RESIZE",cg=function(r,t){return lt(lt({},r),{},{isDesignState:!t.dismissHistory,resize:lt(lt(lt({},r.resize),t),{},{manualChangeDisabled:(r=t.manualChangeDisabled)!=null&&r})})};function da(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function pa(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?da(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):da(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var qs="SET_SAVED",lg=function(r){return r.haveNotSavedChanges?pa(pa({},r),{},{haveNotSavedChanges:!1}):r};function fa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ug(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?fa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var ht=function(r){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],e=ug({},r);return Object.keys(t).forEach(function(o){var a=t[o];a!==void 0&&(zt(a)!=="object"||a===null||Array.isArray(a)||!r[o]||zt(r[o])!=="object"?e[o]=n&&Array.isArray(e[o])&&Array.isArray(a)?[].concat(oe(e[o]),oe(a)):a:e[o]=ht(r[o],a))}),e},Bt="UPDATE_STATE",dg=function(r,t){return t=t&&typeof t=="function"?t(r):t,t?ht(r,t):r};function ga(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ma(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ga(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ga(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var z,Zs="SET_LATEST_COLOR",pg=function(r,t){return r.latestColor===t.latestColor?r:ma(ma({},r),{},{latestColor:t.latestColor})},ha=(h(z={},Ys,rg),h(z,Me,Ed),h(z,Xn,wd),h(z,Bn,Bl),h(z,pt,Xf),h(z,rt,Gf),h(z,tr,Hf),h(z,xn,Yf),h(z,Ws,$f),h(z,Ht,Kf),h(z,or,tg),h(z,Hs,ng),h(z,Ks,og),h(z,ar,sg),h(z,Zs,pg),h(z,Oi,$l),h(z,Xs,Bf),h(z,Re,Wf),h(z,rr,Vf),h(z,Gs,qf),h(z,nr,Uf),h(z,Qe,cg),h(z,Us,ag),h(z,Vs,ig),h(z,Kn,Os),h(z,zn,ls),h(z,Wn,us),h(z,qs,lg),h(z,Bt,dg),z),fg=.05,gg=12,mg=function(){return 2*(window?Math.min(window.innerHeight,window.innerWidth)*fg:gg)},Oa=function(e,a){var n=e.x,e=e.y,a=a*Math.PI/180,o=Math.cos(a),a=Math.sin(a);return{x:n*o-e*a,y:e*o+n*a}},hg=function(r,t,n){return!r||!t||!n&&n!==0?{x:0,y:0,rotation:n}:(r={x:-r/2,y:-t/2},t=Oa(r,0),r=Oa(r,n),{x:r.x-t.x,y:r.y-t.y,rotation:n})},$e={definitions:{id:le.string.isRequired,name:le.string.isRequired,rotation:le.number,scaleX:le.number,scaleY:le.number,stroke:le.string,strokeWidth:le.number,shadowOffsetX:le.number,shadowOffsetY:le.number,shadowBlur:le.number,shadowColor:le.string,shadowOpacity:le.number,opacity:le.number},defaults:{rotation:0,scaleX:1,scaleY:1,stroke:void 0,strokeWidth:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,shadowBlur:void 0,shadowColor:void 0,shadowOpacity:void 0,opacity:1}},Og=["id","name","fill","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity","cornerRadius"];function ya(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ba(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ya(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ya(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Js=function(P){var t=P.id,n=P.name,e=P.fill,o=P.x,a=P.y,i=P.width,s=P.height,l=P.scaleX,d=P.scaleY,u=P.rotation,p=P.annotationEvents,S=P.stroke,O=P.strokeWidth,y=P.shadowOffsetX,v=P.shadowOffsetY,w=P.shadowBlur,g=P.shadowColor,m=P.shadowOpacity,I=P.opacity,f=P.cornerRadius,P=Z(P,Og);return c.createElement(li,ae({id:t,name:n,rotation:u,scaleX:l,scaleY:d,stroke:S,strokeWidth:O,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:g,shadowOpacity:m,fill:e,x:o,y:a,width:i,height:s,opacity:I,cornerRadius:f},p,P))},yg=(Js.defaultProps=ba(ba({},$e.defaults),{},{fill:"#000",cornerRadius:0,width:0,height:0}),["id","name","fill","x","y","radiusX","radiusY","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"]);function va(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ea(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?va(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):va(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Qs=function(f){var t=f.id,n=f.name,e=f.fill,o=f.x,a=f.y,i=f.radiusX,s=f.radiusY,l=f.scaleX,d=f.scaleY,u=f.rotation,p=f.annotationEvents,S=f.stroke,O=f.strokeWidth,y=f.shadowOffsetX,v=f.shadowOffsetY,w=f.shadowBlur,g=f.shadowColor,m=f.shadowOpacity,I=f.opacity,f=Z(f,yg);return c.createElement(ui,ae({id:t,name:n,rotation:u,scaleX:l,scaleY:d,stroke:S,strokeWidth:O,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:g,shadowOpacity:m,fill:e,x:o,y:a,radiusX:i,radiusY:s,offsetX:-i,offsetY:-s,opacity:I},p,f))},bg=(Qs.defaultProps=Ea(Ea({},$e.defaults),{},{fill:"#000",radiusX:0,radiusY:0}),["id","name","fill","x","y","radius","scaleX","scaleY","rotation","sides","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"]);function wa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Sa(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?wa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var ec=function(f){var t=f.id,n=f.name,e=f.fill,o=f.x,a=f.y,i=f.radius,s=f.scaleX,l=f.scaleY,d=f.rotation,u=f.sides,p=f.annotationEvents,S=f.stroke,O=f.strokeWidth,y=f.shadowOffsetX,v=f.shadowOffsetY,w=f.shadowBlur,g=f.shadowColor,m=f.shadowOpacity,I=f.opacity,f=Z(f,bg);return c.createElement(nl,ae({id:t,name:n,rotation:d,scaleX:s,scaleY:l,stroke:S,strokeWidth:O,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:g,shadowOpacity:m,fill:e,x:o,y:a,radius:i,offsetX:-i,offsetY:-i,sides:u,opacity:I},p,f))},vg=(ec.defaultProps=Sa(Sa({},$e.defaults),{},{fill:"#000",sides:3}),["id","name","text","fontFamily","fontSize","fontStyle","fill","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity","letterSpacing","lineHeight","align"]);function Ta(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ia(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ta(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ta(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var tc=function(C){var t=C.id,n=C.name,e=C.text,o=C.fontFamily,a=C.fontSize,i=C.fontStyle,s=C.fill,l=C.x,d=C.y,u=C.width,p=C.height,S=C.scaleX,O=C.scaleY,y=C.rotation,v=C.annotationEvents,w=C.stroke,g=C.strokeWidth,m=C.shadowOffsetX,I=C.shadowOffsetY,f=C.shadowBlur,P=C.shadowColor,j=C.shadowOpacity,x=C.opacity,B=C.letterSpacing,N=C.lineHeight,F=C.align,C=Z(C,vg);return c.createElement(rl,ae({id:t,name:n,rotation:y,scaleX:S,scaleY:O,stroke:w,strokeWidth:g,shadowOffsetX:m,shadowOffsetY:I,shadowBlur:f,shadowColor:P,shadowOpacity:j,opacity:x,fill:s,text:e,fontFamily:o,fontStyle:i,fontSize:a,letterSpacing:B,lineHeight:N,align:F,x:l,y:d,width:u,height:p},v,C))},Eg=(tc.defaultProps=Ia(Ia({},$e.defaults),{},{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur imperdiet tortor quis odio facilisis, id aliquet nulla facilisis. Etiam tincidunt tempor odio nec placerat.",fontFamily:"Arial",fontSize:14,fill:"#000",width:0,height:0,letterSpacing:void 0,lineHeight:void 0,align:"left"}),function(r){return r=r.split("/"),r[r.length-1].split("?")[0]}),nc=function(r,t){return new Promise(function(n,e){var o=new Image;o.src=r,o.crossOrigin="Anonymous",o.name=t!=null?t:Eg(r),o.onload=function(){n(o)},o.onerror=function(){e(new Error("Error in loading the image with the provided url: ".concat(r)))}})},wg=["id","name","image","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"];function ja(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Pa(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ja(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ja(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var rc=function(f){var t=f.id,n=f.name,e=f.image,o=f.x,a=f.y,i=f.width,s=f.height,l=f.scaleX,d=f.scaleY,u=f.rotation,p=f.annotationEvents,S=f.stroke,O=f.strokeWidth,y=f.shadowOffsetX,v=f.shadowOffsetY,w=f.shadowBlur,g=f.shadowColor,m=f.shadowOpacity,I=f.opacity,f=Z(f,wg),x=b.exports.useState(null),x=T(x,2),P=x[0],j=x[1],x=(b.exports.useEffect(function(){typeof e=="string"&&nc(e).then(j)},[e]),e instanceof HTMLImageElement);return x||P?c.createElement(Kt,ae({id:t,name:n,rotation:u,scaleX:l,scaleY:d,stroke:S,strokeWidth:O,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:g,shadowOpacity:m,image:x?e:P,x:o,y:a,width:i,height:s,opacity:I},f,p,f)):null},Sg=(rc.defaultProps=Pa(Pa({},$e.defaults),{},{width:0,height:0}),["id","name","scaleX","scaleY","rotation","annotationEvents","points","lineCap","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","tension","opacity"]);function xa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ca(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?xa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):xa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Cn=function(m){var t=m.id,n=m.name,e=m.scaleX,o=m.scaleY,a=m.rotation,i=m.annotationEvents,s=m.points,l=m.lineCap,d=m.stroke,u=m.strokeWidth,p=m.shadowOffsetX,S=m.shadowOffsetY,O=m.shadowBlur,y=m.shadowColor,v=m.shadowOpacity,w=m.tension,g=m.opacity,m=Z(m,Sg);return c.createElement(ol,ae({id:t,name:n,rotation:a,scaleX:e,scaleY:o,stroke:d,strokeWidth:u,shadowOffsetX:p,shadowOffsetY:S,shadowBlur:O,shadowColor:y,shadowOpacity:v,points:s,lineCap:l,tension:w,hitStrokeWidth:20,x:0,y:0,opacity:g},i,m))},Tg=(Cn.defaultProps=Ca(Ca({},$e.defaults),{},{stroke:"#000000",strokeWidth:1,lineCap:"butt",annotationEvents:{},tension:void 0}),["id","name","fill","pointerLength","pointerWidth","scaleX","scaleY","rotation","annotationEvents","points","lineCap","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"]);function _a(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Na(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?_a(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_a(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var ve,Aa=function(f){var t=f.id,n=f.name,e=f.fill,o=f.pointerLength,a=f.pointerWidth,i=f.scaleX,s=f.scaleY,l=f.rotation,d=f.annotationEvents,u=f.points,p=f.lineCap,S=f.stroke,O=f.strokeWidth,y=f.shadowOffsetX,v=f.shadowOffsetY,w=f.shadowBlur,g=f.shadowColor,m=f.shadowOpacity,I=f.opacity,f=Z(f,Tg);return c.createElement(al,ae({id:t,name:n,rotation:l,scaleX:i,scaleY:s,stroke:S,strokeWidth:O,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:g,shadowOpacity:m,fill:e,x:0,y:0,points:u,pointerLength:o,pointerWidth:a,lineCap:p,opacity:I},d,f))},Ig=(Aa.defaultProps=Na(Na({},$e.defaults),{},{stroke:"#000000",strokeWidth:6,fill:void 0,lineCap:"butt",pointerLength:void 0,pointerWidth:void 0}),h(ve={},E.RECT,Js),h(ve,E.ELLIPSE,Qs),h(ve,E.POLYGON,ec),h(ve,E.TEXT,tc),h(ve,E.IMAGE,rc),h(ve,E.LINE,Cn),h(ve,E.ARROW,Aa),h(ve,E.PEN,Cn),ve),jg=function(e){var t=e.annotation,n=e.annotationEvents,e=e.selectionsIds,o=Ig[t.name];return c.createElement(o,ae({key:t.id,annotationEvents:n,draggable:e.includes(t.id)},t))},Pg=b.exports.memo(jg),xg=function(){var r=D(),n=r.annotations,t=n===void 0?{}:n,n=r.selectionsIds,e=n===void 0?[]:n,o=Hd();return b.exports.useMemo(function(){return Object.values(t).map(function(a){return c.createElement(Pg,{key:a.id,annotation:a,annotationEvents:o,selectionsIds:e})})},[t,o,e])},Cg=function(r,t){return c.createElement(il,ae({ref:t},r))},_g=b.exports.forwardRef(Cg);function ka(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ln(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ka(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ka(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Ng=mg(),Ag=function(){var r=b.exports.useRef(),j=D(),t=j.initialCanvasWidth,n=j.initialCanvasHeight,$=j.canvasWidth,e=j.canvasHeight,o=j.dispatch,g=j.toolId,a=j.canvasScale,l=j.originalImage,i=l===void 0?{}:l,l=j.finetunes,s=l===void 0?[]:l,l=j.finetunesProps,l=l===void 0?{}:l,O=j.filter,d=O===void 0?null:O,O=j.adjustments,S=(O=O===void 0?{}:O).rotation,u=S===void 0?0:S,S=O.crop,p=S===void 0?{}:S,S=O.isFlippedX,O=O.isFlippedY,j=j.resize,y=b.exports.useRef(),v=b.exports.useRef(),w=g===E.CROP,g=b.exports.useMemo(function(){return d?[].concat(oe(s),[d]):s},[s,d]),m=b.exports.useMemo(function(){var J=i.width-Ng;return{width:J,height:J/(i.width/i.height)}},[i]),R=b.exports.useMemo(function(){return Ce(i.width,i.height,u)},[i,u]),I=b.exports.useMemo(function(){return vn(t,n,i.width,i.height)},[i,t,n]),f=b.exports.useMemo(function(){return{width:m.width*I,height:m.height*I}},[m,I]),P=j.width&&!w?j.width/((P=p.width)!=null?P:R.width):1,j=j.height&&!w?j.height/((j=p.height)!=null?j:R.height):1,x=$/(2*a)-f.width*P/2,B=e/(2*a)-f.height*j/2,N=$/(2*a)-f.width/2,F=e/(2*a)-f.height/2,C=b.exports.useMemo(function(){return{x:Math.round(x),y:Math.round(B),abstractX:Math.round(N),abstractY:Math.round(F),width:f.width,height:f.height,scaledBy:a}},[a,x,B,N,F,f]),A=b.exports.useCallback(function(){y.current?y.current.cache():setTimeout(A,0)},[]),R=Ce(C.width,C.height,u),$=w?1:vn(C.width,C.height,R.width,R.height);return b.exports.useEffect(function(){return i&&A(),function(){var J;(J=y.current)!=null&&J.clearCache()}},[i]),b.exports.useEffect(function(){C&&o({type:Ks,payload:{shownImageDimensions:C,designLayer:r.current,previewGroup:v.current}})},[C]),!x||!B||!C?null:(e=hg(p.x,p.y,u),R=x+(!w&&p.width?(S?-1:1)*(C.width/2-p.x-p.width/2+e.x)*P:0),e=B+(!w&&p.height?(O?-1:1)*(C.height/2-p.y-p.height/2+e.y)*j:0),R=w?N:R,e=w?F:e,c.createElement(Fn,{id:Ll,ref:r,xPadding:R,yPadding:e,offsetX:f.width/2,offsetY:f.height/2,x:f.width*P/2+R,y:f.height*j/2+e,scaleX:(S?-1:1)*(w?1:P)*$,scaleY:(O?-1:1)*(w?1:j)*$,rotation:w?0:u,clipFunc:function(J){var V=w&&!((V=r.current)!=null&&(V=V.attrs)!=null&&V.isSaving),Se=V?ln(ln({},C),{},{x:0,y:0}):{width:p.width||C.width,height:p.height||C.height,x:p.x||0,y:p.y||0};Ml(J,ln({ratio:p.ratio},Se),V),r.current&&r.current.setAttrs({clipX:Se.x,clipY:Se.y,clipWidth:Se.width,clipHeight:Se.height})}},c.createElement(Kt,ae({id:fi,image:i,width:f.width,height:f.height,offsetX:f.width/2,offsetY:f.height/2,x:f.width/2,y:f.height/2,listening:!1,filters:g,ref:y},l)),c.createElement(xg,null),c.createElement(_g,{ref:v})))},kg=function(r,t){return Y(r)===Y(t)};function Ra(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Rg(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ra(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ra(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Fg=function(r,e){var n=e.width-(2*r.radiusX||r.width),e=e.height-(2*r.radiusY||r.height);return{x:Y(Math.min(Math.max(r.x,0),n)),y:Y(Math.min(Math.max(r.y,0),e))}},un=function(r,t,n,e){var o,a,i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{},s={x:Y(n.abstractX*n.scaledBy),y:Y(n.abstractY*n.scaledBy),width:Y(n.width*n.scaledBy),height:Y(n.height*n.scaledBy)},l=Rg({},t);return t.x<s.x&&(l.x=s.x,l.width=r.x-s.x+r.width),t.y<s.y&&(l.y=s.y,l.height=r.y-s.y+r.height),l.x+l.width>s.x+s.width&&(l.width=s.x+s.width-l.x),l.y+l.height>s.y+s.height&&(l.height=s.y+s.height-l.y),e&&!kg(l.width/l.height,e)&&(o=l.height*e,a=l.width/e,Y(l.y+a)<=s.y+s.height?l.height=a:l.width=o),(i.minWidth&&l.width<=i.minWidth||i.maxWidth&&l.width>=i.maxWidth)&&(l.width=ee(l.width,i.minWidth,i.maxWidth),l.x=r.x,l.y=r.y,e&&(l.height=l.width/e)),(i.minHeight&&t.height<=i.minHeight||i.maxHeight&&t.height>=i.maxHeight)&&(l.height=ee(l.height,i.minHeight,i.maxHeight),l.x=r.x,l.y=r.y,e&&(l.width=l.height*e)),l};function Fa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function de(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Fa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Fa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Lg=function(){function r(){return m===mi?i.width/i.height:m}function t(V,A){var R=V.width,$=V.height,J=V.x,V=V.y,J={x:d?s.width-J-R:J,y:u?s.height-V-$:V,width:R,height:$},V=l.width>=p.width&&l.height>=p.height;p.width&&p.height&&(R<p.width||$<p.height)&&V&&e({type:Me,payload:{feedback:{message:S("cropSizeLowerThanResizedWarning"),status:tt.WARNING}}}),e({type:rr,payload:de(de(de({},l),J),{},{dismissHistory:A})})}function n($,A){y.current&&O.current&&y.current.nodes([O.current]);var R=w.current,$={width:$,height:A,x:($=l.x)!=null?$:0,y:(A=l.y)!=null?A:0};t(un($,$,de(de({},R),{},{abstractX:0,abstractY:0}),!(I||f)&&r(),g),!0)}var N=D(),e=N.dispatch,o=N.theme,a=N.designLayer,i=N.originalImage,s=N.shownImageDimensions,F=N.adjustments,j=(F=F===void 0?{}:F).crop,l=j===void 0?{}:j,d=F.isFlippedX,u=F.isFlippedY,j=N.resize,p=j===void 0?{}:j,F=N.config,S=N.t,O=b.exports.useRef(),y=b.exports.useRef(),v=b.exports.useRef(),w=b.exports.useRef(),g=F[E.CROP],m=l.ratio||g.ratio,I=m===hi,f=m===De;if(b.exports.useEffect(function(){return a&&y.current&&O.current&&(v.current&&v.current.cache(),y.current.nodes([O.current])),function(){v.current&&v.current.clearCache()}},[a,i,s]),b.exports.useEffect(function(){var C,A;w.current&&(A=w.current,n((C=l.width)!=null?C:A.width,(C=l.height)!=null?C:A.height))},[m]),b.exports.useEffect(function(){y.current&&O.current&&w.current&&l.width&&l.height&&n(l.width,l.height)},[g,s.width,s.height]),b.exports.useEffect(function(){s&&(w.current=s)},[s]),!a)return null;function P(C){var A=1<arguments.length&&arguments[1]!==void 0&&arguments[1];C.target&&t({width:C.target.width()*C.target.scaleX(),height:C.target.height()*C.target.scaleY(),x:C.target.x(),y:C.target.y()},A)}var j=I||f?void 0:["top-left","bottom-left","top-right","bottom-right"],N=l.width||l.height?l:(N=s.scaledBy<1?s.scaledBy:1,F=de(de({},s),{},{width:s.width/N,height:s.height/N}),un(F,de(de({},F),{},{x:0,y:0}),de(de({},F),{},{abstractX:0,abstractY:0}),!(I||f)&&r(),g)),F=N.x,F=F===void 0?0:F,x=N.y,x=x===void 0?0:x,B=N.width,N=N.height,F={x:d?s.width-F-B:F,y:u?s.height-x-N:x,ref:O,fill:"#FFFFFF",scaleX:1,scaleY:1,globalCompositeOperation:"destination-out",onDragEnd:P,onDragMove:function(C){C=C.target,C.setAttrs(Fg(C.attrs,w.current))},onTransformEnd:P,draggable:!0};return c.createElement(c.Fragment,null,c.createElement(Kt,{image:i,x:d?s.width:0,y:u?s.height:0,width:s.width,height:s.height,filters:[U.Filters.Blur,U.Filters.Brighten],blurRadius:10,brightness:-.3,scaleX:d?-1:1,scaleY:u?-1:1,ref:v}),f?c.createElement(ui,ae({},F,{radiusX:B/2,radiusY:N/2,offset:{x:-B/2,y:-N/2}})):c.createElement(li,ae({},F,{width:B,height:N})),c.createElement(di,{centeredScaling:!1,flipEnabled:!1,rotateEnabled:!1,nodes:O.current?[O.current]:[],anchorSize:14,anchorCornerRadius:7,enabledAnchors:j,ignoreStroke:!1,anchorStroke:o.palette["accent-primary"],anchorFill:o.palette["access-primary"],anchorStrokeWidth:2,borderStroke:o.palette["accent-primary"],borderStrokeWidth:2,borderDash:[4],keepRatio:!I||!f,ref:y,boundBoxFunc:function(C,A){return un(C,A,w.current,!(I||f)&&r(),g)}}))},Dg=function(){function r(){s.length===1&&s[0].name()===E.TEXT&&a({type:ar,payload:{textIdOfEditableContent:s[0].id()}})}var t,i=D(),e=i.selectionsIds,n=e===void 0?[]:e,e=i.theme,o=i.designLayer,a=i.dispatch,i=i.config.useCloudimage,s=b.exports.useMemo(function(){return o!=null&&o.findOne?n.map(function(l){return o.findOne("#".concat(l))}).filter(Boolean):[]},[n]);return c.createElement(di,{id:gi,centeredScaling:!1,rotationSnaps:[0,45,90,135,180,225,270,315],nodes:s,rotateAnchorOffset:30,anchorSize:14,anchorCornerRadius:7,padding:s.length===1&&(t=s[0].attrs.padding)!=null?t:1,ignoreStroke:!1,anchorStroke:e.palette["accent-primary"],anchorFill:e.palette["access-primary"],anchorStrokeWidth:2,borderStroke:e.palette["accent-primary"],borderStrokeWidth:2,borderDash:[4],rotateEnabled:!i,onMouseOver:function(){a({type:pt,payload:{pointerCssIcon:Ee.MOVE}})},onMouseLeave:function(){a({type:pt,payload:{pointerCssIcon:Ee.DRAW}})},onDblClick:r,onDblTap:r,flipEnabled:!0,shouldOverdrawWholeArea:!0})},Mg=function(){var t=D(),r=t.toolId,t=t.shownImageDimensions;return c.createElement(Fn,{id:pi,x:t.abstractX||0,y:t.abstractY||0},c.createElement(Dg,null),r===E.CROP&&c.createElement(Lg,null))},$g=k.div.withConfig({componentId:"sc-1tst9ex-0"})(function(e){var t=e.theme,n=e.top,e=e.left;return`
  position: absolute;
  z-index: 1;
  background: `.concat(t.palette["bg-secondary"],`;
  border-radius: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0px 1px 2px `).concat(t.palette["light-shadow"],`;
  top: `).concat((n||0)+8,`px;
  left: `).concat((e||0)+4,`px;
  transform: translateX(-50%);
  height: 32px;
`)}),Bg=function(){var s=D(),n=s.selectionsIds,r=n===void 0?[]:n,t=s.designLayer,n=s.annotations,e=s.dispatch,s=b.exports.useState({left:0,top:0}),s=T(s,2),o=s[0],a=s[1],i=b.exports.useMemo(function(){var d;return t==null||(d=t.getStage())==null?void 0:d.findOne("#".concat(gi))},[t]),s=r.length,l=Vt(function(){i&&a({left:(i.x()+i.width()/2)*i.scaleX(),top:(i.y()+i.height())*i.scaleY()})},0);return b.exports.useEffect(function(){l()},[r,i,n]),s!==0&&i?c.createElement($g,{className:"FIE_annotation-controls-overlay",left:o.left,top:o.top},r[0]!==xe&&c.createElement(Le,{color:"link",size:"sm",onClick:function(){e({type:Vs,payload:{annotationsIds:r}})}},c.createElement(sl,null)),c.createElement(Le,{color:"link",size:"sm",onClick:function(){e({type:Us,payload:{annotationsIds:r}})}},c.createElement(cl,null))):null};function La(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Da(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?La(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):La(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}function zg(r,t){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}function Ma(r,t){return{x:(r.x+t.x)/2,y:(r.y+t.y)/2}}var Ve=null,ut=0,Wg=function(r,t){r.evt.preventDefault();var n,e,o,a,i,s,l=r.evt.touches[0],d=r.evt.touches[1];l&&d&&((r=r.currentTarget).isDragging()&&r.stopDrag(),l={x:l.clientX,y:l.clientY},d={x:d.clientX,y:d.clientY},Ve?(n=Ma(l,d),e=zg(l,d),ut=ut||e,s=(n.x-r.x())/r.scaleX(),o=(n.y-r.y())/r.scaleX(),r=r.scaleX()*(e/ut),a=n.x-Ve.x,i=n.y-Ve.y,s={x:n.x-s*r+a,y:n.y-o*r+i},ut=e,Ve=n,t(Da(Da({},s),{},{factor:r,preparedDimensions:!0}))):Ve=Ma(l,d))},Xg=function(r){ut=0,Ve=null,typeof r=="function"&&r()},Gg=k.div.withConfig({componentId:"sc-3ln9py-0"})(["width:100%;position:relative;height:calc(100% - 94px - 12px);background:",";overflow:hidden;min-height:250px;flex-grow:1;"],function(r){return r.theme.palette["bg-primary"]}),Hg=k.img.withConfig({componentId:"sc-3ln9py-1"})(["max-width:98%;max-height:98%;box-shadow:0 0 0 5px rgba(0,0,0,0.1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;"]),Yg=k(ai).withConfig({componentId:"sc-3ln9py-2"})(["outline:none;"]);function $a(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Ba(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?$a(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$a(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Kg=.006,Ug=function(i){function t(x){l({type:or,payload:x})}function n(){return I(u!==G.ANNOTATE||u===G.WATERMARK)}function e(x){(x.code==="Space"||x.key==="Control")&&!x.repeat&&v.factor>w&&g&&(x.preventDefault(),I(!0),l({type:pt,payload:{pointerCssIcon:Ee.DRAG}}))}function o(x){x.code==="Space"&&(x.preventDefault(),n())}function a(){s.current&&s.current.container().focus()}var i=i.children,s=(ll(!0),b.exports.useRef()),P=D(),l=P.dispatch,d=P.pointerCssIcon,u=P.tabId,f=P.toolId,p=P.canvasWidth,S=P.canvasHeight,O=P.canvasScale,j=P.selectionsIds,y=j===void 0?[]:j,j=P.zoom,v=j===void 0?{}:j,j=P.config.previewPixelRatio,w=(U.pixelRatio=j,dt),g=f!==E.CROP,P=b.exports.useState(u!==G.ANNOTATE&&u!==G.WATERMARK&&v.factor>w),j=T(P,2),m=j[0],I=j[1],f=b.exports.useMemo(function(){return{cursor:d===Ee.DEFAULT&&u===G.ANNOTATE?Ee.DRAW:d}},[u,d]),P=b.exports.useCallback(function(x){var B,N;x.evt.preventDefault(),(B=(N=x.currentTarget).container)!=null&&B.call(N).focus(),x.target instanceof U.Stage&&0<y.length&&l({type:tr})},[y]),j=(b.exports.useEffect(function(){l({type:pt,payload:{pointerCssIcon:Ee[m?"DRAG":"DEFAULT"]}})},[m]),b.exports.useEffect(function(){var x;return I(u!==G.ANNOTATE&&u!==G.WATERMARK&&v.factor>w),s.current&&((x=s.current.container()).addEventListener("mouseenter",a),x.addEventListener("keydown",e),x.addEventListener("keyup",o)),function(){x&&(x.removeEventListener("mouseenter",a),x.removeEventListener("keydown",e),x.removeEventListener("keyup",o))}},[u,v.factor,w]),O*(g&&v.factor||w));return c.createElement(Yg,{className:"FIE_canvas-node",tabIndex:-1,ref:s,width:p,height:S,scaleX:j,scaleY:j,x:g&&v.x||null,y:g&&v.y||null,zoomFactor:g&&v.factor||w,onWheel:g?function(N){N.evt.preventDefault();var B=(v.factor||w)+N.evt.deltaY*-Kg,N=N.currentTarget.getPointerPosition();t(Ba(Ba({},N),{},{factor:B}))}:void 0,onTap:P,onClick:P,onTouchMove:g?function(x){return Wg(x,t)}:void 0,onDragStart:function(x){1<((x=x.evt.touches)==null?void 0:x.length)&&I(!1)},onTouchEnd:g?function(){Xg(n)}:void 0,dragBoundFunc:function(x){return{x:Math.min(0,Math.max(x.x,p*(1-v.factor))),y:Math.min(0,Math.max(x.y,S*(1-v.factor)))}},draggable:g&&m,onDragEnd:function(x){x.currentTarget.draggable()&&x.target.nodeType.toLowerCase()==="stage"&&g&&m&&t({factor:v.factor,x:x.target.x(),y:x.target.y(),preparedDimensions:!0})},style:f},i)},Vg=b.exports.memo(Ug),qg=function(){var e=Un(),r=T(e,1)[0],t=D(),n=b.exports.useCallback(function(i){var a=i.width,i=i.height;t.dispatch({type:Hs,payload:{canvasWidth:a,canvasHeight:i}})},[]),e=b.exports.useCallback(function(o){r(o,n)},[]);return c.createElement(Gg,{className:"FIE_canvas-container",ref:e},!t.textIdOfEditableContent&&c.createElement(Bg,null),t.isShowOriginalImage&&c.createElement(Hg,{className:"FIE_original-image-compare",src:t.originalImage.src}),c.createElement(Vg,null,c.createElement(Nd,{overridingValue:t},c.createElement(Ag,null),c.createElement(Mg,null))))},Zg=k.div.withConfig({componentId:"sc-etsyb6-0"})(["display:inline-block;height:",";width:",";border-radius:1px;background:#dfe7ed;"],function(r){return r.height},function(r){return r.width}),oc=function(n){var t=n.height,n=n.width;return c.createElement(Zg,{height:t,width:n})},Jg=(oc.defaultProps={height:"11px",width:"1px"},k.div.withConfig({componentId:"sc-21g986-0"})(["padding:12px 12px 8px 12px;box-sizing:border-box;position:relative;width:100%;display:flex;align-items:center;justify-content:space-between;",";[data-phone='true'] &{padding:6px 6px 4px 6px;}"],function(r){return r.reverseDirection?"flex-direction: row-reverse":""})),ir=k(Le).withConfig({componentId:"sc-21g986-1"})(["margin:",";:first-of-type{margin:",";}width:23px;height:23px;padding:4px;"],function(r){return r=r.margin,r!=null?r:"0 4px"},function(r){return r=r.margin,r!=null?r:"0 4px 0 8px"}),_n=k(Le).withConfig({componentId:"sc-21g986-2"})(["width:20px;height:20px;margin:0 ",";padding:4px;"],function(r){return(r=r.horizontalMargin)!=null?r:"4px"}),za=k.div.withConfig({componentId:"sc-21g986-3"})(["display:flex;align-items:center;",";"],function(r){return r.reverseDirection?"flex-direction: row-reverse":""}),Qg=k(H).withConfig({componentId:"sc-21g986-4"})(["cursor:pointer;"]),em=k.span.withConfig({componentId:"sc-21g986-5"})(["font-size:11px;line-height:12px;"]),ac=k(Le).withConfig({componentId:"sc-21g986-6"})(["padding:0;z-index:111;"]),tm=(k(Fe).withConfig({componentId:"sc-21g986-7"})(["padding:4px 12px;"]),k(Ln).withConfig({componentId:"sc-21g986-8"})(["width:200px;"])),nm=k(ii).withConfig({componentId:"sc-21g986-9"})(["width:60px;margin-left:4px;"]),rm=k.div.withConfig({componentId:"sc-21g986-10"})(["width:100%;margin-top:8px;"]),om=k.div.withConfig({componentId:"sc-21g986-11"})(["margin-top:8px;width:100%;"]),am=function(){var r=D(),t=r.haveNotSavedChanges,n=r.config.onClose;return typeof n=="function"?c.createElement(ac,{className:"FIE_topbar-close-button",color:"link",size:"sm",onClick:function(){n($n.CLOSE_BUTTON,t)}},n&&c.createElement(ul,null)):c.createElement("span",null)},im=k(dl).withConfig({componentId:"sc-kpjpf5-0"})([".SfxModalTitle-LabelPrimary{font-size:14px;line-height:16px;font-weight:500;}"]);function Wa(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Xa(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Wa(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Wa(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var sm={width:300},sr=function(v){var t=v.title,n=v.hint,e=v.Icon,o=v.onDone,a=v.onCancel,i=v.doneLabel,s=v.cancelLabel,l=v.isOpened,d=v.doneButtonStyle,u=v.doneButtonColor,u=u===void 0?"link":u,p=v.cancelButtonColor,p=p===void 0?"link":p,S=v.children,O=v.areButtonsDisabled,y=v.zIndex,v=v.className;return c.createElement(pl,{className:v,open:l,onClose:a,style:Xa(Xa({},sm),{},{zIndex:y}),onKeyUp:function(w){w.key==="Enter"&&o(w)}},c.createElement(im,{icon:c.createElement(e,{size:25}),iconShadow:!0,onClose:a,primary:t,secondary:n,variant:"with-icon"}),S&&c.createElement(fl,null,S),c.createElement(gl,{align:"center"},c.createElement(Fe,{color:p,onClick:a,size:"md",disabled:O},s),c.createElement(Fe,{color:u,onClick:o,size:"md",style:d,disabled:O},i)))};function Ga(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function re(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ga(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ga(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}sr.defaultProps={hint:"",isOpened:!1,doneLabel:"Yes",cancelLabel:"No",doneButtonStyle:void 0,doneButtonColor:"link",cancelButtonColor:"link",children:void 0,areButtonsDisabled:!1,zIndex:void 0,className:void 0};var dn,cm={marginBottom:16},lm={width:67},um={marginLeft:12},pn=!0,Ha=function(){function r(){var R=B(j);(o.current||w)(R.imageData,R.designState),o.current=null,y&&O&&O($n.AFTER_SAVE,u)}function t(){if(typeof(o.current||w)!="function")throw new Error("Please provide onSave function handler.");return j.name&&j.extension?void C():void i({type:Me,payload:{feedback:{message:p("nameIsRequired")}}})}function n(){var R;return I?(R=B(j),void(o.current||w)(R.imageData,R.designState)):o.current||typeof v!="function"||v(j)!==!1?void P(!0):void t()}function e(R,$){if(typeof R!="function")throw new Error("onSave function callback is required as an argument to the passed function.");o.current=R,$()}var A=D(),o=b.exports.useRef(),a=A.theme,i=A.dispatch,s=A.originalImage,l=A.resize,d=A.isLoadingGlobally,u=A.haveNotSavedChanges,F=A.feedback,p=A.t,N=A.adjustments,S=(N=N===void 0?{}:N).crop,N=A.config,O=N.onClose,y=N.closeAfterSave,v=N.onBeforeSave,w=N.onSave,g=N.forceToPngInEllipticalCrop,m=N.defaultSavedImageType,I=N.useCloudimage,A=N.moreSaveOptions,N=b.exports.useState(!1),N=T(N,2),f=N[0],P=N[1],N=b.exports.useState({quality:.92}),N=T(N,2),j=N[0],x=N[1],B=bs(),N=["jpeg","jpg","webp"].includes(j.extension),F=F.duration===0,C=function(){i({type:Xn}),P(!1),setTimeout(r,3)},A=(b.exports.useEffect(function(){var R,$;!s||j.name&&j.extension||(R=($=ys(s.name,g&&S.ratio===De?"png":et.includes(m==null?void 0:m.toLowerCase())&&m)).name,$=$.extension,x(re(re({},j),{},{name:R,extension:$})))},[s,f]),b.exports.useEffect(function(){x(re(re({},j),{},{size:{width:l.width,height:l.height}}))},[l]),b.exports.useEffect(function(){return pn=!0,function(){pn=!1}},[]),Array.isArray(A)&&0<A.length?A.map(function(R,$){return re(re({},R),{},{key:"".concat(R.label||$,"-option-key"),onClick:typeof R.onClick=="function"?function(){return R.onClick(function(J){return e(J,n)},function(J){return e(J,C)})}:void 0})}):[]);return c.createElement(c.Fragment,null,c.createElement(er,{className:"FIE_topbar-save",color:"primary",label:p("save"),onClick:n,menuPosition:"bottom",menuItems:A,menuStyle:um,wrapperStyle:lm,disabled:d||F}),f&&c.createElement(sr,{className:"FIE_save-modal",title:p("saveAsModalLabel"),Icon:function(R){return c.createElement(ml,ae({color:a.palette["accent-primary"]},R))},isOpened:f,onCancel:function(){pn&&f&&(o.current=null,P(!1))},onDone:t,doneLabel:p("save"),cancelLabel:p("cancel"),doneButtonColor:"primary",areButtonsDisabled:d,zIndex:11110},c.createElement(tm,{className:"FIE_save-file-name-input",value:j.name,onChange:function(R){R=R.target.value,x(re(re({},j),{},{name:R}))},size:"sm",placeholder:p("name"),error:!!j.name,focusOnMount:!0}),c.createElement(nm,{className:"FIE_save-extension-selector",onChange:function(R){return x(re(re({},j),{},{extension:R}))},value:j.extension,placeholder:p("extension"),size:"sm"},et.map(function(R){return c.createElement(gt,{key:R,value:R},R)})),N&&c.createElement(rm,{className:"FIE_save-quality-wrapper"},c.createElement(H,null,p("quality")),c.createElement(te,{annotation:"%",min:1,max:100,onChange:function(R){x(re(re({},j),{},{quality:ee(R/100,.01,1)}))},value:parseInt(100*j.quality,10),width:"100%",style:cm})),c.createElement(om,{className:"FIE_save-resize-wrapper"},c.createElement(H,null,p("resize")),c.createElement(Qn,{onChange:function(R){x(re(re({},j),{},{size:re(re({},j.size),R)}))},currentSize:(j==null?void 0:j.size)||{},hideResetButton:!0,alignLeft:!0}))))},Nn=function(n){function t(){d(!1)}var n=n.margin,i=D(),e=i.dispatch,o=i.isResetted,o=o===void 0||o,a=i.theme,s=i.feedback,i=i.t,s=s.duration===0,u=b.exports.useState(!1),u=T(u,2),l=u[0],d=u[1],u=b.exports.useCallback(function(){e({type:Wn}),t()},[]);return c.createElement(c.Fragment,null,c.createElement(ir,{className:"FIE_topbar-reset-button",color:"link",onClick:o?void 0:function(){d(!0)},disabled:o||s,title:i("resetOperations"),margin:n},c.createElement(hl,{size:12})),l&&c.createElement(sr,{title:i("changesLoseConfirmation"),hint:i("changesLoseConfirmationHint"),isOpened:l,onCancel:t,onDone:u,Icon:function(){return c.createElement(Ol,{color:a.palette.warning,size:25})},doneLabel:i("continue"),cancelLabel:i("cancel"),doneButtonColor:"error",doneButtonStyle:{background:a.palette.warning}}))},An=(Nn.defaultProps={margin:void 0},function(t){var t=t.margin,a=D(),n=a.dispatch,e=a.hasUndo,e=e!==void 0&&e,o=a.t,a=a.feedback.duration===0,i=b.exports.useCallback(function(){n({type:Kn})},[]);return c.createElement(ir,{className:"FIE_topbar-undo-button",color:"link",onClick:e?i:void 0,disabled:!e||a,title:o("undoTitle"),margin:t},c.createElement(yl,{size:12}))}),kn=(An.defaultProps={margin:void 0},function(t){var t=t.margin,o=D(),n=o.dispatch,e=o.hasRedo,e=e!==void 0&&e,o=o.t,a=b.exports.useCallback(function(){n({type:zn})},[]);return c.createElement(ir,{className:"FIE_topbar-redo-button",color:"link",onClick:e?a:void 0,disabled:!e,title:o("redoTitle"),margin:t},c.createElement(bl,{size:12}))}),dm=(kn.defaultProps={margin:void 0},function(){function r(){t({type:xn,payload:{isShow:!0}}),document.addEventListener("mouseup",d),document.addEventListener("mouseleave",d),document.addEventListener("touchcancel",d),document.addEventListener("touchend",d)}var l=D(),t=l.dispatch,n=l.isResetted,n=n===void 0||n,e=l.originalImage,o=l.resize,i=l.adjustments,a=i.crop,i=i.rotation,s=l.shownImageDimensions,l=l.t,d=function(){t({type:xn,payload:{isShow:!1}}),document.removeEventListener("mouseup",d),document.removeEventListener("mouseleave",d),document.removeEventListener("touchcancel",d),document.removeEventListener("touchend",d)};return e?(o=Bs(o===void 0?{}:o,a,s,e,i===void 0?0:i),c.createElement(c.Fragment,null,c.createElement(H,{title:l("imageDimensionsHoverTitle")},"".concat(o.width," x ").concat(o.height," px")),c.createElement(_n,{color:"link",horizontalMargin:"8px",onMouseDown:n?void 0:r,onTouchStart:n?void 0:r,disabled:n,title:l("showImageTitle")},c.createElement(vl,null)))):null}),Ya=1.1,pm=function(){function r(i){t({type:or,payload:{factor:i,x:"center",y:"center"}})}var e=D(),t=e.dispatch,a=e.zoom,n=a===void 0?{}:a,a=e.toolId,o=e.feedback,e=e.t,o=o.duration===0,a=a===E.CROP||o;return c.createElement(c.Fragment,null,c.createElement(_n,{onClick:function(){r(n.factor/Ya)},color:"link",title:e("zoomOutTitle"),disabled:a},c.createElement(El,null)),c.createElement(Qg,{title:e("resetZoomTitle"),onClick:a?void 0:function(){r(dt)},"aria-disabled":a},"".concat(parseInt(100*n.factor,10),"%")),c.createElement(_n,{onClick:function(){r(n.factor*Ya)},color:"link",title:e("zoomInTitle"),disabled:a},c.createElement(wl,null)))},fm=function(){var r=D(),t=r.t,n=r.haveNotSavedChanges,e=r.config.onClose;return typeof e=="function"?c.createElement(ac,{className:"FIE_topbar-back-button",color:"link",size:"sm",onClick:function(){e($n.CLOSE_BUTTON,n)}},e&&c.createElement(c.Fragment,null,c.createElement(ci,{size:9}),c.createElement(em,null,t("back")))):c.createElement("span",null)},gm=function(){var r=D().config.showBackButton,t=Vn();return c.createElement(Jg,{reverseDirection:r,className:"FIE_topbar"},c.createElement(za,{reverseDirection:r,className:"FIE_topbar-buttons-wrapper"},t?c.createElement("div",null,c.createElement(Ha,null),c.createElement("div",{style:{marginTop:6},className:"FIE_topbar-history-buttons"},c.createElement(Nn,{margin:"0"}),c.createElement(An,{margin:"0"}),c.createElement(kn,{margin:"0"}))):c.createElement(c.Fragment,null,c.createElement(Ha,null),c.createElement("div",{className:"FIE_topbar-history-buttons"},c.createElement(Nn,null),c.createElement(An,null),c.createElement(kn,null)))),c.createElement(za,{className:"FIE_topbar-center-options"},c.createElement(dm,null),c.createElement(oc,null),c.createElement(pm,null)),r?c.createElement(fm,null):c.createElement(am,null))},mm=k.div.withConfig({componentId:"sc-qhd6ow-0"})(["padding:0 12px 12px 0;overflow-y:auto;max-height:100%;[data-phone='true'] &{display:flex;padding:0;}"]),hm=k.div.withConfig({componentId:"sc-qhd6ow-1"})(function(r){return r=r.theme,`
    width: 67px;
    height: 62px;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    background: `.concat(r.palette["bg-primary"],`;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;

    [data-phone='true'] & {
      margin-bottom: 0;
      height: 50px;
      border-radius: 0;
    }

    &,
    * {
      cursor: pointer;
    }

    &:hover {
      background: `).concat(r.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(r.palette["bg-primary-active"],`;

      * {
        color: `).concat(r.palette["accent-primary-active"],`;
      }
    }
  `)}),Om=k(H).withConfig({componentId:"sc-qhd6ow-2"})(["margin-top:6px;font-size:11px;line-height:12px;[data-phone='true'] &{font-size:10px;}"]),Ka=function(i){var t=i.id,n=i.label,e=i.Icon,o=i.isSelected,a=i.onClick,i=b.exports.useCallback(function(){typeof a=="function"&&a(t)},[t]);return c.createElement(hm,{className:"FIE_tab","aria-selected":o,onClick:i},c.createElement(e,null),n&&c.createElement(Om,{className:"FIE_tab-label"},n))},ym=(Ka.defaultProps={isSelected:!1,onClick:void 0,label:void 0},b.exports.memo(Ka)),fn=[{id:G.ADJUST,labelKey:"adjustTab",icon:Sl},{id:G.FINETUNE,labelKey:"finetuneTab",icon:Tl},{id:G.FILTERS,labelKey:"filtersTab",icon:Il,hideFn:function(r){return r.useCloudimage}},{id:G.WATERMARK,labelKey:"watermarkTab",icon:jl},{id:G.ANNOTATE,labelKey:"annotateTab",icon:Pl,hideFn:function(r){return r.useCloudimage}},{id:G.RESIZE,labelKey:"resizeTab",icon:xl}],Ua=function(){var s=D(),r=s.t,t=s.dispatch,e=s.tabId,n=e===void 0?null:e,e=s.config,o=e.tabsIds,a=e.defaultTabId,i=e.useCloudimage,s=b.exports.useMemo(function(){var d=[];return 0<Object.keys(o).length?fn.forEach(function(u){var p=o.indexOf(u.id);p!==-1&&(d[p]=u)}):d=fn,(0<d.length?d:fn).filter(function(u){return u=u.hideFn,!u||!u({useCloudimage:i})})},[o]),l=b.exports.useCallback(function(d){t({type:Ws,payload:{tabId:d}})},[]);return s.length===1?null:c.createElement(mm,{className:"FIE_tabs"},s.map(function(S){var u=S.id,p=S.labelKey,S=S.icon;return c.createElement(ym,{key:u,id:u,label:r(p),Icon:S,isSelected:(n||a)===u,onClick:l})}))},Va=function(r){return r=r.children,c.createElement(jd,{className:"FIE_tool-options-wrapper",hasChildren:!!r},r)},qa=(Va.defaultProps={children:void 0},function(){var O=D(),r=O.t,t=O.dispatch,S=O.tabId,n=O.toolId,e=O.annotations,a=O.selectionsIds,o=a===void 0?[]:a,a=O.config,O=a.defaultTabId,i=a.defaultToolId,s=a.useCloudimage,l=S||O,d=n||i||((a=$t[l])==null?void 0:a[0]),u=b.exports.useMemo(function(){return $t[l]||[]},[l]),p=b.exports.useCallback(function(y){t({type:Ht,payload:{toolId:y}})},[]),S=b.exports.useMemo(function(){return u.map(function(y){var w=ct[y],v=w.Item,w=w.hideFn;return v&&(!w||!w({useCloudimage:s}))&&c.createElement(v,{key:y,selectTool:p,t:r,isSelected:d===y})})},[u,d]),O=b.exports.useMemo(function(){if(!d)return!1;if(l===G.ANNOTATE){var y,v=o.length;if(v===1)return y=e[o[0]],(y=ct[y.name])==null?void 0:y.ItemOptions;if(1<v)return null}return l&&d&&$t[l].includes(d)&&(!((y=ct[n])!=null&&y.hideFn)||!((v=ct[n])!=null&&v.hideFn({useCloudimage:s})))&&((y=ct[n])==null?void 0:y.ItemOptions)},[l,d,e,o]);return b.exports.useEffect(function(){!n&&d&&t({type:Ht,payload:{toolId:d}})},[]),c.createElement(Sd,{className:"FIE_tools-bar-wrapper"},c.createElement(Va,null,O&&c.createElement(O,{t:r})),S&&c.createElement(Td,{className:"FIE_tools-bar"},S))}),bm={horizontal:"center",vertical:"bottom"},vm=(h(dn={},tt.ERROR,"sad"),h(dn,tt.WARNING,"worried"),dn),ic=function(t){var t=t.anchorOrigin,n=D(),e=n.feedback,e=e===void 0?{}:e,o=n.dispatch;return e.message?c.createElement(Cl,{className:"FIE_feedback-robot",anchorOrigin:t,autoHideDuration:(n=e.duration)!=null?n:5e3,message:e.message,open:!!e.message,status:vm[e.status||tt.ERROR],onClose:function(){o({type:Me,payload:{feedback:{}}})}}):null},Em=(ic.defaultProps={anchorOrigin:bm},_l(["0%{transform:rotate(0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19);}50%{transform:rotate(900deg);animation-timing-function:cubic-bezier(0.215,0.61,0.355,1);}100%{transform:rotate(1800deg);}"])),wm=k.div.withConfig({componentId:"sc-m42fbk-0"})(["background:rgba(0,0,0,0.25);display:flex;align-items:center;justify-content:center;position:absolute;z-index:11111;top:0;bottom:0;right:0;left:0;flex-direction:column;user-select:none;label{color:#ffffff;}"]),Sm=k.div.withConfig({componentId:"sc-m42fbk-1"})(["display:inline-block;position:relative;width:80px;height:80px;:after{content:' ';display:block;border-radius:50%;width:0;height:0;margin:8px;box-sizing:border-box;border:32px solid #fff;border-color:#fff transparent #fff transparent;animation:"," 1.2s infinite;}"],Em),sc=function(r){return r=r.label,c.createElement(wm,{className:"FIE_spinner-wrapper"},c.createElement(Sm,{className:"FIE_spinner"}),r&&c.createElement(H,{className:"FIE_spinner-label"},r))},Tm=(sc.defaultProps={label:""},["cropX2","cropY2","crop","watermark"]);function Za(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function he(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Za(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Za(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Im=function(r,t){var n,e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};switch(r){case"wat_text":return{watermark:{text:t.replaceAll("+"," ")}};case"wat_font":return{watermark:{fontFamily:t}};case"wat_color":return{watermark:{fill:"#".concat(t)}};case"wat_fontsize":return{watermark:{fontSize:parseFloat(t)}};case"wat_opacity":return{watermark:{opacity:parseFloat(t)}};case"wat_pos":var i=t.split(","),i=T(i,2),a=i[0],i=i[1];return{watermark:{x:parseFloat(a)/100*e.width,y:parseFloat(i)/100*e.height}};case"wat_url":return{watermark:{image:decodeURIComponent(t)}};case"wat_scale":return a=t.split(","),i=T(a,2),a=i[0],i=i[1],{watermark:{width:parseFloat(a)/100*(e.width||0),height:parseFloat(i)/100*(e.height||0)}};case"tl_px":return a=t.split(","),i=T(a,2),a=i[0],i=i[1],{crop:{x:Oe(parseFloat(a),0,o.width,0,e.width),y:Oe(parseFloat(i),0,o.height,0,e.height)}};case"br_px":return a=t.split(","),i=T(a,2),a=i[0],i=i[1],{cropX2:Oe(parseFloat(a),0,o.width,0,e.width),cropY2:Oe(parseFloat(i),0,o.height,0,e.height)};case"round":return{crop:{ratio:De}};case"w":return{resize:{width:parseFloat(t)}};case"h":return{resize:{height:parseFloat(t)}};case"r":return{adjustments:{rotation:-parseInt(t,10)}};case"flip":case"mirror":return{adjustments:{isFlippedX:t.includes("x")||t.includes("h"),isFlippedY:t.includes("y")||t.includes("v")}};default:return Object.keys(Mt).forEach(function(s){Mt[s].cloudimage.name===r.toLowerCase()&&(n=s)}),n?(a=Mt[n],i=a.cloudimage,a=a.internal,{finetunes:[U.Filters[n]],finetunesProps:h({},a.propName,Oe(parseFloat(t),i.min,i.max,a.min,a.max))}):null}},jm=function(l,t,n){if(!l)return null;var l=l.split("&"),e={},l=(l.forEach(function(u){var u=u.split("="),u=T(u,2),p=u[0],u=u[1],p=Im(p,u,t,n);p&&(e=ht(e,p,!0))}),e),o=l.cropX2,a=l.cropY2,i=l.crop,s=l.watermark,l=Z(l,Tm);return he(he(he({},l),o&&a&&i?{adjustments:he(he({},l.adjustments),{},{crop:he(he({},i),{},{width:(o||0)-i.x,height:(a||0)-i.y})})}:{}),{},{annotations:he({},s?h({},xe,he(he({},s),{},{x:((i==null?void 0:i.x)||0)+(s.x||0),y:((i==null?void 0:i.y)||0)+(s.y||0),id:xe,name:s.text?E.TEXT:E.IMAGE},s.text?{width:s.text.length*s.fontSize,height:s.fontSize}:{})):{})})},gn=function(r,t){return r&&t&&(r instanceof HTMLImageElement&&r.src===t.src&&r.width===t.width&&r.height===t.height||((r==null?void 0:r.src)||r)===t.src)},Pm=k.div.attrs(function(n){var t,n=n.$size,n=n===void 0?{}:n;return{style:{width:(t=n.width)!=null?t:"100%",height:(t=n.height)!=null?t:"100%"}}}).withConfig({componentId:"sc-ugtqr7-0"})(["display:flex;flex-direction:column;align-items:center;height:100%;max-height:100%;width:100%;max-width:100%;overflow:auto;position:relative;min-height:250px;min-width:300px;"]),xm=k.div.withConfig({componentId:"sc-ugtqr7-1"})(["display:flex;align-items:flex-start;width:100%;padding:12px;box-sizing:border-box;height:calc(100% - 95px);flex-grow:1;[data-phone='true'] &{padding:0;}"]),Cm=k.div.withConfig({componentId:"sc-ugtqr7-2"})(["height:100%;width:calc(100% - 80px);flex-grow:1;overflow-y:auto;display:flex;flex-direction:column;"]),_m=k.div.withConfig({componentId:"sc-ugtqr7-3"})(["width:100%;flex-grow:1;"]);function Ja(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function Qa(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?Ja(Object(t),!0).forEach(function(e){h(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ja(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}var Nm=function(){function r(X){return new Promise(function(pr){var ot,ye=(X==null?void 0:X.src)||X;V.current===ye||!ye&&s||gn(ye,s)?V.current||pr():(ot=function(){V.current=null,pr()},V.current=ye,typeof X=="string"?nc(X,I).then(ur).catch(dr).finally(ot):(X instanceof HTMLImageElement?ur(X):dr(d("invalidImageError")),ot()))})}function t(X){Se.current&&(X.preventDefault(),X.returnValue="")}function n(){var X=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){return[]};i({type:Xn}),Promise.all(X()).finally(function(){i({type:Bn})})}function e(){p&&0<Object.keys(p).length&&i({type:Bt,payload:Qa(Qa({},p),{},{finetunes:ss(p==null?void 0:p.finetunes),filter:as(p==null?void 0:p.filter)})})}var u=D(),A=u.config,o=u.isLoadingGlobally,a=u.haveNotSavedChanges,i=u.dispatch,s=u.originalImage,l=u.shownImageDimensions,d=u.t,u=u.feedback,u=u===void 0?{}:u,p=A.loadableDesignState,S=A.useCloudimage,O=A.cloudimage,y=A.source,v=A.avoidChangesNotSavedAlertOnLeave,w=A.useBackendTranslations,g=A.translations,m=A.language,I=A.defaultSavedImageName,f=A.observePluginContainerSize,P=A.showCanvasOnly,j=A.getCurrentImgDataFnRef,x=A.updateStateFnRef,A=Un(),A=T(A,2),B=A[0],N=A[1],A=b.exports.useState({width:void 0,height:void 0}),A=T(A,2),F=A[0],C=A[1],A=Vn(),R=b.exports.useRef(null),$=b.exports.useRef(!0),J=b.exports.useRef(!1),V=b.exports.useRef(null),Se=b.exports.useRef(a),lr=bs(),ur=b.exports.useCallback(function(X){i({type:Ys,payload:{originalImage:X}})},[]),dr=b.exports.useCallback(function(X){i({type:Me,payload:{feedback:{message:X.message||X,duration:0}}})},[]);return b.exports.useEffect(function(){$.current||!y||gn(y,s)||(J.current=!1,n(function(){return[r(y)]}))},[y]),b.exports.useEffect(function(){var X;$.current||((X=p==null?void 0:p.imgSrc)&&!gn(X,s)?n(function(){return[r(X).then(e)]}):e())},[p]),b.exports.useEffect(function(){0<Object.keys(l||{}).length&&!Object.keys(l).some(function(X){return!l[X]})&&s&&S&&O!=null&&O.loadableQuery&&!J.current&&(i({type:Bt,payload:jm(O.loadableQuery,l,s)}),J.current=!0)},[l,s,S,O]),b.exports.useEffect(function(){var X=!1;return f&&R.current?B(R.current.parentNode,function(ye){var ot=ye.width,ye=ye.height;return C({width:ot,height:ye})}):F.width&&F.height&&!X&&C({width:void 0,height:void 0}),function(){f&&R.current&&N(R.current),X=!0}},[f]),b.exports.useEffect(function(){return n(function(){return[r((p==null?void 0:p.imgSrc)||y)].concat(oe(w?[xd(m,g)]:[]))}),$.current=!1,window&&!v&&window.addEventListener("beforeunload",t),function(){window&&!v&&window.removeEventListener("beforeunload",t)}},[]),b.exports.useEffect(function(){x&&zt(x)==="object"&&(x.current=function(X){i({type:Bt,payload:X})})},[x,i]),b.exports.useEffect(function(){j&&zt(j)==="object"&&(j.current=lr)},[lr]),b.exports.useEffect(function(){Se.current=a},[a]),c.createElement(Pm,{className:Wt,"data-phone":A,ref:R,$size:F},o&&c.createElement(sc,{label:d("loading")}),!P&&c.createElement(gm,null),s&&u.duration!==0&&c.createElement(xm,{className:"FIE_main-container"},!A&&!P&&c.createElement(Ua,null),c.createElement(Cm,{className:"FIE_editor-content"},c.createElement(qg,null),!P&&(A?c.createElement(_m,{className:"FIE_phone-tools-tabs-wrapper"},c.createElement(qa,null),c.createElement(Ua,null)):c.createElement(qa,null)))),c.createElement(ic,null))},Am=b.exports.memo(Nm),km=Dn([".","{font-family:",";}.SfxModal-Wrapper *{font-family:",";}"],Wt,function(t){var t=t.theme;return((t=(t===void 0?{}:t).typography)==null?void 0:t.fontFamily)||"Arial"},function(t){var t=t.theme;return((t=(t===void 0?{}:t).typography)==null?void 0:t.fontFamily)||"Arial"}),Rm=Dn([".Menu-open{overflow:visible !important;}.",",#SfxPopper{box-sizing:border-box;.SfxPopper-root .SfxMenu-root{overflow:visible;.SfxMenuItem-prefix{margin-right:6px;}}}.",' *,#SfxPopper *{box-sizing:border-box;scrollbar-color:rgba(203,211,218,1) rgba(203,211,218,0.35);:disabled,[aria-disabled="true"]{cursor:not-allowed;}&::-webkit-scrollbar{width:4px;height:4px;}&::-webkit-scrollbar-track{background:rgba(203,211,218,0.35);}&::-webkit-scrollbar-thumb{background:rgba(203,211,218,1);border-radius:10px;}}'],Wt,Wt),Fm=Dn([":not(button) > svg:not([color]){color:","}"],function(r){return r.theme.palette["icons-primary"]}),ei=function(r){var t=r.img,n=r.source,e=r.useCloudimage,o=r.cloudimage;if(t)throw new Error("`img` is renamed to `source` please consider renaming it from your configurations.");if(!n||typeof n!="string"&&!(n instanceof HTMLImageElement))throw new Error("`source` property is required either a string of image url or a HTMLImageElement for the image that will be edited.");if(e&&o!=null&&(t=o.imageSealing)!=null&&t.enable&&(o==null||(n=o.imageSealing)==null||!n.salt))throw new Error("`salt` property of imageSealing object is required in cloudimage mode as long as `imageSealing` is enabled.");return e=ht(yi,r),c.createElement(c.StrictMode,null,c.createElement(Nl,{theme:e.theme},c.createElement(km,null),c.createElement(Fm,null),c.createElement(Rm,null),c.createElement(fs,{config:e},c.createElement(Am,null))))},Lm=(ei.defaultProps={useCloudimage:!1,cloudimage:{},img:void 0},b.exports.memo(ei));function ti(r,t){var n,e=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),e.push.apply(e,n)),e}function ni(r){for(var t,n=1;n<arguments.length;n++)t=arguments[n]==null?{}:arguments[n],n%2?ti(Object(t),!0).forEach(function(e){bn(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ti(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))});return r}function Nt(r,t,n){Dm(r,t),t.set(r,n)}function Dm(r,t){if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}var mn,hn=new WeakMap,On=new WeakMap,At=new WeakMap,kt=new WeakMap,ke=function(){function r(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(Rl(this,r),Nt(this,hn,{writable:!0,value:void 0}),Nt(this,On,{writable:!0,value:void 0}),Nt(this,At,{writable:!0,value:void 0}),Nt(this,kt,{writable:!0,value:void 0}),this.container=t,this.config=n,!(t&&t instanceof HTMLElement))throw new Error("`container` (argument 0) is required to initialize the image editor plugin.");bt(this,hn,hr.exports.render),bt(this,On,hr.exports.unmountComponentAtNode),bt(this,At,{}),bt(this,kt,{})}return Al(r,[{key:"render",value:function(t){kl(t)==="object"&&(this.config=this.config=ht(this.config||{},t)),this.config=ni(ni({},this.config),{},{getCurrentImgDataFnRef:Be(this,At),updateStateFnRef:Be(this,kt)}),Be(this,hn).call(this,b.exports.createElement(Lm,this.config),this.container)}},{key:"terminate",value:function(){Be(this,On).call(this,this.container)}},{key:"getCurrentImgData",value:function(t){var n,e;return((n=Be(this,At))==null||(e=n.current)==null?void 0:e.call(n,t))||{}}},{key:"updateState",value:function(t){var n,e;(n=Be(this,kt))!=null&&(e=n.current)!=null&&e.call(n,t)}}]),r}();function ie(r){return document.getElementById(r)}bn(ke,"TABS",G),bn(ke,"TOOLS",E),ke.TABS=G,ke.TOOLS=E;var Mm=ie("crop"),$m=ie("finetune"),qe=ie("filter"),Rt=ie("filter-label"),Bm=ie("watermark"),Ze=ie("annotate"),Ft=ie("annotate-label"),zm=ie("resize"),Wm=ie("add-image"),cc=ie("mode-options"),Xm=ie("js-code-tab"),Gm=ie("js-code-wrapper"),Hm=ie("react-code-tab"),Ym=ie("react-code-wrapper"),Km=ie("cdn-code-tab"),Um=ie("cdn-code-wrapper"),Vm=document.querySelectorAll(".copy-button"),qm=document.querySelectorAll("[data-accordion]"),ft=!1,ue=ke.TABS,ri=ke.TOOLS,Rn={"js-code-tab":Gm,"react-code-tab":Ym,"cdn-code-tab":Um},Zm=["https://scaleflex.cloudimg.io/v7/demo/river.png","https://scaleflex.airstore.io/demo/spencer-davis-unsplash.jpg","https://scaleflex.cloudimg.io/v7/demo/damian-markutt-unsplash.jpg"],pe=[ue.ADJUST,ue.FINETUNE,ue.FILTERS,ue.WATERMARK,ue.ANNOTATE,ue.RESIZE],Jm={adjust:ue.ADJUST,finetune:ue.FINETUNE,filter:ue.FILTERS,watermark:ue.WATERMARK,annotate:ue.ANNOTATE,resize:ue.RESIZE},Qm=(Or(mn={source:"https://scaleflex.cloudimg.io/v7/demo/river.png",tabsIds:pe,defaultTabId:ue.RESIZE,defaultToolId:null,observePluginContainerSize:!0,cloudimage:{token:"demo",version:"v7"}},ri.TEXT,{text:"Filerobot..."}),Or(mn,ri.WATERMARK,{gallery:["https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/PNG/SCALEFLEX+LOGO+-+Color+Dark+text.png?vh=45cac1","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGOTYPE+WITH+SCALEFLEX-01-01.png?vh=76c5a7","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGO+WITH+SCALEFLEX-01.png?vh=467711","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGO+WITH+SCALEFLEX+ON+WHITE+BG.png?vh=7ae33c","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGO+WITH+SCALEFLEX+ON+BLACK+BG.png?vh=619469","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+Icon/FILEROBOT+ICON.png?vh=a4578e","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+Icon/FILEROBOT+ICON+ON+WHITE+BG.png?vh=fa44f7","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+Vertical/FILEROBOT+LOGO+VERTICAL.png?vh=05c4c3","https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/PNG/SCALEFLEX+LOGO+-+Grayscale+Dark+text.png?vh=313898","https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/Logo+Vertical/SCALEFLEX+LOGO+VERTICAL+WHITE+TEXT.png?vh=fca07b","https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/Logo+Vertical/SCALEFLEX+LOGO+VERTICAL.PNG?vh=9a6fa1"]}),mn);function eh(r,t){var n=document.createElement("a");n.href=r,ft?n.target="_blank":n.download=t,n.style="position: absolute; z-index: -111; visibility: none;",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var Ot=new ke(document.querySelector("#editor_container"),Qm);function Ue(t){var t=t.target,e=t.value,n=t.checked,e=Jm[e];if(n)pe.includes(e)||pe.push(e);else{if(n=pe.indexOf(e),pe.includes(e)&&pe.length===1)return void(t.checked=!0);pe.splice(n,1)}Ot.render({tabsIds:[].concat(pe)})}function cr(r,t){var n=document.querySelector("[data-image-editor-active-image]");n&&n.removeAttribute("data-image-editor-active-image"),r.setAttribute("data-image-editor-active-image",""),Ot.render({source:t})}function lc(r){var t=document.querySelector(".uploaded-imgs-wrapper"),n=document.createElement("div");return n.style.backgroundImage="url(".concat(r,")"),n.className="uploaded-img",n.onclick=function(){return cr(n,r)},t.appendChild(n),n}function th(r){r=URL.createObjectURL(r.target.files[0]),cr(lc(r),r),Ot.render({source:r})}function nh(){ft=cc.value==="Cloudimage"?(Ze.checked=!1,Ze.disabled=!0,Ft.style.color="gray",Ft.style.cursor="auto",qe.checked=!1,qe.disabled=!0,Rt.style.color="gray",Rt.style.cursor="auto",!0):(pe.includes(Ze.name)&&(Ze.checked=!0),pe.includes(qe.name)&&(qe.checked=!0),qe.disabled=!1,Rt.style.color="#203254",Rt.style.cursor="pointer",Ze.disabled=!1,Ft.style.color="#203254",!(Ft.style.cursor="pointer")),Ot.render({useCloudimage:ft,tabsIds:[].concat(pe)})}function rh(r){r=r.target.id,r=Rn[r],Object.values(Rn).forEach(function(t){t.style.display="none"}),r.style.display="unset"}function yn(n){var t=n.target||n,n=(rh(n),document.querySelector("[selected-tab]"));n&&n.removeAttribute("selected-tab"),t.setAttribute("selected-tab","")}function oh(n){var t=n.currentTarget.getElementsByTagName("p")[0],n=document.querySelector("[selected-tab]").id,n=Rn[n];navigator.clipboard.writeText(n.innerText),t.innerHTML==="Copy"&&(t.innerHTML="copied",setTimeout(function(){t.innerHTML="Copy"},500))}function ah(r){r=r.target.getAttribute("data-accordion"),r=document.querySelector('[data-accordion-content="'.concat(r,'"]')),r.style.display=r!=null&&r.offsetWidth?"none":"block"}Ot.render({onSave:function(r){eh(r[ft?"cloudimageUrl":"imageBase64"],r.fullName)},useCloudimage:ft}),document.onreadystatechange=function(){Zm.forEach(function(r,t){var n=lc(r);t||cr(n,r)})},Mm.addEventListener("change",Ue),$m.addEventListener("change",Ue),qe.addEventListener("change",Ue),Bm.addEventListener("change",Ue),Ze.addEventListener("change",Ue),zm.addEventListener("change",Ue),Wm.addEventListener("change",th),cc.addEventListener("change",nh),Xm.addEventListener("click",yn),Hm.addEventListener("click",yn),Km.addEventListener("click",yn),Vm.forEach(function(r){r.addEventListener("click",oh)}),qm.forEach(function(r){r.addEventListener("click",ah)});
