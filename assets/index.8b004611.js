import{_ as h,a as T,K as U,F as St,g as hr,b as ci,c as oe,s as k,L as H,r as b,R as c,B as hc,u as Oc,d as Z,S as yc,e as ae,f as Le,I as bc,C as vc,h as wc,P as Ec,E as Sc,M as st,A as Tc,i as bt,j as Pc,k as Ic,l as jc,m as Cc,n as xc,o as _c,p as Nc,q as Ac,T as kc,t as Or,v as li,w as $n,x as Zt,y as Rc,z as Lc,D as Fc,G as Dc,H as Mc,J as $c,N as Bc,O as zc,Q as Kc,U as ui,V as Bn,W as yr,X as di,Y as Wc,Z as Xc,$ as Gc,a0 as Hc,a1 as Yc,a2 as Uc,a3 as Vc,a4 as qc,a5 as Zc,a6 as Jc,a7 as Qc,a8 as el,a9 as Fe,aa as tl,ab as nl,ac as pi,ad as rl,ae as fi,af as ol,ag as al,ah as il,ai as Gt,aj as le,ak as gi,al as mi,am as sl,an as cl,ao as ll,ap as ul,aq as dl,ar as hi,as as Oi,at as pl,au as fl,av as gl,aw as ml,ax as hl,ay as Ol,az as yl,aA as bl,aB as vl,aC as wl,aD as El,aE as Sl,aF as Tl,aG as Pl,aH as Il,aI as jl,aJ as Cl,aK as xl,aL as _l,aM as Nl,aN as Al,aO as kl,aP as Rl,aQ as zn,aR as Ll,aS as Fl,aT as Dl,aU as ze,aV as Sn,aW as Ml,aX as Tt,aY as br,aZ as mt,a_ as $l,a$ as Bl,b0 as zl}from"./vendor.499910f0.js";const Kl=function(){const r=document.createElement("link").relList;if(!(r&&r.supports&&r.supports("modulepreload"))){for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0})}function e(n){var t;n.ep||(n.ep=!0,t=function(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}(n),fetch(n.href,t))}};Kl();var Tn=function(r,e,n,t){return Math.min(r/n,e/t)||1},Ht="FIE_root",Wl="FIE_design-layer",yi="FIE_transformers-layer",bi="FIE_original-image",vi="FIE_nodes-transformer",Ce="watermark",Pn="353297d2-40b4-4684-a875-45a2178a8157",X={FINETUNE:"Finetune",FILTERS:"Filters",ADJUST:"Adjust",WATERMARK:"Watermark",ANNOTATE:"Annotate",RESIZE:"Resize"},E={CROP:"Crop",ROTATE:"Rotate",FLIP_X:"Flip_X",FLIP_Y:"Flip_Y",BRIGHTNESS:"Brightness",CONTRAST:"Contrast",HSV:"HueSaturationValue",WARMTH:"Warmth",BLUR:"Blur",THRESHOLD:"Threshold",POSTERIZE:"Posterize",PIXELATE:"Pixelate",NOISE:"Noise",FILTERS:"Filters",RECT:"Rect",ELLIPSE:"Ellipse",POLYGON:"Polygon",TEXT:"Text",LINE:"Line",IMAGE:"Image",ARROW:"Arrow",WATERMARK:"Watermark",PEN:"Pen",RESIZE:"Resize"},Kn={X:"X",Y:"Y"},De=1,nt=["png","jpeg","jpg","webp"],Xl=[].concat(nt,["svg","gif","avif","apng"]),vr=nt[0],we={DEFAULT:"default",DRAW:"crosshair",SELECT:"pointer",MOVE:"move",DRAG:"GRAB"},wi="original",Ei="custom",Me="ellipse",Q={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",MIDDLE_LEFT:"middle-left",MIDDLE_CENTER:"middle-center",MIDDLE_RIGHT:"middle-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"},wr={WIDTH:14,HEIGHT:14},Wn={AFTER_SAVE:"after-saving",CLOSE_BUTTON:"close-button-clicked",BACK_BUTTON:"back-button-clicked"},rt={WARNING:"warning",ERROR:"error"},Gl=function(r,e){e.ratio!==Me||2<arguments.length&&arguments[2]!==void 0&&arguments[2]?r.rect(e.x,e.y,e.width,e.height):r.ellipse(e.x+e.width/2,e.y+e.height/2,e.width/2,e.height/2,0,0,2*Math.PI)};function Er(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Sr(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Er(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Er(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Si="ADD_FILTER",Hl=function(r,e){return Sr(Sr({},r),{},{isDesignState:!e.dismissHistory,filter:e.filter||null})};function Tr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Pr(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Tr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Tr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var M,Xn="HIDE_LOADER",Yl=function(r){return Pr(Pr({},r),{},{isLoadingGlobally:!1})},Ti=(h(M={theme:{palette:{"bg-primary-active":"#ECF3FF"},typography:{fontFamily:"Roboto, Arial"}},annotationsCommon:{fill:"#000000",stroke:"#000000",strokeWidth:0,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"#000000",shadowOpacity:1,opacity:1}},E.TEXT,{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",fontFamily:"Arial",fonts:[{label:"Arial",value:"Arial"},"Tahoma","Sans-serif",{label:"Comic Sans",value:"Comic-sans"}],fontSize:14,letterSpacing:0,lineHeight:1,align:"left",fontStyle:"normal",onFontChange:void 0}),h(M,E.IMAGE,{fill:void 0}),h(M,E.RECT,{cornerRadius:0}),h(M,E.ELLIPSE,{}),h(M,E.POLYGON,{sides:3}),h(M,E.PEN,{strokeWidth:1,tension:.5,lineCap:"round"}),h(M,E.LINE,{lineCap:"butt",strokeWidth:1}),h(M,E.ARROW,{strokeWidth:6,lineCap:"butt",pointerLength:void 0,pointerWidth:void 0}),h(M,E.WATERMARK,{gallery:[]}),h(M,E.CROP,{minWidth:wr.WIDTH,minHeight:wr.HEIGHT,width:null,height:null,maxWidth:null,maxHeight:null,ratio:"original",ratioTitleKey:void 0,noPresets:!1,autoResize:!1,presetsItems:[],presetsFolders:[]}),h(M,"tabsIds",[]),h(M,"defaultTabId",X.ADJUST),h(M,"defaultToolId",E.CROP),h(M,"onClose",void 0),h(M,"onSave",void 0),h(M,"onBeforeSave",void 0),h(M,"closeAfterSave",!1),h(M,"defaultSavedImageName",void 0),h(M,"defaultSavedImageType",null),h(M,"forceToPngInEllipticalCrop",!1),h(M,"useBackendTranslations",!0),h(M,"translations",null),h(M,"language","en"),h(M,"avoidChangesNotSavedAlertOnLeave",!1),h(M,"loadableDesignState",null),h(M,"moreSaveOptions",[]),h(M,"savingPixelRatio",8),h(M,"previewPixelRatio",window&&window.devicePixelRatio||1),h(M,"showBackButton",!1),h(M,"useCloudimage",!1),h(M,"cloudimage",{token:"",dontPrefixUrl:!1,domain:"cloudimg.io",version:"",loadableQuery:"",secureProtocol:!0,imageSealing:{enable:!1,salt:"",charCount:10,includeParams:[]}}),h(M,"observePluginContainerSize",!1),h(M,"showCanvasOnly",!1),h(M,"getCurrentImgDataFnRef",void 0),h(M,"onModify",void 0),h(M,"useZoomPresetsMenu",!0),M);function Pi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=100<(e[t]+e[t+1]+e[t+2])/3?255:0;e[t]=o,e[t+1]=o,e[t+2]=o}}var _={brightness:function(r,e){return e=1<(e=e)?1:e,[r[0]+(e=~~(255*(e=e<-1?-1:e))),r[1]+e,r[2]+e]},contrast:function(r,e){return e=259*(255+(e*=255))/(255*(259-e)),[e*(r[0]-128)+128,e*(r[1]-128)+128,e*(r[2]-128)+128]},saturation:function(a,n){var n=(n=n)<-1?-1:n,t=a[0],o=a[1],a=a[2],i=.2989*t+.587*o+.114*a;return[-i*n+t*(1+n),-i*n+o*(1+n),-i*n+a*(1+n)]},grayscale:function(t){var e=t[0],n=t[1],t=t[2];return[,,,].fill(.2126*e+.7152*n+.0722*t)},sepia:function(o,e){var n=o[0],t=o[1],o=o[2];return[n*(1-.607*e)+.769*t*e+.189*o*e,.349*n*e+t*(1-.314*e)+.168*o*e,.272*n*e+.534*t*e+o*(1-.869*e)]},adjustRGB:function(r,e){return[r[0]*e[0],r[1]*e[1],r[2]*e[2]]},colorFilter:function(o,e){var n=o[0],t=o[1],o=o[2],a=e[3];return[n-(n-e[0])*a,t-(t-e[1])*a,o-(o-e[2])*a]}},Ul=.1,Vl=.1,ql=.15;function Ii(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.brightness([e[t],e[t+1],e[t+2]],Ul),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],Vl)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],ql)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Zl=.04,Jl=-.15;function ji(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.sepia([e[t],e[t+1],e[t+2]],Zl),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],Jl)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Ql=.1;function Ci(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.grayscale([e[t],e[t+1],e[t+2]]),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],Ql)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var eu=.08,tu=[1,1.03,1.05],nu=.12;function xi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.brightness([e[t],e[t+1],e[t+2]],eu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.adjustRGB([e[t],e[t+1],e[t+2]],tu)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],nu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var ru=.4,ou=.13,au=-.05;function _i(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.sepia([e[t],e[t+1],e[t+2]],ru),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],ou)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],au)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var iu=[1.01,1.04,1],su=.3;function Ni(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.adjustRGB([e[t],e[t+1],e[t+2]],iu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],su)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var cu=.1,lu=-.5;function Ai(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.brightness([e[t],e[t+1],e[t+2]],cu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],lu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var uu=[1.04,1,1.02],du=-.05;function ki(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.adjustRGB([e[t],e[t+1],e[t+2]],uu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],du)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var pu=.05,fu=-.03;function Ri(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.brightness([e[t],e[t+1],e[t+2]],pu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],fu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var gu=[228,130,225,.13],mu=-.2;function Li(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],gu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],mu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var hu=[1.05,1.1,1];function Fi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.adjustRGB([e[t],e[t+1],e[t+2]],hu),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Ou=.3,yu=.15;function Di(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.saturation([e[t],e[t+1],e[t+2]],Ou),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],yu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var bu=[230,115,108,.05],vu=.15;function Mi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],bu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],vu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var wu=[255,170,0,.1],Eu=.09,Su=.1;function $i(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],wu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],Eu)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],Su)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Tu=[1,1,1.25],Pu=.1,Iu=.15;function Bi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.adjustRGB([e[t],e[t+1],e[t+2]],Tu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],Pu)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],Iu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var ju=[255,225,80,.08],Cu=.1,xu=.05;function zi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],ju),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],Cu)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],xu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var _u=[255,255,0,.07],Nu=.2,Au=.15;function Ki(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],_u),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],Nu)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],Au)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var ku=-.15,Ru=.1;function Wi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.contrast([e[t],e[t+1],e[t+2]],ku),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],Ru)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Lu=[100,28,210,.03],Fu=.1;function Xi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.grayscale([e[t],e[t+1],e[t+2]]),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.colorFilter([e[t],e[t+1],e[t+2]],Lu)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],Fu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Du=.15,Mu=.2;function Gi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.contrast([e[t],e[t+1],e[t+2]],Du),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],Mu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var $u=.1,Bu=.15;function Hi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.contrast([e[t],e[t+1],e[t+2]],$u),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],Bu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var zu=[220,115,188,.12],Ku=-.05;function Yi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],zu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],Ku)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Wu=.1,Xu=.3;function Ui(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.brightness([e[t],e[t+1],e[t+2]],Wu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.sepia([e[t],e[t+1],e[t+2]],Xu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Gu=[255,225,0,.05],Hu=.06,Yu=.06;function Vi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],Gu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],Hu)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],Yu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Uu=[255,165,40,.2];function qi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],Uu),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Vu=.2,qu=[140,10,185,.1];function Zi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.contrast([e[t],e[t+1],e[t+2]],Vu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.colorFilter([e[t],e[t+1],e[t+2]],qu)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Zu=-.1,Ju=-.1;function Ji(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.brightness([e[t],e[t+1],e[t+2]],Zu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],Ju)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Qu=.1,ed=[255,145,0,.2];function Qi(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.sepia([e[t],e[t+1],e[t+2]],Qu),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.colorFilter([e[t],e[t+1],e[t+2]],ed)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var td=.1,nd=[255,255,0,.2];function es(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.brightness([e[t],e[t+1],e[t+2]],td),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.colorFilter([e[t],e[t+1],e[t+2]],nd)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var rd=[255,25,0,.15],od=.1;function ts(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],rd),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],od)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var ad=[255,140,0,.1],id=[1.15,1.05,1],sd=.35;function ns(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],ad),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.adjustRGB([e[t],e[t+1],e[t+2]],id)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],sd)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var cd=[225,240,0,.1],ld=.25,ud=.05;function rs(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],cd),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.saturation([e[t],e[t+1],e[t+2]],ld)),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],ud)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var dd=.06,pd=.1;function os(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.sepia([e[t],e[t+1],e[t+2]],dd),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],pd)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var fd=.35,gd=.1;function as(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.saturation([e[t],e[t+1],e[t+2]],fd),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],gd)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var md=.15,hd=.1;function is(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.contrast([e[t],e[t+1],e[t+2]],md),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],hd)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Od=[25,240,252,.05],yd=.3;function ss(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],Od),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.sepia([e[t],e[t+1],e[t+2]],yd)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var bd=[208,208,86,.2],vd=.15;function cs(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],bd),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],vd)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var wd=[255,160,25,.1],Ed=.1;function ls(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],wd),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.brightness([e[t],e[t+1],e[t+2]],Ed)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Sd=[255,50,80,.12],Td=.05;function us(r){for(var e=r.data,n=e.length,t=0;t<n;t+=4){var o=_.colorFilter([e[t],e[t+1],e[t+2]],Sd),o=T(o,3),o=(e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2],_.contrast([e[t],e[t+1],e[t+2]],Td)),o=T(o,3);e[t]=o[0],e[t+1]=o[1],e[t+2]=o[2]}}var Pd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",BlackAndWhite:Pi,Clarendon:Ii,Gingham:ji,Moon:Ci,Lark:xi,Reyes:_i,Juno:Ni,Slumber:Ai,Crema:ki,Ludwig:Ri,Aden:Li,Perpetua:Fi,Amaro:Di,Mayfair:Mi,Rise:$i,Hudson:Bi,Valencia:zi,XPro2:Ki,Sierra:Wi,Willow:Xi,LoFi:Gi,Hefe:Hi,Nashville:Yi,Stinson:Ui,Vesper:Vi,Earlybird:qi,Brannan:Zi,Sutro:Ji,Toaster:Qi,Walden:es,NinteenSeventySeven:ts,Kelvin:ns,Maven:rs,Ginza:os,Skyline:as,Dogpatch:is,Brooklyn:ss,Helena:cs,Ashby:ls,Charmes:us}),ds=function(r){return r?Pd[r]||U.Filters[r]:null};function ps(r){for(var e=this.warmth(),n=r.data,t=n.length,o=0;o<t;o+=4)n[o]+=e,n[o+2]-=e}function Id(r){for(var e=this.threshold(),n=r.data,t=n.length,o=0;o<t;o+=4)e!==0&&(n[o]=n[o]>=e?255:0,n[o+1]=n[o+1]>=e?255:0,n[o+2]=n[o+2]>=e?255:0)}St.addGetterSetter(U.Image,"warmth",0,hr(),St.afterSetFilter),St.addGetterSetter(U.Image,"threshold",0,hr,St.afterSetFilter);var jd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Warmth:ps,CustomThreshold:Id}),fs=function(r){return Array.isArray(r)&&0<r.length?r.map(function(e){return U.Filters[e]||jd[e]}):[]};function Ir(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function tn(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ir(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ir(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var gs=function(){var r,e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},n=tn({},e.loadableDesignState);return Array.isArray(n.finetunes)&&(n.finetunes=fs(n.finetunes)),n.filter&&(n.filter=ds(n.filter)),tn(tn({imgSrc:typeof e.source=="string"?e.source:((r=e.source)==null?void 0:r.src)||"",finetunes:[],finetunesProps:{},filter:null,adjustments:{crop:{ratio:e[E.CROP].ratio,ratioTitleKey:(r=e[E.CROP].ratioTitleKey)!=null?r:e[E.CROP].ratio,width:null,height:null,x:0,y:0},isFlippedX:!1,isFlippedY:!1,rotation:0},annotations:{},resize:{},shownImageDimensions:{}},n),{},{pointerCssIcon:we.DEFAULT,canvasScale:1,zoom:{factor:De,x:null,y:null},isLoadingGlobally:!0,selectionsIds:[],tabId:e.defaultTabId||null,toolId:e.defaultToolId||null,feedback:{},pastDesignStates:[],futureDesignStates:[],isResetted:!0,haveNotSavedChanges:!1,latestColor:void 0})},ot=function(r){var e=gs(Ti);return{imgSrc:r.imgSrc||e.imgSrc,finetunes:r.finetunes||e.finetunes,finetunesProps:r.finetunesProps||e.finetunesProps,filter:r.filter||e.filter,adjustments:r.adjustments||e.adjustments,annotations:r.annotations||e.annotations,resize:r.resize||e.resize}};function jr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function nn(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?jr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):jr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Gn="REDO",ms=function(r){var e,n,t;return r.futureDesignStates&&0<r.futureDesignStates.length?(t=ot(r),e=(n=ci(r.futureDesignStates))[0],n=n.slice(1),t=[t].concat(oe(r.pastDesignStates||[])),nn(nn(nn({},r),e),{},{selectionsIds:[],pastDesignStates:t,futureDesignStates:n,hasUndo:!0,hasRedo:0<n.length,haveNotSavedChanges:!0})):r};function Cr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function rn(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Cr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Cr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Hn="RESET",hs=function(r){var e=ot({imgSrc:r.imgSrc});return rn(rn(rn({},r),e),{},{selectionsIds:[],isResetted:!0,pastDesignStates:[],futureDesignStates:[],hasUndo:!1,hasRedo:!1,haveNotSavedChanges:!1})};function xr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function _r(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?xr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):xr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var $e="SET_FEEDBACK",Cd=function(r,e){return _r(_r({},r),{},{isLoadingGlobally:!1,feedback:e.feedback||{}})};function Nr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ar(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Nr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Nr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Yn="SHOW_LOADER",xd=function(r){return Ar(Ar({},r),{},{isLoadingGlobally:!0})},_d=k.div.withConfig({componentId:"sc-dwg14p-0"})(["padding:8px 1px 0;width:fit-content;margin:0 auto;max-width:99.5%;max-height:92px;[data-phone='true'] &{padding:0;margin-top:8px;max-height:initial;}"]),Nd=k.div.withConfig({componentId:"sc-dwg14p-1"})(["display:flex;align-items:center;overflow-x:auto;[data-phone='true'] &{background:",";}"],function(r){return r.theme.palette["bg-primary"]}),Ad=k.div.withConfig({componentId:"sc-dwg14p-2"})(function(r){return r=r.theme,`
    display: flex;
    border-radius: 2px;
    align-items: center;
    justify-content: center;
    padding: 8px;

    &:not(:last-child) {
      margin-right: 8px;
    }

    &,
    * {
      cursor: pointer;
    }

    &:hover {
      background: `.concat(r.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(r.palette["bg-primary-active"],`;

      * {
        color: `).concat(r.palette["accent-primary-active"],`;
      }
    }
  `)}),Un=k(H).withConfig({componentId:"sc-dwg14p-3"})(["margin-left:6px;"]),kd=k.div.withConfig({componentId:"sc-dwg14p-4"})(["position:relative;width:100%;transition:max-height 100ms ease-in-out;display:flex;justify-content:center;align-items:center;",";"],function(r){return`
      max-height: `.concat(r.hasChildren?"40px":0,`;
      margin: `).concat(r.hasChildren?"0 auto 8px":0,`;
    `)}),kr=function(s){var e=s.id,n=s.label,t=s.onClick,o=s.Icon,a=s.isSelected,i=s.children,s=s.className,l=b.exports.useCallback(function(d){t(e,d)},[]);return c.createElement(Ad,{className:s,onClick:l,"aria-selected":a},c.createElement(o,{size:16}),n&&c.createElement(Un,null,n),i)},ne=(kr.defaultProps={isSelected:!1,id:void 0,children:null,label:""},b.exports.memo(kr)),Os=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_brightness-tool-button",id:E.BRIGHTNESS,label:t("brightnessTool"),Icon:hc,onClick:e,isSelected:n})},Vn=(Os.defaultProps={isSelected:!1},b.exports.createContext({})),In={name:"Name",save:"Save",saveAs:"Save as",back:"Back",loading:"Loading...",resetOperations:"Reset/delete all operations",changesLoseConfirmation:"All changes will be lost",changesLoseConfirmationHint:"Are you sure you want to continue?",cancel:"Cancel",continue:"Continue",undoTitle:"Undo last operation",redoTitle:"Redo last operation",showImageTitle:"Show original image",zoomInTitle:"Zoom in",zoomOutTitle:"Zoom out",toggleZoomMenuTitle:"Toggle zoom menu",adjustTab:"Adjust",finetuneTab:"Finetune",filtersTab:"Filters",watermarkTab:"Watermark",annotateTab:"Draw",resize:"Resize",resizeTab:"Resize",invalidImageError:"Invalid image provided.",uploadImageError:"Error while uploading the image.",areNotImages:"are not images",isNotImage:"is not image",toBeUploaded:"to be uploaded",cropTool:"Crop",original:"Original",custom:"Custom",square:"Square",landscape:"Landscape",portrait:"Portrait",ellipse:"Ellipse",classicTv:"Classic TV",cinemascope:"Cinemascope",arrowTool:"Arrow",blurTool:"Blur",brightnessTool:"Brightness",contrastTool:"Contrast",ellipseTool:"Ellipse",unFlipX:"Un-Flip X",flipX:"Flip X",unFlipY:"Un-Flip Y",flipY:"Flip Y",hsvTool:"HSV",hue:"Hue",saturation:"Saturation",value:"Value",imageTool:"Image",importing:"Importing...",addImage:"+ Add image",lineTool:"Line",penTool:"Pen",polygonTool:"Polygon",sides:"Sides",rectangleTool:"Rectangle",cornerRadius:"Corner Radius",resizeWidthTitle:"Width in pixels",resizeHeightTitle:"Height in pixels",toggleRatioLockTitle:"Toggle ratio lock",reset:"Reset",resetSize:"Reset to original image size",rotateTool:"Rotate",textTool:"Text",textSpacings:"Text spacings",textAlignment:"Text alignment",fontFamily:"Font family",size:"Size",letterSpacing:"Letter Spacing",lineHeight:"Line height",warmthTool:"Warmth",addWatermark:"+ Add watermark",addWatermarkTitle:"Choose the watermark type",uploadWatermark:"Upload watermark",addWatermarkAsText:"Add as text",padding:"Padding",shadow:"Shadow",horizontal:"Horizontal",vertical:"Vertical",blur:"Blur",opacity:"Opacity",position:"Position",stroke:"Stroke",saveAsModalLabel:"Save the image as",extension:"Extension",nameIsRequired:"Name is required.",quality:"Quality",imageDimensionsHoverTitle:"Saved image size (width x height)",cropSizeLowerThanResizedWarning:"Note, the selected crop area is lower than the applied resize which might cause quality decrease",actualSize:"Actual size (100%)",fitSize:"Fit size"};function Rr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function jn(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Rr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Rr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Bt={},qn=jn({},In),Lr="Error while loading translations from backend.",ys=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"en";return Object.assign(qn,Bt[e==null?void 0:e.toLowerCase()]||{},r)},Rd=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return new Promise(function(e,n){var t=new XMLHttpRequest;t.responseType="json",t.onload=function(){var o;200<=t.status&&t.status<300?e(t.response):(console.warn("Error in sending translation key to backend ".concat((o=t.response)==null?void 0:o.hint,", ").concat(t.status)),n())},t.onerror=function(){var o;console.warn("Error in sending translation key to backend ".concat((o=t.response)==null?void 0:o.hint,", ").concat(t.status)),n()},t.open("POST","https://i18n.ultrafast.io/import/request-translations?grid_uuid=".concat(Pn)),t.send(JSON.stringify({grid_uuid:Pn,translations_requests:r}))})},Ld=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"en",e=1<arguments.length?arguments[1]:void 0;return new Promise(function(n,t){var o=r.toLowerCase(),a=new XMLHttpRequest;a.responseType="json",a.onload=function(){var i,s;200<=a.status&&a.status<300?((a.response||[]).forEach(function(l){Bt[o]=jn(jn({},Bt[o]),{},h({},l.translation_key,l.translations[o]))}),i=[],Object.keys(In).forEach(function(l){var d;!l||(d=Bt[o])!=null&&d[l]||i.push({key:l,lang:o,default:In[l]})}),0<i.length&&Rd(i),ys(e,o),n(qn)):(console.error("Status code: ".concat(a.status)),console.error(((s=a.response)==null?void 0:s.msg)||((s=a.response)==null?void 0:s.msg)||((s=a.response)==null?void 0:s.details)||Lr),t())},a.onerror=function(){console.error("Status code ".concat(a.status,", error: ").concat(Lr)),t()},a.open("GET","https://i18n.ultrafast.io/api/export?grid=".concat(Pn)),a.send()})},Fd=function(r){return qn[r]||r||""},Dd=function(r,e){return ya[e.type]&&ya[e.type](r,e.payload)||r};function Fr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Dr(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Fr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Fr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var on=!0,bs=function(s){var e=s.children,s=s.config,n=s===void 0?{}:s,s=Zd(Dd,gs(n),n),s=T(s,2),t=s[0],o=s[1],a=(b.exports.useEffect(function(){return on=!0,function(){on=!1}},[]),b.exports.useCallback(function(){on&&o.apply(void 0,arguments)},[o])),i=(b.exports.useEffect(function(){ys(n.translations,n.language)},[n.useBackendTranslations,n.language,n.translations]),Oc()),s=b.exports.useMemo(function(){return Dr(Dr({},t),{},{config:n,theme:i,dispatch:a,t:Fd})},[n,t]);return c.createElement(Vn.Provider,{value:s},e)},Md=(bs.defaultProps={config:{}},function(n){var e=n.children,n=n.overridingValue;return c.createElement(Vn.Provider,{value:n},e)}),D=function(){return b.exports.useContext(Vn)};function Mr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function $r(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Mr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Mr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Ie,vt=function(r,e){var n=D(),t=n.dispatch,o=n.finetunes,a=n.finetunesProps,i=b.exports.useCallback(function(s){t({type:Vs,payload:{finetune:r,finetuneProps:s}})},[]);return b.exports.useEffect(function(){o.includes(r)||i($r($r({},e),a))},[]),b.exports.useMemo(function(){return[a,i]},[a])},$d=function(){var r=D(),e=r.dispatch,n=r.filter,t=b.exports.useCallback(function(o){e({type:Si,payload:{filter:o}})},[]);return b.exports.useMemo(function(){return[n,t]},[n])},Jt=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return"".concat(r).concat(r?"-":"").concat(parseInt(Date.now()*Math.random(),10))},Qt=function(r){var e,n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:300;return function(){var t;clearTimeout(e);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];var s=a[0],l=a.slice(1);e=setTimeout(r.bind.apply(r,[null,(t=s==null||(t=s.target)==null?void 0:t.value)!=null?t:s].concat(oe(l))),n)}},Cn=function(){var r,e=document.body,n=document.documentElement;return{topOffset:((r=window)==null?void 0:r.pageYOffset)||n.scrollTop||e.scrollTop,leftOffset:((r=window)==null?void 0:r.pageXOffset)||n.scrollLeft||e.scrollLeft}},vs=function(e){if(!e)return null;var e=e.getBoundingClientRect(),a=document.body,n=Cn(),i=n.topOffset,n=n.leftOffset,o=document.documentElement,t=o.clientTop||a.clientTop||0,o=o.clientLeft||a.clientLeft||0,a=e.top+i-t,i=e.left+n-o;return{top:Math.round(a),left:Math.round(i),width:e.width,height:e.height}},ee=function(r){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0;return Math.min(Math.max(e,+r),n||1e6)},zt=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},e=e.parent,n=e.getStage(),t=n.attrs.zoomFactor,o=e.getRelativePointerPosition();return{offsetX:ee(o.x,0,r.width/(n.scaleX()/t))+e.attrs.xPadding,offsetY:ee(o.y,0,r.height/(n.scaleY()/t))+e.attrs.yPadding}},Br=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n={},t=(2<arguments.length?arguments[2]:void 0).parent.attrs;return n.x=Math.min(r.offsetX,e.startedX)-t.xPadding||0,n.y=Math.min(r.offsetY,e.startedY)-t.yPadding||0,n.width=r.offsetX-e.startedX,n.height=r.offsetY-e.startedY,n.startedX=e.startedX-t.xPadding||0,n.startedY=e.startedY-t.yPadding||0,n},Bd=["width","height","startedX","startedY"];function zr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Kr(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?zr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):zr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}h(Ie={},E.RECT,U.Rect),h(Ie,E.ELLIPSE,U.Ellipse),h(Ie,E.POLYGON,U.RegularPolygon),h(Ie,E.LINE,U.Line),h(Ie,E.IMAGE,U.Image),h(Ie,E.TEXT,U.Text),h(Ie,E.ARROW,U.Arrow);var zd=Ie,ws=[E.LINE,E.ARROW],Kd=[].concat(ws,[E.ELLIPSE,E.POLYGON]),Wr=function(r){var e;return new zd[r.name](Kr(Kr({},r),{},{opacity:(e=r.opacity)!=null?e:.7,x:(e=r.x)!=null?e:0,y:(e=r.y)!=null?e:0,width:Math.abs(r.width)||0,height:Math.abs(r.height)||0},ws.includes(r.name)?{stroke:r.stroke||"#000000"}:{}))},Wd=function(s,e,n){var t=s.width,o=s.height,a=s.startedX,i=s.startedY,s=Z(s,Bd),l=Math.abs(t),d=Math.abs(o),u=t<0,O=o<0;return e===E.RECT?n?(s.width=Math.sqrt(l*l+d*d),s.height=s.width,s.x-=u?s.width-l:0,s.y-=O?s.height-d:0):(s.width=l,s.height=d):e===E.ELLIPSE?(n?(s.radiusX=Math.sqrt(l*l+d*d)/2,s.radiusY=s.radiusX,s.x-=u?2*s.radiusX-l:0,s.y-=O?2*s.radiusY-d:0):(s.radiusX=l/2,s.radiusY=d/2),s.offsetX=-s.radiusX,s.offsetY=-s.radiusY):e===E.POLYGON?(s.radius=(l+d)/2,s.x-=u?2*s.radius-l:0,s.y-=O?2*s.radius-d:0,s.offsetX=-s.radius,s.offsetY=-s.radius):e===E.LINE||e===E.ARROW?(s.x=a,s.y=i,s.points=[0,0],n?s.points.push(d<=l?t:0,l<d?o:0):s.points=[0,0,t,o]):(s.width=l,s.height=d),s},Xd=["id","x","y","points"],Gd=["startedX","startedY","offsetX","offsetY","width","height"];function Xr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ke(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Xr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Xr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var fe={startedX:void 0,startedY:void 0,isOutOfCanvas:!1},se={passive:!0},lt=1,We=null,ut=null,ce=null,Hd=function(r,e,n,t){function o(p){p.evt.preventDefault(),p.target.attrs.draggable||1<((p=p.evt.touches)==null?void 0:p.length)||(d(),p=zt(n,a()),fe.startedX=p.offsetX,fe.startedY=p.offsetY,fe.isOutOfCanvas=!1,r.on("mousemove touchmove",u),r.on("mouseleave touchcancel",O),document.addEventListener("mouseup",S,se),document.addEventListener("touchend",S,se),document.addEventListener("mouseleave",S,se),document.addEventListener("touchcancel",S,se))}var a=function(){return vs(r.content)},i=function(p){We=Wr(p),n.add(We),p.name===E.TEXT&&(ut=Wr(Ke(Ke({},p),{},{name:E.RECT,fill:"",stroke:"#000000",strokeWidth:2,shadowColor:"#ffffff",shadowBlur:1,shadowOpacity:.7})),n.add(ut)),ce=p},s=function(p,y){p=Wd(p,ce.name,y),ut&&ut.setAttrs(p),We.setAttrs(p),ce=Ke(Ke({},ce),p)},l=function(p){var y=zt(n,a());s(Br(y,fe,n),p.shiftKey)},d=function(){n&&We&&n.destroyChildren()},u=function(p){var y;1<((y=p.evt.touches)==null?void 0:y.length)||(y=zt(n,a()),fe.isOutOfCanvas&&(document.removeEventListener("mousemove",l,se),document.removeEventListener("touchmove",l,se),fe.isOutOfCanvas=!1),y=Br(y,fe,n),We?s(y,p.evt.shiftKey):(e.id,e.x,e.y,e.points,p=Z(e,Xd),i(Ke(Ke({},p),y))))},O=function(){fe.isOutOfCanvas||(document.addEventListener("mousemove",l,se),document.addEventListener("touchmove",l,se),fe.isOutOfCanvas=!0)},S=function(){var p,y,v;d(),ce&&(ce.width>=lt&&ce.height>=lt||ce.radiusX>=lt&&ce.radiusY>=lt||(v=ce.points)!=null&&v[2]||(v=ce.points)!=null&&v[3]||ce.radius>=lt)&&((v=ce).startedX,v.startedY,v.offsetX,v.offsetY,p=v.width,y=v.height,v=Z(v,Gd),Kd.includes(e.name)||(v.width=p,v.height=y),t(v,!0)),ce=ut=We=null,r.off("mousemove touchmove",u),r.off("mouseleave touchcancel",O),document.removeEventListener("mouseup",S,se),document.removeEventListener("touchend",S,se),document.removeEventListener("mouseleave",S,se),document.removeEventListener("touchcancel",S,se),document.removeEventListener("mousemove",l,se),document.removeEventListener("touchmove",l,se),fe.isOutOfCanvas=!1};return r.on("mousedown touchstart",o),function(){d(),r.off("mousedown touchstart",o)}},Es=function(r,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:[];return b.exports.useCallback(Qt(r,e),n)},Yd=["fonts","onFontChange"],Ud=["x","y","width","height","radius","radiusX","radiusY","points","image","text","scaleX","scaleY","rotation"],Vd=["shouldSave","neverSave"];function Gr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Y(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Gr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Gr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var _e=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},e=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],l=D(),n=l.dispatch,t=l.previewGroup,o=l.annotations,s=l.selectionsIds,a=s===void 0?[]:s,s=l.config,i=Y(Y({},s.annotationsCommon),s[((l=o[a[0]])==null?void 0:l.name)||r.name]),s=b.exports.useState(function(){return Y(Y(Y({},i),r),o[a[0]])}),l=T(s,2),d=l[0],u=l[1],O=b.exports.useRef(),S=t==null?void 0:t.getStage(),p=b.exports.useCallback(function(m){m.fonts,m.onFontChange;var f=Z(m,Yd);n({type:Re,payload:f}),f.id&&r.name!==E.PEN&&Qt(function(){n({type:at,payload:{annotationId:f.id}})},30)()},[]),y=Es(function(m){u(function(f){return Y(Y({},f),{},{shouldSave:!1,neverSave:!1},typeof m=="function"?m(f):m)})},15),v=b.exports.useCallback(function(m,f){return m.name===f?(m.x,m.y,m.width,m.height,m.radius,m.radiusX,m.radiusY,m.points,m.image,m.text,m.scaleX,m.scaleY,m.rotation,f=Z(m,Ud),Y(Y(Y({},i),r),f)):Y(Y({},i),r)},[]),w=b.exports.useCallback(function(m){u(function(f){return Y(Y(Y({},v(f,m.name||r.name)),m),{},{id:m.id||Jt(m.name||f.name),shouldSave:!0,neverSave:!1})})},[]);return b.exports.useEffect(function(){var m=d.shouldSave,f=d.neverSave,I=Z(d,Vd),g=a.length===1&&o[a[0]];f||!m&&!g||p(Y(Y({},I),{},{id:(m?I:g).id}))},[d]),b.exports.useEffect(function(){setTimeout(function(){a.length===1?(O.current=d,u(Y(Y({},o[a[0]]),{},{neverSave:!0}))):O.current&&(u(Y(Y({},O.current),{},{neverSave:!0})),O.current=null)})},[a,o]),b.exports.useEffect(function(){var m,f=null;return S&&e&&(m=v(d,r.name),f=Hd(S,Y(Y({},m),{},{name:r.name}),t,w)),function(){f&&f()}},[S,d,t]),b.exports.useMemo(function(){return[d,y,w]},[d,y,w])};function Hr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function an(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Hr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Hr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Zn="UNDO",Ss=function(r){var e,n,t;return r.pastDesignStates&&0<r.pastDesignStates.length?(t=ot(r),e=(n=ci(r.pastDesignStates))[0],n=n.slice(1),t=[t].concat(oe(r.futureDesignStates||[])),an(an(an({},r),e),{},{selectionsIds:[],pastDesignStates:n,futureDesignStates:t,hasUndo:0<n.length,hasRedo:!0,haveNotSavedChanges:0<n.length})):r},qd=["isDesignState"];function Yr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Pt(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Yr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Yr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Ur,Zd=function(r,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},t=Pt(Pt({},e),{},{pastDesignStates:[],futureDesignStates:[],hasRedo:!1,hasUndo:!1});return b.exports.useReducer(function(o,a){var i,s=r(o,a)||t;return a.type===Zn?Ss(o)||o:a.type===Gn?ms(o)||o:a.type===Hn?hs(o)||o:s.isDesignState?(a=ot(o),s.isDesignState,i=Pt(Pt({},Z(s,qd)),{},{pastDesignStates:[a].concat(oe(o.pastDesignStates)),hasUndo:!0,hasRedo:!1,futureDesignStates:[],isResetted:!1,haveNotSavedChanges:!0}),Ur=setTimeout(function(){clearTimeout(Ur),typeof n.onModify=="function"&&n.onModify(i)}),i):s},t)},Jd=function(){var r=D(),e=r.tabId,n=r.dispatch,t=b.exports.useMemo(function(){return e!==X.ANNOTATE&&e!==X.WATERMARK},[e]),o=b.exports.useCallback(function(u){n({type:Re,payload:u})},[]),a=b.exports.useCallback(function(u){o({id:u.target.id(),x:u.target.x(),y:u.target.y()})},[]),i=b.exports.useCallback(function(u){var O={id:u.target.id(),rotation:u.target.rotation(),x:u.target.x(),y:u.target.y()};return u.target.name()===E.TEXT?(O.width=u.target.width()*u.target.scaleX(),O.height=u.target.height()*u.target.scaleY(),O.scaleX=1,O.scaleY=1):(O.scaleX=u.target.scaleX(),O.scaleY=u.target.scaleY()),O},[]),s=b.exports.useCallback(function(u){o(i(u))},[]),l=b.exports.useCallback(function(u){u.target.name()===E.TEXT&&u.target.setAttrs(i(u))}),d=b.exports.useCallback(function(u){var O;u.target.id()!==Ce&&(O=u.evt.ctrlKey||u.evt.shiftKey||u.evt.metaKey,n({type:at,payload:{annotationId:u.target.id(),multiple:O}}),n({type:qt,payload:{toolId:u.target.name(),keepSelections:O}}))},[]);return b.exports.useMemo(function(){return t?{}:{onTransform:l,onTransformEnd:s,onDragEnd:a,onClick:d,onTap:d}},[t])},Jn=function(){var r=b.exports.useRef(0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){}),e=b.exports.useRef(),n=b.exports.useCallback(function(l){l.forEach(function(d){var u,O;d.contentRect&&(u=(O=d.contentRect).width,O=O.height,r.current({entry:d,width:u,height:O}))})},[]),t=b.exports.useCallback(function(l){r.current=l},[]),o=b.exports.useCallback(function(){e.current||(e.current=new ResizeObserver(n))},[]),a=b.exports.useCallback(function(l,d){l&&(e.current||o(),e.current.observe(l),d&&(r.current=d))},[]),i=b.exports.useCallback(function(l,d){e.current&&l&&(e.current.unobserve(l),d&&(r.current=d))},[]),s=b.exports.useCallback(function(){e.current&&e.current.disconnect()},[]);return b.exports.useEffect(function(){return o(),s},[]),b.exports.useMemo(function(){return[a,i,t]},[])},Qn=function(){return window.matchMedia("(max-width: 438px)").matches},Oe=function(r,e,n,t,o){return(r-e)*(o-t)/(n-e)+t};function Vr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function sn(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Vr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Vr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Yt=function(r,e,n){var t;return sn(sn(sn({},r.x||r.x===0?{x:Math.round(Oe(r.x,0,e.width,0,n.width))}:{}),r.y||r.y===0?{y:Math.round(Oe(r.y,0,e.height,0,n.height))}:{}),{},{width:Math.round(Oe((t=r.width)!=null?t:e.width,0,e.width,0,n.width)),height:Math.round(Oe((t=r.height)!=null?t:e.height,0,e.height,0,n.height))})},xe=function(r,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,a=Math.abs(n),n=Math.round(n),i=90<a,t=i?e:r,o=i?r:e,i=(i?a-90:a)*Math.PI/180,a=Math.abs(Math.sin(i)),i=Math.abs(Math.cos(i));return{width:Math.round(t*i)+Math.round(o*a),height:Math.round(t*a)+Math.round(o*i),offsetTop:0<=n&&n<=90?0:n<0&&-90<n||90<n?t*a:o*i+t*a,offsetLeft:n<=0&&-90<=n?0:90<n?t*i+o*a:o*a}},Qd=function(r){var e,n;return r instanceof HTMLImageElement?(n=(e=document.createElement("canvas")).getContext("2d"),e.width=r.width,e.height=r.height,n.drawImage(r,0,0),e.toDataURL()):""},Ts=function(){var r,e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"",n=1<arguments.length?arguments[1]:void 0,t=e;return!n&&Xl.some(function(o){return e.lastIndexOf(".".concat(o))===e.length-".".concat(o).length})&&(n=(r=(r=e.slice(e.lastIndexOf(".")+1))==null?void 0:r.toLowerCase())&&nt.includes(r)?r:vr,t=e.slice(0,e.lastIndexOf("."))),n=n||vr,{fullName:"".concat(t,".").concat(n),name:t,extension:n}},be=function(r,e){return r<<e|r>>>32-e},dt=function(r){for(var e="",n=7;0<=n;n--)e+=(15&r>>>4*n).toString(16);return e},ep=function(r){for(var e,n=r.replace(/\r\n/g,`
`),t="",o=0;o<n.length;o++)(e=n.charCodeAt(o))<128?t+=String.fromCharCode(e):(127<e&&e<2048?t+=String.fromCharCode(192|e>>6):t=(t+=String.fromCharCode(224|e>>12))+String.fromCharCode(128|63&e>>6),t+=String.fromCharCode(128|63&e));return t},tp=function(r){for(var e,n,t,o,a,i,s,l,d=r,u=Array(80),O=1732584193,S=4023233417,p=2562383102,y=271733878,v=3285377520,w=(d=ep(d)).length,m=[],f=0;f<w-3;f+=4)n=d.charCodeAt(f)<<24|d.charCodeAt(f+1)<<16|d.charCodeAt(f+2)<<8|d.charCodeAt(f+3),m.push(n);switch(w%4){case 0:f=2147483648;break;case 1:f=8388608|d.charCodeAt(w-1)<<24;break;case 2:f=d.charCodeAt(w-2)<<24|d.charCodeAt(w-1)<<16|32768;break;case 3:f=d.charCodeAt(w-3)<<24|d.charCodeAt(w-2)<<16|d.charCodeAt(w-1)<<8|128}for(m.push(f);m.length%16!=14;)m.push(0);for(m.push(w>>>29),m.push(4294967295&w<<3),e=0;e<m.length;e+=16){for(f=0;f<16;f++)u[f]=m[e+f];for(f=16;f<=79;f++)u[f]=be(u[f-3]^u[f-8]^u[f-14]^u[f-16],1);for(t=O,o=S,a=p,i=y,s=v,f=0;f<=19;f++)l=4294967295&be(t,5)+(o&a|~o&i)+s+u[f]+1518500249,s=i,i=a,a=be(o,30),o=t,t=l;for(f=20;f<=39;f++)l=4294967295&be(t,5)+(o^a^i)+s+u[f]+1859775393,s=i,i=a,a=be(o,30),o=t,t=l;for(f=40;f<=59;f++)l=4294967295&be(t,5)+(o&a|o&i|a&i)+s+u[f]+2400959708,s=i,i=a,a=be(o,30),o=t,t=l;for(f=60;f<=79;f++)l=4294967295&be(t,5)+(o^a^i)+s+u[f]+3395469782,s=i,i=a,a=be(o,30),o=t,t=l;O=4294967295&O+t,S=4294967295&S+o,p=4294967295&p+a,y=4294967295&y+i,v=4294967295&v+s}return(l=dt(O)+dt(S)+dt(p)+dt(y)+dt(v)).toLowerCase()},np=function(r){return btoa(r).replace(/=*$/g,"")},rp=function(r,e){return tp(r).slice(0,e)},op=function(r,e,n,t){return r=np(r),e=rp(e+r+n,t),[e?"ci_seal=".concat(e):"",r?"ci_eqs=".concat(r):""].filter(function(o){return o}).join("&")},ap=function(r,s,n){var s=s||{},t=s.salt,o=s.charCount,s=s.includeParams,a=s===void 0?[]:s,i=!a||(a==null?void 0:a.length)===0,s="",l=[],d=[];return r.split("&").forEach(function(u){var O=u.split("="),O=T(O,1)[0];(-1<(a==null?void 0:a.indexOf(O))||i?l:d).push(u)}),0<d.length&&(s=d.join("&")),[op(l.join("&"),n,t,o),s].filter(function(u){return u}).join("&")},G=function(r){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:5;return r&&+parseFloat(r).toFixed(e)},ip=["width","height","x","y","opacity","scaleX","scaleY"];function qr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Zr(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?qr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):qr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var sp=function(r,i,t){var i=Yt(r,i,t),t=i.x,o=i.y,a=i.width,i=i.height;return"tl_px=".concat(t,",").concat(o,"&br_px=").concat(t+a,",").concat(o+i).concat(r.ratio===Me?"&radius=".concat(Math.max(a,i),"&force_format=png"):"")},cp=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},r=e.width,e=e.height;return"w=".concat(r,"&h=").concat(e)},lp=function(r){return"r=".concat(-r)},up=function(r,e){return"flip=".concat(r?"x":"").concat(e?"y":"")},dp=function(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},u=1<arguments.length?arguments[1]:void 0,e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},n=r.width,t=r.height,o=r.x,a=r.y,O=r.opacity,i=r.scaleX,i=i===void 0?1:i,s=r.scaleY,s=s===void 0?1:s,l=Z(r,ip),d=u.width*u.scaledBy,u=u.height*u.scaledBy,O="wat=1&wat_gravity=absolute&wat_opacity=".concat(O,"&wat_pos=").concat(Math.floor((o-(e.x||0))/d*100,2),"p,").concat(Math.floor((a-(e.y||0))/u*100,2),"p");return r.name===E.TEXT?"".concat(O,"&wat_text=").concat(l.text.replaceAll(`
`,""),"&wat_font=").concat(l.fontFamily,"&wat_color=").concat(l.fill.replace("#",""),"&wat_fontsize=").concat(l.fontSize,"max"):(a=((o=l.image)==null?void 0:o.src)||l.image,e=!a.startsWith("blob:")&&a,"".concat(O,"&wat_scale=").concat(G(n*i/d*100,2),"p,").concat(G(t*s/u*100,2),"p").concat(e?"&wat_url=".concat(encodeURIComponent(e)):""))},Kt={Brighten:{cloudimage:{name:"bright",min:-100,max:100},internal:{propName:"brightness",min:-1,max:1}},Contrast:{cloudimage:{name:"contrast",min:-100,max:100},internal:{propName:"contrast",min:-100,max:100}},Blur:{cloudimage:{name:"blur",min:0,max:100},internal:{propName:"blurRadius",min:0,max:100}}},pp=function(r){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=[];return r.forEach(function(a){var o,a=a.name&&Kt[a.name];a&&(o=G(Oe(e[a.internal.propName],a.internal.min,a.internal.max,a.cloudimage.min,a.cloudimage.max),2),n.push("".concat(a.cloudimage.name,"=").concat(o)))}),n.join("&")},fp=function(v,y,n,t){var w=v.token,m=v.domain,o=v.dontPrefixUrl,f=v.version,a=v.imageSealing,v=v.secureProtocol,i=y.imgSrc,u=y.adjustments,s=u.crop,l=u.rotation,d=u.isFlippedX,u=u.isFlippedY,O=y.resize,O=O===void 0?{}:O,S=y.finetunes,S=S===void 0?{}:S,p=y.finetunesProps,y=y.annotations,y=y===void 0?{}:y,v=o?"":"http".concat(v?"s":"","://").concat(w,".").concat(m.replace(/^(https?:\/\/)?(www\.)?|^\.|\/$/g,""),"/").concat(f?"".concat(f,"/"):""),w=[],m=(s.width&&s.height&&(s.x||s.x===0)&&(s.y||s.y===0)&&w.push(sp(s,n,t)),(O.width||O.height)&&w.push(cp(Zr(Zr({},t),O))),l&&w.push(lp(l)),(d||u)&&w.push(up(d,u)),0<S.length&&p&&w.push(pp(S,p)),y[Ce]&&w.push(dp(y[Ce],n,s)),w.push("ci_url_encoded=1"),w.join("&")),f=(m=(m=a.enable?ap(m,a,i):m).replaceAll(" ","+"),o&&i.indexOf("?")!==-1?"&":"?");return"".concat(v).concat(o?i:encodeURIComponent(i)).concat(m?"".concat(f).concat(m.replace(/&$/,"")):"")},gp=["filter"];function Jr(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Xe(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Jr(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Jr(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Ps=function(){var r=D(),e=r.dispatch,n=r.designLayer,t=r.shownImageDimensions,o=r.originalImage,y=r.adjustments,a=y.crop,d=y.rotation,i=d===void 0?0:d,s=y.isFlippedX,l=y.isFlippedY,d=r.config,u=d.savingPixelRatio,O=d.previewPixelRatio,S=d.forceToPngInEllipticalCrop,p=d.defaultSavedImageType,y=d.useCloudimage,v=d.cloudimage;return y?function(){var w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},m=ot(r),m=(m.filter,Z(m,gp)),f=fp(v,m,t,o),I=Yt({x:a.x,y:a.y,width:a.width,height:a.height},t,o);return{imageData:{cloudimageUrl:f,width:(w==null||(f=w.size)==null?void 0:f.width)||I.width,height:(w==null||(f=w.size)==null?void 0:f.height)||I.height},designState:m}}:function(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},C=(U.pixelRatio=1<arguments.length&&arguments[1]!==void 0&&arguments[1]||u,n.attrs),B=C.clipWidth,N=C.clipHeight,j=C.clipX,C=C.clipY,x=(n.setAttr("isSaving",!0),n.getStage().clone({width:o.width,height:o.height,scaleX:s?-1:1,scaleY:l?-1:1})),g=T(x.children,1)[0],w=(x.children[1].destroy(),x.findOne("#".concat(bi))),m=(w.cache(),{x:x.width()/t.width,y:x.height()/t.height}),g=(g.setAttrs({rotation:0,offsetX:0,offsetY:0,x:0,y:0,scaleX:m.x,scaleY:m.y}),Xe(Xe({},(!f.name||!f.extension)&&Ts(o.name,S&&a.ratio===Me?"png":nt.includes(p==null?void 0:p.toLowerCase())&&p)),f)),m=g.name,f=g.extension,I=g.quality,I=I===void 0?92:I,g=g.size,g=g===void 0?{}:g,P=["jpeg","jpg","webp"].includes(f),j=Yt({x:a.x||j,y:a.y||C,width:a.width||B,height:a.height||N},t,x.attrs),C=xe(j.width,j.height,i),C=(x.setAttrs({offsetX:j.width/2+j.x,offsetY:j.height/2+j.y,width:C.width,height:C.height,x:C.width/2,y:C.height/2,rotation:i}),g.width&&(B=(s?-1:1)*(g.width/x.width()),x.setAttrs({scaleX:B,width:g.width,x:x.x()*Math.abs(B)})),g.height&&(N=(l?-1:1)*(g.height/x.height()),x.setAttrs({scaleY:N,height:g.height,y:x.y()*Math.abs(N)})),Xe({mimeType:"image/".concat(f==="jpg"?"jpeg":f)},P?{quality:I}:{})),B=x.toCanvas(C),N=x.toDataURL(C),L=Xe(Xe({},ot(r)),{},{shownImageDimensions:{width:r.shownImageDimensions.width,height:r.shownImageDimensions.height,scaledBy:r.shownImageDimensions.scaledBy}}),x=(L.filter&&(L.filter=L.filter.name),L.finetunes=L.finetunes.map(function(A){return A.name}),Object.keys(L.annotations).forEach(function(A){var R=L.annotations[A],$=R.name===E.IMAGE&&(($=R.image)==null?void 0:$.src);$&&$.startsWith("blob:")?L.annotations[A].image=Qd(R.image):R.image instanceof HTMLImageElement&&(L.annotations[A].image=$)}),Xe({fullName:"".concat(m,".").concat(f),name:m,extension:f,mimeType:"image/".concat(f),imageCanvas:B,imageBase64:N,width:g.width||j.width,height:g.height||j.height},P?{quality:I}:{}));return n.setAttr("isSaving",!1),e({type:nc}),w.clearCache(),U.pixelRatio=O,e({type:Xn}),{imageData:x,designState:L}}},mp=k(yc).withConfig({componentId:"sc-1wort0h-0"})(["width:",";max-width:",";user-select:none;margin-bottom:24px;.SfxSlider-annotation{font-size:13px;line-height:16px;}"],function(r){return r.width||"100px"},function(r){return r.width||"100px"}),hp=["onChange"],te=function(n){var e=n.onChange,n=Z(n,hp);return c.createElement(mp,ae({annotation:"",onChange:function(t,o){return e?e(o):void 0}},n))},Qr=-1,eo={brightness:0},to=1,Op={width:150,padding:0},yp=function(){var r=vt(U.Filters.Brighten,eo),r=T(r,2),e=r[0],n=r[1];return c.createElement(te,{className:"FIE_brightness-option",min:Qr,step:.05,max:to,value:(r=e.brightness)!=null?r:eo.brightness,onChange:function(t){n({brightness:ee(t,Qr,to)})},style:Op})},Ut=function(r,e){return Math.min(r.width/e.width,r.height/e.height)||De},bp=k(Le).withConfig({componentId:"sc-ldar2z-0"})(["margin:0 0 0 6px;padding:0;"]),vp=k.div.withConfig({componentId:"sc-ldar2z-1"})(["margin-right:6px;svg,span{vertical-align:middle;}"]),wp=k(H).withConfig({componentId:"sc-ldar2z-2"})(["margin-left:4px;cursor:pointer;"]),Ep=[{titleKey:"original",ratio:wi,icon:bc},{titleKey:"custom",ratio:Ei,icon:vc},{titleKey:"landscape",descriptionKey:"16:9",ratio:G(16/9),icon:wc},{titleKey:"portrait",descriptionKey:"9:16",ratio:G(9/16),icon:Ec},{titleKey:"ellipse",ratio:Me,icon:Sc}],Sp={height:16,width:16},er=function(r){var e=r.titleKey,n=r.description,t=r.ratio,o=r.onClick,a=r.Icon,i=r.isActive,s=r.width,l=r.height,d=r.t,u=r.disableManualResize;return c.createElement(st,{active:i,onClick:function(O){return o(O,t,{ratioTitleKey:e,width:s,height:l,disableManualResize:u})},size:"sm"},a&&c.createElement(vp,null,typeof a=="string"?c.createElement("span",{dangerouslySetInnerHTML:{__html:a}}):c.createElement(a,Sp)),d(e),n&&c.createElement(wp,null,n))};function no(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ro(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?no(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):no(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}er.defaultProps={Icon:void 0,width:void 0,height:void 0,disableManualResize:!1};var Tp=function(l){function e(S,p,y){o(S,p,ro(ro({},y),{},{ratioGroupKey:n}))}var n=l.groupTitleKey,t=l.items,o=l.onItemSelect,a=l.t,i=l.isExpanded,s=l.setExpandedGroup,l=D().adjustments.crop,d=l.ratio,u=l.ratioGroupKey,O=l.ratioTitleKey;return c.createElement(Tc,{label:a(n),onChange:function(){s(i?null:n)},expanded:i},t.map(function(f){var p=f.titleKey,I=f.ratio,y=f.width,v=f.height,w=f.descriptionKey,m=f.icon,f=f.disableManualResize,I=I!=null?I:G(y/v);return c.createElement(er,{key:p,titleKey:p,t:a,description:a(w),size:"sm",onClick:e,width:y,height:v,ratio:I,Icon:m,disableManualResize:f,isActive:d===I&&O===p&&u===n})}))};function oo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ao(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?oo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):oo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var ge,Is=function(u){function e(p,y,v){a(p,y,ao(ao({},v),{},{ratioFolderKey:n}))}var n=u.titleKey,t=u.Icon,o=u.groups,a=u.onItemSelect,i=u.prefixIconDimensions,s=u.t,u=D().adjustments.crop,l=u.ratioFolderKey,d=u.ratioGroupKey,u=b.exports.useState(""),u=T(u,2),O=u[0],S=u[1];return c.createElement(st,{size:"sm",list:[{content:s(n),key:n,active:n===l,prefix:t&&(typeof t=="string"?c.createElement("span",{dangerouslySetInnerHTML:{__html:t}}):c.createElement(t,i)),subList:o.map(function(v){var y=v.titleKey,v=v.items;return{content:c.createElement(Tp,{groupTitleKey:y,setExpandedGroup:S,isExpanded:O===""?d===y:O===y,t:s,items:v,onItemSelect:e}),key:y,disableHover:!0}})}]})},Pp=(Is.defaultProps={Icon:void 0},{height:16,width:16}),io=function(o){function e(p,y,v){p.stopPropagation(),p={ratio:y,ratioTitleKey:v.ratioTitleKey,ratioGroupKey:v.ratioGroupKey,ratioFolderKey:v.ratioFolderKey},a({type:sr,payload:p}),O.autoResize&&(a({type:tt,payload:{width:v.width,height:v.height,manualChangeDisabled:v.disableManualResize}}),a({type:it,payload:{factor:v.width>u.width||v.height>u.height?Ut(u,v):De}})),t()}var n=o.anchorEl,t=o.onClose,o=D(),a=o.dispatch,i=o.t,S=o.adjustments,S=(S=S===void 0?{}:S).crop,s=(S=S===void 0?{}:S).ratio,l=S.ratioTitleKey,d=S.ratioFolderKey,u=o.shownImageDimensions,O=o.config[E.CROP],S=b.exports.useMemo(function(){var p=O.presetsItems,p=p===void 0?[]:p,y=O.presetsFolders;return[].concat(oe(y===void 0?[]:y),oe(Ep),oe(p))},[O]);return c.createElement(c.Fragment,null,c.createElement(Un,{className:"FIE_crop-tool-label FIE_selected-crop-preset-label"},i(l||"cropTool")),c.createElement(bp,{className:"FIE_crop-presets-opener-button",color:"link",size:"lg"},n?c.createElement(c.Fragment,null,"\u25B4"):c.createElement(c.Fragment,null,"\u25BE")),c.createElement(bt,{className:"FIE_crop-presets-menu",anchorEl:n,enableOverlay:!0,onClose:t,open:!!n,position:"top"},S.map(function(P){var y=P.titleKey,v=P.descriptionKey,w=P.ratio,m=P.width,f=P.height,I=P.groups,g=P.icon,P=P.disableManualResize;return I?c.createElement(Is,{key:y,titleKey:y,groups:I,Icon:g,onItemSelect:e,prefixIconDimensions:Pp,t:i,disableManualResize:P}):c.createElement(er,{key:w,ratio:w!=null?w:G(m/f),titleKey:y,t:i,description:i(v),Icon:g,isActive:s===(w!=null?w:G(m/f))&&!d,width:m,height:f,onClick:e,disableManualResize:P})})))},js=(io.defaultProps={anchorEl:null},function(n){var e=n.selectTool,n=n.isSelected,o=D(),t=o.config,o=o.t,a=b.exports.useState(),a=T(a,2),i=a[0],s=a[1];return c.createElement(ne,{className:"FIE_crop-tool",id:E.CROP,Icon:Pc,onClick:function(l,d){e(l),s(d.currentTarget)},isSelected:n},t[E.CROP].noPresets?c.createElement(Un,{className:"FIE_crop-tool-label"},o("cropTool")):c.createElement(io,{anchorEl:i,onClose:function(){s(null)}}))}),Ip=(js.defaultProps={isSelected:!1},{transform:"scaleX(-1)"}),Cs=function(s){var e=s.selectTool,n=s.isSelected,t=s.t,s=D(),o=s.dispatch,a=s.adjustments.isFlippedX,s=b.exports.useMemo(function(){return{reverseLabelOfCurrXFlipDir:t(a?"unFlipX":"flipX"),reverseIconOfCurrXFlipDir:function(){return c.createElement(Ic,{style:a?Ip:void 0})}}},[a]),i=s.reverseLabelOfCurrXFlipDir,s=s.reverseIconOfCurrXFlipDir,l=b.exports.useCallback(function(){o({type:ir,payload:{direction:Kn.X}})},[]),d=b.exports.useCallback(function(u){e(u),l()},[]);return c.createElement(ne,{className:"FIE_flip-x-tool-button",id:E.FLIP_X,label:i,Icon:s,onClick:d,isSelected:n})},jp=(Cs.defaultProps={isSelected:!1},{transform:"scaleY(-1)"}),xs=function(s){var e=s.selectTool,n=s.isSelected,t=s.t,s=D(),o=s.dispatch,a=s.adjustments.isFlippedY,s=b.exports.useMemo(function(){return{reverseLabelOfCurrXFlipDir:t(a?"unFlipY":"flipY"),reverseIconOfCurrXFlipDir:function(){return c.createElement(jc,{style:a?jp:void 0})}}},[a]),i=s.reverseLabelOfCurrXFlipDir,s=s.reverseIconOfCurrXFlipDir,l=b.exports.useCallback(function(){o({type:ir,payload:{direction:Kn.Y}})},[]),d=b.exports.useCallback(function(u){e(u),l()},[]);return c.createElement(ne,{className:"FIE_flip-y-tool-button",id:E.FLIP_Y,label:i,Icon:s,onClick:d,isSelected:n})},_s=(xs.defaultProps={isSelected:!1},function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_rotate-tool-button",id:E.ROTATE,label:t("rotateTool"),Icon:Cc,onClick:e,isSelected:n})}),Cp=(_s.defaultProps={isSelected:!1},function(){var t=D(),r=t.dispatch,e=t.adjustments.rotation,e=e===void 0?0:e,t=t.resize,n=t===void 0?{}:t,t=Es(function(o,i){var i=ee(i,-180,180);r({type:qs,payload:{rotation:i}}),n.width&&n.height&&(i=xe(n.width,n.height,i),r({type:tt,payload:{width:i.width,height:i.height}}))},20);return c.createElement(xc,{className:"FIE_rotate-slider",min:-180,max:180,value:e,angle:60,onChange:t,style:{marginBottom:20}})}),Ns=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_contrast-tool-button",id:E.CONTRAST,label:t("contrastTool"),Icon:_c,onClick:e,isSelected:n})},so=(Ns.defaultProps={isSelected:!1},-100),co={contrast:0},lo=100,xp={width:150,padding:0},_p=function(){var r=vt(U.Filters.Contrast,co),r=T(r,2),e=r[0],n=r[1];return c.createElement(te,{className:"FIE_contrast-option",min:so,max:lo,value:(r=e.contrast)!=null?r:co.contrast,onChange:function(t){n({contrast:ee(t,so,lo)})},style:xp})},As=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_hsv-tool-button",id:E.HSV,label:t("hsvTool"),Icon:Nc,onClick:e,isSelected:n})},cn=(As.defaultProps={isSelected:!1},k.div.withConfig({componentId:"sc-tm5uj2-0"})(["margin:6px;"])),It={hue:0,saturation:0,value:0},ln={padding:0},Np=function(n){function e(i,s){a(h({},i,+s))}var n=n.t,t=vt(U.Filters.HSV,It),t=T(t,2),o=t[0],a=t[1];return c.createElement(c.Fragment,null,c.createElement(cn,{className:"FIE_hue-option-wrapper"},c.createElement(H,{className:"FIE_hue-option-label"},n("hue")),c.createElement(te,{className:"FIE_hue-option",min:0,step:1,max:259,value:(t=o.hue)!=null?t:It.hue,onChange:function(i){return e("hue",i)},style:ln})),c.createElement(cn,{className:"FIE_saturation-option-wrapper"},c.createElement(H,{className:"FIE_saturation-option-label"},n("saturation")),c.createElement(te,{className:"FIE_saturation-option",min:-2,step:.5,max:10,value:(t=o.saturation)!=null?t:It.saturation,onChange:function(i){return e("saturation",i)},style:ln})),c.createElement(cn,{className:"FIE_value-option-wrapper"},c.createElement(H,{className:"FIE_value-option-label"},n("value")),c.createElement(te,{className:"FIE_value-option",min:-2,step:.1,max:2,value:(t=o.value)!=null?t:It.value,onChange:function(i){return e("value",i)},style:ln})))},ks=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_blur-tool-button",id:E.BLUR,label:t("blurTool"),Icon:Ac,onClick:e,isSelected:n})},uo=(ks.defaultProps={isSelected:!1},0),po={blurRadius:0},fo=100,Ap={width:150,padding:0},kp=function(){var r=vt(U.Filters.Blur,po),r=T(r,2),e=r[0],n=r[1];return c.createElement(te,{className:"FIE_blur-option",min:uo,max:fo,value:(r=e.blurRadius)!=null?r:po.blurRadius,onChange:function(t){n({blurRadius:ee(t,uo,fo)})},style:Ap})},Rs=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_warmth-tool-button",id:E.WARMTH,label:t("warmthTool"),Icon:kc,onClick:e,isSelected:n})},go=(Rs.defaultProps={isSelected:!1},0),mo={warmth:0},ho=200,Rp={width:150,padding:0},Lp=function(){var r=vt(ps,mo),r=T(r,2),e=r[0],n=r[1];return c.createElement(te,{className:"FIE_warmth-option",min:go,max:ho,value:(r=e.warmth)!=null?r:mo.warmth,onChange:function(t){n({warmth:ee(t,go,ho)})},style:Rp})},Fp=k.div.withConfig({componentId:"sc-1nr0bka-0"})(["max-width:680px;min-width:150px;position:relative;overflow:hidden;touch-action:pan-y pinch-zoom;"]),Dp=k.ul.withConfig({componentId:"sc-1nr0bka-1"})(["padding:0;margin:0;white-space:nowrap;overflow:hidden;"]),Mp=k.li.withConfig({componentId:"sc-1nr0bka-2"})(["padding:4px;display:inline-block;list-style-type:none;user-select:none;"]),$p=k.div.withConfig({componentId:"sc-1nr0bka-3"})([""," left:0;background:linear-gradient( 90deg,#ffffff 1.56%,rgba(255,255,255,0.93) 70%,rgba(255,255,255,0) 100% );svg{transform:scaleX(-1);}"],`
  position: absolute;
  top: 0;
  height: 100%;
  width: 30px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
`),Bp=k.div.withConfig({componentId:"sc-1nr0bka-4"})([""," background:linear-gradient( 270deg,#ffffff 1.56%,rgba(255,255,255,0.93) 70%,rgba(255,255,255,0) 100% );right:0;"],`
  position: absolute;
  top: 0;
  height: 100%;
  width: 30px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
`),tr=function(p){function e(m,f){var I=m.findIndex(function(g){return g.classList.contains("FIE_carousel-item")});I!==-1&&(m[I].scrollIntoView({inline:f,behavior:"smooth",block:"nearest"}),setTimeout(function(){y()},500))}function n(m){var f;i.current=(((f=m.touches)==null?void 0:f[0])||m).pageX,document.addEventListener("mousemove",v),document.addEventListener("mouseup",w),document.addEventListener("touchmove",v),document.addEventListener("touchcancel",w),document.addEventListener("touchend",w)}var t=p.children,o=p.style,a=p.className,i=b.exports.useRef(!1),s=b.exports.useRef(),p=Jn(),l=T(p,1)[0],p=b.exports.useState(!1),p=T(p,2),d=p[0],u=p[1],p=b.exports.useState(!1),p=T(p,2),O=p[0],S=p[1],p=b.exports.Children.toArray(t),y=function(){var m,f,I;s.current&&(f=(m=s.current).scrollWidth,I=m.offsetWidth,m=m.scrollLeft,f=Math.round(f-I),I=Math.round(f-m),u(0<m),S(0<I))},v=function(m){var f;i.current&&(f=(((f=m.touches)==null?void 0:f[0])||m).pageX,s.current.scrollBy(i.current-f,0),i.current=f,Qt(y,30)())},w=function(){i.current=null,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",v),document.removeEventListener("touchcancel",w),document.removeEventListener("touchend",w)};return b.exports.useEffect(function(){s.current&&l(s.current,y)},[]),c.createElement(Fp,{className:"".concat(a,"-wrapper"),style:o,onMouseDown:n,onTouchStart:n},d&&c.createElement($p,{className:"FIE_carousel-prev-button",onClick:function(m){var I=Cn(),f=I.topOffset,I=I.leftOffset,I=document.elementsFromPoint(m.pageX+m.currentTarget.offsetWidth-I,m.pageY-f);e(I,"end")}},c.createElement(Or,null)),c.createElement(Dp,{className:"".concat(a,"-items"),ref:s},p.map(function(m){return c.createElement(Mp,{className:"".concat(a,"-item-wrapper FIE_carousel-item"),key:m.key},m)})),O&&c.createElement(Bp,{className:"FIE_carousel-next-button",onClick:function(m){var I=Cn(),f=I.topOffset,I=I.leftOffset,I=document.elementsFromPoint(m.pageX-m.currentTarget.offsetWidth-I,m.pageY-f);e(I,"start")}},c.createElement(Or,null)))},zp=(tr.defaultProps={style:null},k.div.withConfig({componentId:"sc-oxugzy-0"})(["display:inline-flex;flex-direction:column;align-items:center;justify-content:center;margin:0 4px;padding:2px;cursor:pointer;border-radius:2px;canvas{border-radius:2px;}"])),Kp=k(li).withConfig({componentId:"sc-oxugzy-1"})(["[aria-selected='true'] &{padding:1px;border:2px solid ",";border-radius:2px;}"],function(r){return r.theme.palette["accent-primary-active"]}),Wp=k(H).withConfig({componentId:"sc-oxugzy-2"})(["margin-top:6px;font-size:11px;line-height:12px;[aria-selected='true'] &{color:",";}"],function(r){return r.theme.palette["accent-primary-active"]}),Oo=60,yo=45,bo=function(s){var e=s.filterLabel,n=s.filterFn,t=s.applyFilter,o=s.isActive,a=s.image,i=b.exports.useRef(),s=b.exports.useCallback(function(){t(n)},[n]),l=b.exports.useCallback(function(){i.current?i.current.cache():setTimeout(l,0)},[]);return b.exports.useEffect(function(){return a&&l(),function(){var d;(d=i.current)!=null&&d.clearCache()}},[a]),c.createElement(zp,{className:"FIE_filters-item",onClick:s,"aria-selected":o},c.createElement(Kp,{className:"FIE_filters-item-preview",width:Oo,height:yo},c.createElement($n,{onTap:s},c.createElement(Zt,{image:a,filters:n?[n]:[],width:Oo,height:yo,x:0,y:0,ref:i}))),c.createElement(Wp,{className:"FIE_filters-item-label"},e))},Xp=(bo.defaultProps={filterFn:void 0},b.exports.memo(bo)),jt=U.Filters,Gp=[{label:"Original",filterFn:null},{label:"Invert",filterFn:jt.Invert},{label:"Black & White",filterFn:Pi},{label:"Sepia",filterFn:jt.Sepia},{label:"Solarize",filterFn:jt.Solarize},{label:"Clarendon",filterFn:Ii},{label:"Gingham",filterFn:ji},{label:"Moon",filterFn:Ci},{label:"Lark",filterFn:xi},{label:"Reyes",filterFn:_i},{label:"Juno",filterFn:Ni},{label:"Slumber",filterFn:Ai},{label:"Crema",filterFn:ki},{label:"Ludwig",filterFn:Ri},{label:"Aden",filterFn:Li},{label:"Perpetua",filterFn:Fi},{label:"Amaro",filterFn:Di},{label:"Mayfair",filterFn:Mi},{label:"Rise",filterFn:$i},{label:"Hudson",filterFn:Bi},{label:"Valencia",filterFn:zi},{label:"X-Pro II",filterFn:Ki},{label:"Sierra",filterFn:Wi},{label:"Willow",filterFn:Xi},{label:"Lo-Fi",filterFn:Gi},{label:"Inkwell",filterFn:jt.Grayscale},{label:"Hefe",filterFn:Hi},{label:"Nashville",filterFn:Yi},{label:"Stinson",filterFn:Ui},{label:"Vesper",filterFn:Vi},{label:"Earlybird",filterFn:qi},{label:"Brannan",filterFn:Zi},{label:"Sutro",filterFn:Ji},{label:"Toaster",filterFn:Qi},{label:"Walden",filterFn:es},{label:"1977",filterFn:ts},{label:"Kelvin",filterFn:ns},{label:"Maven",filterFn:rs},{label:"Ginza",filterFn:os},{label:"Skyline",filterFn:as},{label:"Dogpatch",filterFn:is},{label:"Brooklyn",filterFn:ss},{label:"Helena",filterFn:cs},{label:"Ashby",filterFn:ls},{label:"Charmes",filterFn:us}],Hp={maxWidth:"100%",width:"100%"},Yp=function(){var r=D().originalImage,e=$d(),e=T(e,2),n=e[0],t=e[1];return c.createElement(tr,{className:"FIE_filters",style:Hp},Gp.map(function(o){return c.createElement(Xp,{key:o.label,filterLabel:o.label,filterFn:o.filterFn,applyFilter:t,isActive:n===o.filterFn,image:r})}))},Ls=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_text-tool-button",id:E.TEXT,label:t("textTool"),Icon:Rc,onClick:e,isSelected:n})},Up=(Ls.defaultProps={isSelected:!1},k.div.withConfig({componentId:"sc-qvjmv1-0"})(["display:flex;align-items:center;justify-content:center;margin-top:8px;flex-wrap:wrap;"])),Fs=k.div.withConfig({componentId:"sc-qvjmv1-1"})(["background:",";box-shadow:0px 1px 2px ",";border-radius:2px;overflow:visible;*{font-family:'Roboto',sans-serif;}"],function(r){return r.theme.palette["bg-secondary"]},function(r){return r.theme.palette["light-shadow"]}),Ne=k.div.withConfig({componentId:"sc-qvjmv1-2"})(["padding:8px 12px;"]),Vp=k(H).withConfig({componentId:"sc-qvjmv1-3"})(["font-weight:500;margin-bottom:12px;"]),vo=k.div.withConfig({componentId:"sc-qvjmv1-4"})(["display:flex;align-items:center;justify-content:space-between;"]),Ct=k.div.withConfig({componentId:"sc-qvjmv1-5"})(["&:not(:first-child){margin-left:12px;}"]),je=k.div.withConfig({componentId:"sc-qvjmv1-6"})(function(o){var e=o.theme,n=o.addThinBorder,t=o.noMargin,o=o.secondaryIconColor;return`
    cursor: pointer;
    padding: 3px 6px;
    margin: `.concat(t?0:"0 4px",`;
    display: inline-block;

    svg {
      vertical-align: middle;
      margin: 0 auto;
    }

    `).concat(n?"border: 0.5px solid ".concat(e.palette["borders-secondary"]):"",`;
    color: `).concat(o?"#959DA8":"",`;

    &[aria-selected='true'] {
      background: `).concat(e.palette["bg-primary-active"],`;

      * {
        color: `).concat(e.palette["accent-primary-active"],`;
      }
    }

    :hover {
      background: `).concat(e.palette["bg-primary-active"],`;
    }
  `)}),qp=0,Zp=1,Jp=function(n){var t=n.annotation,e=n.updateAnnotation,n=n.t,t=t.opacity;return c.createElement(Ne,null,c.createElement(H,null,n("opacity")),c.createElement(te,{annotation:"%",onChange:function(o){e({opacity:ee(o/100,qp,Zp)})},value:Math.round(100*t)}))},Qp=k.div.attrs(function(r){return r=r.$color,{style:{background:r==="rgba(0,0,0,0)"?"repeating-conic-gradient(#5d6d7e 0% 25%, transparent 0% 50%) 50% / 8px 8px":r}}}).withConfig({componentId:"sc-zmv0gj-0"})(["background:",";border-radius:2px;width:24px;height:24px;border:2px solid ",";cursor:pointer;box-sizing:border-box;"],function(r){return r.theme.palette["icons-primary"]},function(r){return r.theme.palette["borders-strong"]}),ef=k(Lc).withConfig({componentId:"sc-zmv0gj-1"})(["max-width:212px;"]),un="FIE_pinnedColors",en=function(p){function e(w){u(d?null:w.currentTarget)}var n=p.position,n=n===void 0?"top":n,t=p.onChange,o=p.color,p=D(),O=p.selectionsIds,a=O===void 0?[]:O,O=p.config.annotationsCommon,i=O===void 0?{}:O,s=p.dispatch,l=p.latestColor,O=b.exports.useState(),p=T(O,2),d=p[0],u=p[1],O=b.exports.useState(function(){return l||o||i.fill}),p=T(O,2),O=p[0],S=p[1],p=b.exports.useState((p=window)!=null&&p.localStorage?JSON.parse(localStorage.getItem(un)||"[]"):[]),p=T(p,2),y=p[0],v=p[1];return b.exports.useEffect(function(){var w=a.length===0&&l||o;S(w),t(w)},[o,a]),c.createElement(c.Fragment,null,c.createElement(Qp,{className:"FIE_color-picker-triggerer",onClick:e,$color:O,onChange:t}),c.createElement(Fc,{className:"FIE_color-picker",anchorEl:d,open:!!d,position:n,onClick:e,overlay:!0,zIndex:11111},c.createElement(ef,{onChange:function(w,m,f){var I;S(m),t(m),f=f,(I=window)!=null&&I.localStorage&&(I=window.localStorage.getItem(un),JSON.stringify(f)!==I&&(I=f.slice(-9),window.localStorage.setItem(un,JSON.stringify(I)),v(I))),l!==m&&s({type:rc,payload:{latestColor:m}})},defaultColor:O,pinnedColors:y,showTransparentColor:!0})))},tf=(en.defaultProps={position:"top",color:void 0},0),nf=100,rf=function(n){var o=n.annotation,e=n.updateAnnotation,n=n.t,t=o.stroke,o=o.strokeWidth;return c.createElement(Ne,null,c.createElement(H,null,n("stroke")),c.createElement(te,{annotation:"px",onChange:function(a){e({strokeWidth:ee(a,tf,nf)})},value:o}),c.createElement(en,{color:t,onChange:function(a){e({stroke:a})}}))},of=function(t){function e(d,u){n(h({},d,ee(u,2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,3<arguments.length&&arguments[3]!==void 0?arguments[3]:100)))}var l=t.annotation,n=t.updateAnnotation,t=t.t,o=l.shadowOffsetX,a=l.shadowOffsetY,i=l.shadowBlur,s=l.shadowColor,l=l.shadowOpacity;return c.createElement(Ne,null,c.createElement(Vp,null,t("shadow")),c.createElement(vo,null,c.createElement(Ct,null,c.createElement(H,null,t("horizontal")),c.createElement(te,{annotation:"px",min:-100,max:100,onChange:function(d){return e("shadowOffsetX",d,-100,100)},value:o||0,hideTrack:!0})),c.createElement(Ct,null,c.createElement(H,null,t("vertical")),c.createElement(te,{annotation:"px",min:-100,max:100,onChange:function(d){return e("shadowOffsetY",d,-100,100)},value:a||0,hideTrack:!0}))),c.createElement(vo,null,c.createElement(Ct,null,c.createElement(H,null,t("blur")),c.createElement(te,{annotation:"%",onChange:function(d){return e("shadowBlur",d)},value:i})),c.createElement(Ct,null,c.createElement(H,null,t("opacity")),c.createElement(te,{annotation:"%",onChange:function(d){return e("shadowOpacity",d/100,0,1)},value:Math.round(100*l)}))),c.createElement(en,{color:s,onChange:function(d){n({shadowColor:d})}}))},af=function(d,e,n){var o=d.width,s=d.height,i=d.scaleX,u=d.scaleY,O=d.rotation,t=d.padding,t=t===void 0?0:t,l=d.radius,a=d.radiusX,d=d.radiusY,o=xe((o||2*(l||a))*(i===void 0?1:i),(s||2*(l||d))*(u===void 0?1:u),O===void 0?0:O),a=e.attrs,i=a.clipWidth,s=a.clipHeight,l=a.clipX,d=l===void 0?0:l,u=a.clipY,O=u===void 0?0:u,S={left:d+o.offsetLeft+t,center:d+i/2-(o.width/2-o.offsetLeft)+t,right:d+i-o.width-t+o.offsetLeft},p={top:O+o.offsetTop+t,middle:O+s/2-(o.height/2-o.offsetTop)+t,bottom:O+s-o.height-t+o.offsetTop};return h(e={},Q.TOP_LEFT,function(){return{x:S.left,y:p.top}}),h(e,Q.TOP_CENTER,function(){return{x:S.center,y:p.top}}),h(e,Q.TOP_RIGHT,function(){return{x:S.right,y:p.top}}),h(e,Q.MIDDLE_LEFT,function(){return{x:S.left,y:p.middle}}),h(e,Q.MIDDLE_CENTER,function(){return{x:S.center,y:p.middle}}),h(e,Q.MIDDLE_RIGHT,function(){return{x:S.right,y:p.middle}}),h(e,Q.BOTTOM_LEFT,function(){return{x:S.left,y:p.bottom}}),h(e,Q.BOTTOM_CENTER,function(){return{x:S.center,y:p.bottom}}),h(e,Q.BOTTOM_RIGHT,function(){return{x:S.right,y:p.bottom}}),e[n]()},wo=Object.values(Q),sf=(h(ge={},Q.TOP_LEFT,-145),h(ge,Q.TOP_CENTER,-90),h(ge,Q.TOP_RIGHT,-45),h(ge,Q.MIDDLE_LEFT,180),h(ge,Q.MIDDLE_CENTER,0),h(ge,Q.MIDDLE_RIGHT,0),h(ge,Q.BOTTOM_LEFT,135),h(ge,Q.BOTTOM_CENTER,90),h(ge,Q.BOTTOM_RIGHT,45),ge),Te={OPACITY:"opacity",STROKE:"stroke",SHADOW:"shadow",POSITION:"position"},cf=function(r){var e=r.annotation,n=r.updateAnnotation,t=D().designLayer,o=wo.length;return wo.map(function(a,i){return c.createElement(b.exports.Fragment,{key:a},c.createElement(je,{onClick:function(){n(af(e,t,a))},secondaryIconColor:!0,addThinBorder:!0,noMargin:!0},a===Q.MIDDLE_CENTER?c.createElement(Dc,null):c.createElement(Mc,{style:{transform:"rotate(".concat(sf[a],"deg)")}})),(i+1)%3==0&&i+1!==o&&c.createElement("div",null))})},lf=["children","morePoppableOptionsPrepended","moreOptionsPopupComponentsObj","morePoppableOptionsAppended","annotation","updateAnnotation","hideFillOption","hidePositionField","className"];function Eo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function So(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Eo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Eo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var dn,F,K,et,xn,_n,Ee=function(u){var e=u.children,n=u.morePoppableOptionsPrepended,t=u.moreOptionsPopupComponentsObj,o=u.morePoppableOptionsAppended,a=u.annotation,i=u.updateAnnotation,s=u.hideFillOption,l=u.hidePositionField,d=u.className,u=Z(u,lf),m=b.exports.useState(null),m=T(m,2),O=m[0],S=m[1],m=b.exports.useState(null),m=T(m,2),p=m[0],y=m[1],m=D(),v=m.config.useCloudimage,w=m.t,m=b.exports.useMemo(function(){return[].concat(oe(n),[{titleKey:"opacity",name:Te.OPACITY,Icon:$c}],oe(v?[]:[{titleKey:"stroke",name:Te.STROKE,Icon:Bc},{titleKey:"shadow",name:Te.SHADOW,Icon:zc}]),[l?void 0:{titleKey:"position",name:Te.POSITION,Icon:Kc}])},[n]),g=b.exports.useMemo(function(){var P;return So(So({},t),{},(h(P={},Te.OPACITY,Jp),h(P,Te.STROKE,rf),h(P,Te.SHADOW,of),h(P,Te.POSITION,cf),P),o)},[t]),f=b.exports.useCallback(function(P,j){P=P==null?void 0:P.currentTarget,S(P),y(j)},[]),I=b.exports.useCallback(function(P){i({fill:P})},[i]),g=O&&p&&g[p];return c.createElement(Up,{className:"FIE_annotations-options".concat(d?" ".concat(d):"")},!s&&c.createElement(en,{color:a.fill,onChange:I}),e,m.map(function(P){return P&&c.createElement(je,{className:"FIE_annotation-option-triggerer",key:P.name,title:w(P.titleKey),onClick:function(j){return f(j,P.name)}},c.createElement(P.Icon,{size:18}))}),g&&c.createElement(bt,{className:"FIE_annotation-option-popup",anchorEl:O,open:!!O,onClose:f,position:"top"},c.createElement(Fs,null,c.createElement(g,ae({annotation:a,updateAnnotation:i},u)))))},uf=(Ee.defaultProps={children:void 0,morePoppableOptionsPrepended:[],moreOptionsPopupComponentsObj:{},morePoppableOptionsAppended:[],hideFillOption:!1,hidePositionField:!1,className:void 0},k(ui).withConfig({componentId:"sc-1cwdnjz-0"})(["width:88px;margin:0 4px;"])),df=k(Bn).withConfig({componentId:"sc-1cwdnjz-1"})(["width:70px;margin:0 4px;"]),pf=0,ff=100,To=1,gf=function(t){function e(i,s){n(h({},i,ee(s,pf,ff)))}var a=t.annotation,n=t.updateAnnotation,t=t.t,o=a.letterSpacing,a=a.lineHeight;return c.createElement(Ne,null,c.createElement(H,null,t("letterSpacing")),c.createElement(te,{annotation:"px",isActive:!!o,onChange:function(i){return e("letterSpacing",i)},value:o,step:To}),c.createElement(H,null,t("lineHeight")),c.createElement(te,{annotation:"px",isActive:!!a,onChange:function(i){return e("lineHeight",i)},value:a,step:To}))},mf={transform:"scaleX(-1)"},hf=function(o){function e(a){t({align:a})}var n=o.annotation,t=o.updateAnnotation,o=n.align;return c.createElement(Ne,null,c.createElement(je,{onClick:function(){return e("left")},"aria-selected":o==="left"},c.createElement(yr,null)),c.createElement(je,{onClick:function(){return e("center")},"aria-selected":o==="center"},c.createElement(di,null)),c.createElement(je,{onClick:function(){return e("right")},"aria-selected":o==="right"},c.createElement(yr,{style:mf})))},Of=[{titleKey:"textAlignment",name:"text-alignment",Icon:di},{titleKey:"textSpacings",name:"text-spacings",Icon:Wc}],yf=(h(dn={},"text-alignment",hf),h(dn,"text-spacings",gf),dn),Ds=function(r){r.target!==F&&(r=F.value,Vt(),xn(r))},Vt=function(){F&&F.remove(F),window&&window.removeEventListener("click",Ds),K&&K.show(),et&&(et.show(),et.forceUpdate()),typeof _n=="function"&&_n(),et=F=K=null},bf=function(l,e,s,a,i){xn=a,_n=i,et=s,(K=e.findOne("#".concat(l))).hide(),et.hide();var a=K.absolutePosition(),i=(F=document.createElement("textarea"),e.container().parentNode.appendChild(F),F.value=K.text(),F.style.position="absolute",F.style.top="".concat(a.y,"px"),F.style.left="".concat(a.x,"px"),F.style.width="".concat(K.width()-2*K.padding(),"px"),F.style.height="".concat(K.height()-2*K.padding()+5,"px"),F.style.maxWidth="".concat(K.width()-2*K.padding(),"px"),F.style.maxHeight="".concat(K.height()-2*K.padding()+5,"px"),F.style.fontSize="".concat(K.fontSize(),"px"),F.style.border="1px solid rgba(0, 0, 0, 0.5)",F.style.padding="0px",F.style.margin="0px",F.style.overflow="hidden",F.style.background="none",F.style.outline="none",F.style.resize="none",F.style.lineHeight=K.lineHeight(),F.style.fontFamily=K.fontFamily(),F.style.transformOrigin="left top",F.style.textAlign=K.align(),F.style.fontStyle=K.fontStyle(),F.style.letterSpacing=K.letterSpacing(),F.style.lineHeight=K.lineHeight(),F.style.color=K.fill(),K.rotation()),s="",l=(i&&(s+="rotateZ(".concat(i,"deg)")),0),d=-1<navigator.userAgent.toLowerCase().indexOf("firefox");d&&(l+=2+Math.round(K.fontSize()/20)),s+="translateY(-".concat(l,"px)"),F.style.transform=s,F.style.height="auto",F.style.height="".concat(F.scrollHeight+3,"px"),F.focus(),F.addEventListener("keydown",function(u){var O;u.key!=="Enter"||u.shiftKey||(O=F.value,Vt(),xn(O)),u.key==="Escape"&&Vt()}),F.addEventListener("keydown",function(u){u.key!=="Enter"&&u.key!=="Escape"&&(u=K.getAbsoluteScale().x,u=(u=K.width()*u)||K.placeholder.length*K.fontSize(),(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||d)&&(u=Math.ceil(u)),(document.documentMode||/Edge/.test(navigator.userAgent))&&(u+=1),F.style.width="".concat(u,"px"),F.style.height="auto",F.style.height="".concat(F.scrollHeight+K.fontSize(),"px"))}),window&&setTimeout(function(){window.addEventListener("click",Ds)})},Nn=function(t){var e=t.text,n=t.saveText,t=t.children,S=D(),o=S.dispatch,a=S.textIdOfEditableContent,i=S.designLayer,s=S.t,S=S.config,l=S.useCloudimage,S=S[E.TEXT],d=S.fonts,d=d===void 0?[]:d,u=S.onFontChange,O=b.exports.useCallback(function(m){var m=m.target,f=m.name,I=m.value,g=m.type;n(function(P){return h({id:P.id},f,g==="number"?ee(I,1,500):I)})},[n]),S=b.exports.useCallback(function(w){var m;O({target:{name:"fontFamily",value:w}}),e.fontFamily!==w&&typeof u=="function"&&(m=i.draw.bind(i),u(w,m))},[O,e,i]),p=b.exports.useCallback(function(w){var m=((m=e.fontStyle)==null?void 0:m.replace("normal","").split(" "))||[];0<Object.keys(m).length&&m.includes(w)?m=m.filter(function(f){return f!==w}):m.push(w),O({target:{name:"fontStyle",value:m.join(" ").trim()||"normal"}})},[e]),y=b.exports.useCallback(function(){o({type:cr,payload:{textIdOfEditableContent:null}})},[]),v=b.exports.useCallback(function(w){O({target:{name:"text",value:w}}),y()},[]);return b.exports.useEffect(function(){var w,m;return a&&e.id===a&&(w=i.getStage(),m=T(w.findOne("#".concat(yi)).children,1)[0],bf(a,w,m,v,y)),function(){m&&a&&Vt()}},[a]),c.createElement(Ee,{className:"FIE_text-tool-options",annotation:e,updateAnnotation:n,morePoppableOptionsPrepended:l?[]:Of,moreOptionsPopupComponentsObj:l?{}:yf,t:s},Array.isArray(d)&&1<d.length&&c.createElement(uf,{className:"FIE_text-font-family-option",onChange:S,value:e.fontFamily,placeholder:s("fontFamily"),size:"sm"},d.map(function(){var w,m=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"";return c.createElement(st,{className:"FIE_text-font-family-item",key:(w=m.value)!=null?w:m,value:(w=m.value)!=null?w:m},(w=m.label)!=null?w:m)})),c.createElement(df,{className:"FIE_text-size-option",value:e.fontSize||"",name:"fontSize",onChange:O,inputMode:"numeric",type:"number",size:"sm",placeholder:s("size")}),!l&&c.createElement(c.Fragment,null,c.createElement(je,{className:"FIE_text-bold-option","aria-selected":(e.fontStyle||"").includes("bold"),onClick:function(){return p("bold")}},c.createElement(Xc,null)),c.createElement(je,{className:"FIE_text-italic-option","aria-selected":(e.fontStyle||"").includes("italic"),onClick:function(){return p("italic")}},c.createElement(Gc,null))),t)},vf=(Nn.defaultProps={children:null},function(e){var e=e.t,t=_e({name:E.TEXT}),t=T(t,2),n=t[0],t=t[1];return c.createElement(Nn,{text:n,saveText:t,t:e})}),Ms=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_image-tool-button",id:E.IMAGE,label:t("imageTool"),Icon:Hc,onClick:e,isSelected:n})},wf=(Ms.defaultProps={isSelected:!1},k.input.withConfig({componentId:"sc-h20emh-0"})(["display:none;width:1px;height:1px;position:absolute;z-index:-1;"])),Ef=function(r,e){return c.createElement(wf,ae({type:"file",ref:e},r))},$s=b.exports.forwardRef(Ef),nr=function(o){var e=o.image,n=o.saveImage,t=o.children,o=o.t;return c.createElement(Ee,{className:"FIE_image-tool-options",annotation:e,updateAnnotation:n,t:o,hideFillOption:!0},t)},Po=(nr.defaultProps={children:null},.15),Sf=function(){function r(y){p.current+=1,p.current===y&&(p.current=0,t(!1))}function e(y){i({type:$e,payload:{feedback:{message:y,status:rt.WARNING}}})}var d=b.exports.useState(),d=T(d,2),n=d[0],t=d[1],o=b.exports.useRef(),d=D(),a=d.shownImageDimensions,i=d.dispatch,u=d.adjustments.crop,s=u===void 0?{}:u,l=d.t,u=_e({name:E.IMAGE,opacity:1},!1),d=T(u,3),u=d[0],O=d[1],S=d[2],p=b.exports.useRef(0);return c.createElement(nr,{image:u,saveImage:O,t:l},c.createElement(Le,{className:"FIE_image-tool-add-option",color:"secondary",onClick:n?void 0:function(){o.current&&o.current.click()},disabled:n,size:"sm",style:{maxHeight:24}},l(n?"importing":"addImage")),c.createElement($s,{ref:o,onChange:n?void 0:function(y){var v,w,m;y.target.files&&(t(!0),v=[],m=Array.from(y.target.files),w=m.length,m.forEach(function(f){var I;f.type.startsWith("image/")?((I=new Image).onload=function(){var g,P,j,C,B,N;g=I,P=s.width||a.width,j=s.height||a.height,C=s.x||0,B=s.y||0,N=Math.min(1,P/(g.width+g.width*Po),j/(g.height+g.height*Po)),S({image:g,x:C+P/2-g.width*N/2,y:B+j/2-g.height*N/2,width:g.width*N,height:g.height*N}),URL.revokeObjectURL(f),r(w)},I.onerror=function(){e(l("uploadImageError")),r(w)},I.src=URL.createObjectURL(f)):(v.push(f.name),r(w))}),0<v.length&&(m=1<v.length?l("areNotImages"):l("isNotImage"),e("".concat(v.join(", ")," ").concat(m," ").concat(l("toBeUploaded"),".")))),y.target.value=""},disabled:n,multiple:!0}))},Bs=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_rect-tool-button",id:E.RECT,label:t("rectangleTool"),Icon:Yc,onClick:e,isSelected:n})},Io=(Bs.defaultProps={isSelected:!1},0),jo=150,Tf=function(n){var t=n.annotation,e=n.updateAnnotation,n=n.t,t=t.cornerRadius;return c.createElement(Ne,null,c.createElement(H,null,n("cornerRadius")),c.createElement(te,{annotation:"px",onChange:function(o){e({cornerRadius:ee(o,Io,jo)})},value:t,min:Io,max:jo}))},Pf=[{titleKey:"cornerRadius",name:"corner-radius",Icon:Uc}],If=h({},"corner-radius",Tf),jf=function(e){var e=e.t,t=_e({name:E.RECT}),t=T(t,2),n=t[0],t=t[1];return c.createElement(Ee,{className:"FIE_rect-tool-options",moreOptionsPopupComponentsObj:If,morePoppableOptionsPrepended:Pf,annotation:n,updateAnnotation:t,t:e})},zs=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_ellipse-tool-button",id:E.ELLIPSE,label:t("ellipseTool"),Icon:Vc,onClick:e,isSelected:n})},Cf=(zs.defaultProps={isSelected:!1},function(e){var e=e.t,t=_e({name:E.ELLIPSE}),t=T(t,2),n=t[0],t=t[1];return c.createElement(Ee,{className:"FIE_ellipse-tool-options",annotation:n,updateAnnotation:t,t:e})}),Ks=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_pen-tool-button",id:E.PEN,label:t("penTool"),Icon:qc,onClick:e,isSelected:n})};function Co(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function pn(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Co(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Co(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}Ks.defaultProps={isSelected:!1};var Pe={passive:!0},xf=function(e){var e=e.t,a=D(),n=a.dispatch,t=a.designLayer,o=a.previewGroup,a=a.config,a=_e(pn(pn(pn({},a.annotationsCommon),a[E.PEN]),{},{name:E.PEN}),!1),a=T(a,3),i=a[0],s=a[1],l=a[2],d=b.exports.useRef(null),u=b.exports.useRef({points:[],moved:!1,id:""}),O=b.exports.useCallback(function(){var v=vs(d.current.content),v=zt(o,v);return[v.offsetX-(t.attrs.xPadding||0),v.offsetY-(t.attrs.yPadding||0)]},[]),S=b.exports.useCallback(function(){u.current.moved?(u.current.points=u.current.points.concat(O()),n({type:Re,payload:{id:u.current.id,points:u.current.points,dismissHistory:!0}})):(u.current={moved:!0,id:Jt(E.PEN),points:[].concat(oe(u.current.points),oe(O()))},l({id:u.current.id,name:E.PEN,points:u.current.points}))},[]),p=b.exports.useCallback(function(){u.current.id&&n({type:at,payload:{annotationId:u.current.id}}),u.current=null,d.current.off("mousemove touchmove",S),d.current.off("mouseleave touchcancel",p),document.removeEventListener("mouseup",p,Pe),document.removeEventListener("touchend",p,Pe),document.removeEventListener("mouseleave",p,Pe),document.removeEventListener("touchcancel",p,Pe)},[]),y=b.exports.useCallback(function(v){v.target.attrs.draggable||(v.evt.preventDefault(),u.current={points:O()},d.current.on("mousemove touchmove",S),d.current.on("mouseleave touchcancel",p),document.addEventListener("mouseup",p,Pe),document.addEventListener("touchend",p,Pe),document.addEventListener("mouseleave",p,Pe),document.addEventListener("touchcancel",p,Pe))},[]);return b.exports.useEffect(function(){return d.current=t==null?void 0:t.getStage(),d.current&&d.current.on("mousedown touchstart",y),function(){d.current&&d.current.off("mousedown touchstart",y)}},[]),c.createElement(Ee,{className:"FIE_pen-tool-options",annotation:i,updateAnnotation:s,t:e,hidePositionField:!0,hideFillOption:!0})},Ws=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_line-tool-button",id:E.LINE,label:t("lineTool"),Icon:Zc,onClick:e,isSelected:n})},_f=(Ws.defaultProps={isSelected:!1},function(e){var e=e.t,t=_e({name:E.LINE}),t=T(t,2),n=t[0],t=t[1];return c.createElement(Ee,{className:"FIE_line-tool-options",annotation:n,updateAnnotation:t,t:e,hidePositionField:!0,hideFillOption:!0})}),Xs=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_arrow-tool-button",id:E.ARROW,label:t("arrowTool"),Icon:Jc,onClick:e,isSelected:n})},Nf=(Xs.defaultProps={isSelected:!1},function(e){var e=e.t,t=_e({name:E.ARROW}),t=T(t,2),n=t[0],t=t[1];return c.createElement(Ee,{className:"FIE_arrow-tool-options",annotation:n,updateAnnotation:t,t:e,hidePositionField:!0,hideFillOption:!0})}),Gs=function(t){var e=t.selectTool,n=t.isSelected,t=t.t;return c.createElement(ne,{className:"FIE_polygon-tool-button",id:E.POLYGON,label:t("polygonTool"),Icon:Qc,onClick:e,isSelected:n})},xo=(Gs.defaultProps={isSelected:!1},3),_o=25,Af=function(n){var t=n.annotation,e=n.updateAnnotation,n=n.t,t=t.sides;return c.createElement(Ne,null,c.createElement(H,null,n("sides")),c.createElement(te,{annotation:"",onChange:function(o){e({sides:ee(o,xo,_o)})},value:t,min:xo,max:_o}))},kf=[{titleKey:"sides",name:"sides-number",Icon:el}],Rf=h({},"sides-number",Af),Lf=function(e){var e=e.t,t=_e({name:E.POLYGON}),t=T(t,2),n=t[0],t=t[1];return c.createElement(Ee,{className:"FIE_polygon-tool-options",morePoppableOptionsPrepended:kf,moreOptionsPopupComponentsObj:Rf,annotation:n,updateAnnotation:t,t:e,hidePositionField:!0})};function No(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ao(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?No(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):No(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Hs=function(r,e,n,t){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0;if(r.width&&r.height)return r;var a=Yt(e,n,t),a=xe(a.width,a.height,o);return r.width||r.height?{width:r.width||a.width,height:r.height||a.height}:a.width&&a.height&&a||Ao(Ao({},t),xe(t.width,t.height,o))},Ff=k.div.withConfig({componentId:"sc-17otqpz-0"})(["display:flex;justify-content:",";align-items:center;flex-wrap:wrap;"],function(r){return r.alignLeft?"left":"center"}),ko=k(Bn).withConfig({componentId:"sc-17otqpz-1"})(["width:70px;height:24px;margin:",";"],function(r){return r.noLeftMargin?"8px 8px 8px 0":"8px"}),Df=k(Fe).withConfig({componentId:"sc-17otqpz-2"})(["margin-right:16px;"]),Mf=k(H).withConfig({componentId:"sc-17otqpz-3"})(["font-size:13px;line-height:15px;"]),rr=function(a){function e(P){var f,I=(P=P.target).name,P=P.value,g=xe(s.width,s.height,O),P=h({},I,ee(P,1)),j=I==="height",C=j?"width":"height";((f=t.ratioUnlocked)!=null?f:l.ratioUnlocked)||(f=g.width/g.height,P[C]=Math.round(j?P[I]*f:P[I]/f)),P[I]===l[I]&&P[C]===l[C]||(typeof n=="function"?n(P):(i({type:tt,payload:P}),l.width&&l.height||(g=u.width&&u.height&&u||d,i({type:it,payload:{factor:Ut(g,P)}}))))}var n=a.onChange,t=a.currentSize,o=a.hideResetButton,a=a.alignLeft,p=D(),i=p.dispatch,s=p.originalImage,l=p.resize,d=p.shownImageDimensions,S=p.adjustments,u=S.crop,S=S.rotation,O=S===void 0?0:S,S=p.theme,p=p.t,y=!l.width&&!l.height||s.width===l.width&&s.height===l.height,v=Hs((t.width||t.height)&&t||l,u,d,s,O),w=l.manualChangeDisabled;return c.createElement(Ff,{className:"FIE_resize-tool-options",alignLeft:a},c.createElement(ko,{className:"FIE_resize-width-option",value:v.width,name:"width",onChange:w?void 0:e,inputMode:"numeric",title:p("resizeWidthTitle"),type:"number",size:"sm",placeholder:"Width",noLeftMargin:a,disabled:w}),c.createElement(Mf,{className:"FIE_resize-x-label"},"x"),c.createElement(ko,{className:"FIE_resize-height-option",value:v.height,name:"height",onChange:w?void 0:e,inputMode:"numeric",title:p("resizeHeightTitle"),type:"number",size:"sm",placeholder:"Height",disabled:w}),c.createElement(Df,{className:"FIE_resize-ratio-locker",title:p("toggleRatioLockTitle"),onClick:w?void 0:function(){return typeof n=="function"?void n({ratioUnlocked:!t.ratioUnlocked}):void i({type:tt,payload:{ratioUnlocked:!l.ratioUnlocked}})},color:"link",size:"sm",disabled:w},t.ratioUnlocked||l.ratioUnlocked?c.createElement(tl,{color:S.palette["icons-secondary"]}):c.createElement(nl,{color:S.palette["icons-secondary"]})),!o&&c.createElement(Le,{className:"FIE_resize-reset-button",size:"sm",onClick:y||w?void 0:function(){i({type:tt,payload:{width:null,height:null,ratioUnlocked:!1}});var m=u.width&&u.height&&u||d;i({type:it,payload:{factor:Ut(m,m)}})},disabled:y||w,title:p("resetSize")},p("reset")))},$f=(rr.defaultProps={onChange:void 0,currentSize:{},hideResetButton:!1,alignLeft:!1},k.div.withConfig({componentId:"sc-m9ezm7-0"})(["height:22px;display:flex;align-items:center;margin-right:4px;"])),Bf=k(Le).withConfig({componentId:"sc-m9ezm7-1"})(["height:100%;padding:4px 8px;flex-grow:1;justify-content:center;align-items:center;",";span{font-size:12px !important;line-height:14px !important;}"],function(r){return r.keepBorderRadius?"":"border-top-right-radius: 0; border-bottom-right-radius: 0"}),zf=k(Fe).withConfig({componentId:"sc-m9ezm7-2"})(["border-top-left-radius:0;border-bottom-left-radius:0;margin-left:1px;height:100%;padding:4px 8px;svg{transform:rotate(-90deg);width:10px;margin-top:-4px;}"]),xt=!0,or=function(y){function e(f){xt&&(f.stopPropagation(),w(f.currentTarget))}function n(){xt&&w(null)}var t=y.label,o=y.onClick,a=y.title,i=y.color,s=y.menuFromBtn,l=y.menuItems,d=y.menuPosition,d=d===void 0?"bottom":d,u=y.arrowColor,O=y.disabled,O=O!==void 0&&O,S=y.className,p=y.menuStyle,y=y.wrapperStyle,m=b.exports.useState(null),m=T(m,2),v=m[0],w=m[1],m=(b.exports.useEffect(function(){return xt=!0,function(){xt=!1}},[]),0<l.length);return c.createElement(c.Fragment,null,c.createElement($f,{className:"".concat(S,"-wrapper"),onClick:O?void 0:function(f){s&&e(f),typeof o=="function"&&o()},style:y},c.createElement(Bf,{className:"".concat(S,"-button"),color:i,size:"md",title:a,keepBorderRadius:!m,disabled:O},t),m&&c.createElement(zf,{className:"".concat(S,"-menu-opener"),color:i,size:"md",onClick:s||O?void 0:e,disabled:O},c.createElement(pi,{color:u}))),m&&c.createElement(bt,{className:"".concat(S,"-menu"),anchorEl:v,onClose:n,open:!0,style:p,position:d},l.map(function(f){return f&&c.createElement(st,{className:"".concat(S,"-menu-item"),key:f.key,active:f.isActive,onClick:function(){var I;typeof(I=f.onClick)=="function"&&I(),n()},size:"md"},f.icon&&c.createElement(rl,{size:"md"},typeof f.icon=="string"?c.createElement("span",{dangerouslySetInnerHTML:{__html:f.icon}}):c.createElement(f.icon,null)),c.createElement(fi,null,f.label))})))},Kf=(or.defaultProps={title:"",color:"primary",menuFromBtn:!1,menuPosition:"bottom",onClick:void 0,disabled:!1,arrowColor:void 0,menuStyle:void 0,wrapperStyle:void 0},k.div.withConfig({componentId:"sc-fvaj5j-0"})(["display:flex;align-items:center;justify-content:center;flex-wrap:wrap;overflow:hidden;",";"],function(r){return r.noWrap?"margin-left: 4px; flex-wrap: nowrap;":""})),Ro=k.div.withConfig({componentId:"sc-fvaj5j-1"})(["margin-bottom:8px;"]),Wf=k.div.withConfig({componentId:"sc-fvaj5j-2"})(function(r){return r=r.theme,`
    padding: 4px;
    border: 1px solid `.concat(r.palette["borders-primary"],`;
    width: fit-content;
    height: 32px;
    border-radius: 2px;
    overflow: hidden;
    cursor: pointer;

    :hover {
      background: `).concat(r.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(r.palette["bg-primary-active"],`;
      border-color: `).concat(r.palette["accent-primary-active"],`;
    }

    img {
      max-width: 100%;
      max-height: 100%;
    }
  `)}),Ys=function(t){function e(l){n(l.currentTarget.children[0])}var n=t.selectWatermark,t=t.style,i=D(),s=i.config,o=i.annotations,a=b.exports.useMemo(function(){var l;return(l=(o[Ce]||{}).image)==null?void 0:l.src},[o[Ce]]),i=(s[E.WATERMARK]||{}).gallery,s=i===void 0?[]:i;return s.length===0?null:c.createElement(tr,{className:"FIE_watermark-gallery",style:t},s.map(function(l){return c.createElement(Wf,{className:"FIE_watermark-selected-item",onClick:e,key:l,"aria-selected":l===a},c.createElement("img",{src:l,alt:l,crossOrigin:"Anonymous",draggable:!1}))}))},Xf=(Ys.defaultProps={style:void 0},function(t){var e=t.watermark,n=t.saveWatermark,t=t.t,i=b.exports.useState(null),i=T(i,2),o=i[0],a=i[1],i=e.padding;return c.createElement(c.Fragment,null,c.createElement(je,{className:"FIE_watermark-padding-triggerer",title:t("padding"),onClick:function(s){a(s.currentTarget)}},c.createElement(ol,{size:18})),c.createElement(bt,{className:"FIE_watermark-padding-popup",anchorEl:o,open:!!o,onClose:function(){a(null)},position:"top"},c.createElement(Fs,null,c.createElement(Ne,null,c.createElement(H,null,t("padding")),c.createElement(te,{annotation:"px",onChange:function(s){n({padding:ee(s,0,100)})},value:i})))))});function Lo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function me(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Lo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Lo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var q,Ae,_t=.33,Ge="watermark",Gf=function(){function r(g){var P=g.width/g.height,j={},C=(v<w?(C=w*_t/g.height,j.height=g.height*C,j.width=j.height*P):(C=v*_t/g.width,j.width=g.width*C,j.height=j.width/P),me(me(me(me({},i.annotationsCommon),i[E.IMAGE]),j),{},{padding:1,image:g,x:m+v/2-j.width/2,y:f+w/2-j.height/2,id:Ge,name:E.IMAGE,replaceCurrent:!0}));s({type:Re,payload:C})}function e(g){s({type:Re,payload:me(me({},typeof g=="function"?g(y):g),{},{id:Ge})})}function n(){return c.createElement(Xf,{watermark:y,saveWatermark:e,t:l})}var d=D(),t=d.annotations,o=d.shownImageDimensions,a=d.selectionsIds,i=d.config,s=d.dispatch,l=d.t,d=d.adjustments.crop,d=d===void 0?{}:d,u=Qn(),I=b.exports.useState(!1),I=T(I,2),O=I[0],S=I[1],p=b.exports.useRef(),y=b.exports.useMemo(function(){return t[Ge]},[t[Ge]]),v=d.width||o.width,w=d.height||o.height,m=d.x||0,f=d.y||0,I=[!i.useCloudimage&&{key:"upload-watermark",label:l("uploadWatermark"),icon:al,onClick:function(){p.current&&p.current.click()}},{key:"add-text-watermark",label:l("addWatermarkAsText"),icon:il,onClick:function(){var g={height:w*_t,width:v*_t},g=me(me(me(me({},i.annotationsCommon),i[E.TEXT]),g),{},{padding:1,x:m+v/2-g.width/2,y:f+w/2-g.height/2,fill:"#000000",id:Ge,name:E.TEXT,replaceCurrent:!0});s({type:Re,payload:g})}}];return b.exports.useEffect(function(){y&&(s({type:ar}),s({type:at,payload:{annotationId:"watermark"}}))},[y]),b.exports.useEffect(function(){!y||a.length!==0&&a[0].id===Ge||s({type:at,payload:{annotationId:"watermark"}})},[a]),c.createElement("div",{className:"FIE_watermark-tool-wrapper"},(y==null?void 0:y.name)===E.TEXT&&c.createElement(Ro,{className:"FIE_watermark-options-wrapper"},c.createElement(Nn,{text:y,saveText:e,t:l},n())),(y==null?void 0:y.name)===E.IMAGE&&c.createElement(Ro,{className:"FIE_watermark-options-wrapper"},c.createElement(nr,{image:y,saveImage:e,t:l},n())),c.createElement(Kf,{className:"FIE_watermark-add-wrapper",noWrap:y!=null&&y.name},c.createElement(or,{className:"FIE_watermark-add",color:"secondary",label:l("addWatermark"),title:l("addWatermarkTitle"),menuPosition:"top",menuItems:I,menuFromBtn:!0}),c.createElement(Ys,{selectWatermark:r,style:u&&y!=null&&y.name?{width:"55%"}:void 0}),c.createElement($s,{onChange:O?void 0:function(g){var P,j;g.target.files&&(S(!0),(P=g.target.files[0]).type.startsWith("image/")&&((j=new Image).onload=function(){r(j),URL.revokeObjectURL(P),S(!1)},j.onerror=function(){var C;C=l("uploadImageError"),s({type:$e,payload:{feedback:{message:C,status:rt.WARNING}}}),S(!1)},j.src=URL.createObjectURL(P))),g.target.value=""},disabled:O,ref:p})))},pt=(h(q={},E.CROP,{id:E.CROP,Item:js}),h(q,E.ROTATE,{id:E.ROTATE,Item:_s,ItemOptions:Cp}),h(q,E.FLIP_X,{id:E.FLIP_X,Item:Cs}),h(q,E.FLIP_Y,{id:E.FLIP_Y,Item:xs}),h(q,E.BRIGHTNESS,{id:E.BRIGHTNESS,Item:Os,ItemOptions:yp}),h(q,E.CONTRAST,{id:E.CONTRAST,Item:Ns,ItemOptions:_p}),h(q,E.HSV,{id:E.HSV,Item:As,ItemOptions:Np,hideFn:function(r){return r.useCloudimage}}),h(q,E.BLUR,{id:E.BLUR,Item:ks,ItemOptions:kp}),h(q,E.WARMTH,{id:E.WARMTH,Item:Rs,ItemOptions:Lp,hideFn:function(r){return r.useCloudimage}}),h(q,E.FILTERS,{id:E.FILTERS,Item:Yp}),h(q,E.WATERMARK,{id:E.WATERMARK,Item:Gf}),h(q,E.TEXT,{id:E.TEXT,Item:Ls,ItemOptions:vf}),h(q,E.IMAGE,{id:E.IMAGE,Item:Ms,ItemOptions:Sf}),h(q,E.RECT,{id:E.RECT,Item:Bs,ItemOptions:jf}),h(q,E.POLYGON,{id:E.POLYGON,Item:Gs,ItemOptions:Lf}),h(q,E.ELLIPSE,{id:E.ELLIPSE,Item:zs,ItemOptions:Cf}),h(q,E.PEN,{id:E.PEN,Item:Ks,ItemOptions:xf}),h(q,E.LINE,{id:E.LINE,Item:Ws,ItemOptions:_f}),h(q,E.ARROW,{id:E.ARROW,Item:Xs,ItemOptions:Nf}),h(q,E.RESIZE,{id:E.RESIZE,Item:rr}),q),Wt=(h(Ae={},X.ADJUST,[E.CROP,E.ROTATE,E.FLIP_X,E.FLIP_Y]),h(Ae,X.FINETUNE,[E.BRIGHTNESS,E.CONTRAST,E.HSV,E.BLUR,E.WARMTH]),h(Ae,X.FILTERS,[E.FILTERS]),h(Ae,X.WATERMARK,[E.WATERMARK]),h(Ae,X.ANNOTATE,[E.TEXT,E.IMAGE,E.RECT,E.ELLIPSE,E.POLYGON,E.PEN,E.LINE,E.ARROW]),h(Ae,X.RESIZE,[E.RESIZE]),Ae);function Fo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Do(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Fo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Fo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Us="SELECT_TAB",Hf=function(r,e){return e.tabId===r.tabId?r:Do(Do({},r),{},{tabId:e.tabId,toolId:Wt[e.tabId][0],selectionsIds:[],pointerCssIcon:e.tabId===X.ANNOTATE?we.DRAW:we.DEFAULT})};function Mo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Nt(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Mo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Mo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Vs="SET_FINETUNE",Yf=function(r,e){return Nt(Nt({},r),{},{isDesignState:!e.dismissHistory,finetunes:!e.finetune||r.finetunes.includes(e.finetune)?r.finetunes:[].concat(oe(r.finetunes),[e.finetune]),finetunesProps:Nt(Nt({},r.finetunesProps),e.finetuneProps)})},Uf=["dismissHistory","replaceCurrent"];function $o(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function He(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?$o(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):$o(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Re="SET_ANNOTATION",Vf=function(r){var o=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},e=o.dismissHistory,n=o.replaceCurrent,t=Z(o,Uf),o=(o=t.id)!=null?o:Jt(t.name),a=r.annotations[o];return a&&!Object.keys(t).some(function(i){return(t[i]||t[i]===0)&&t[i]!==a[i]})?r:He(He({},r),{},{isDesignState:!(e!==void 0&&e),annotations:He(He({},r.annotations),{},h({},o,He(He({},n!==void 0&&n?{}:a),t)))})};function Bo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function zo(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Bo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Bo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Ot="CHANGE_POINTER_ICON",qf=function(r,e){return r.pointerCssIcon===e.pointerCssIcon?r:zo(zo({},r),{},{pointerCssIcon:e.pointerCssIcon})};function Ko(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Wo(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ko(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ko(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var at="SELECT_ANNOTATION",Zf=function(r,e){return r.selectionsIds.length===1&&r.selectionsIds[0]===e.annotationId?r:(e.multiple?(n=r.selectionsIds.filter(function(t){return t!==e.annotationId})).length===r.selectionsIds.length&&n.push(e.annotationId):n=[e.annotationId],Wo(Wo({},r),{},{selectionsIds:n}));var n};function Xo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Go(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Xo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Xo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var ar="CLEAR_ANNOTATIONS_SELECTIONS",Jf=function(r){return r.selectionsIds.length===0?r:Go(Go({},r),{},{selectionsIds:[]})};function Ho(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Yo(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ho(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ho(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var An="TOGGLE_ORIGINAL_IMAGE_DISPLAY",Qf=function(r,e){return Yo(Yo({},r),{},{isShowOriginalImage:e.isShow})};function Uo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Vo(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Uo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Uo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var qt="SELECT_TOOL",eg=function(r,e){return r.toolId===e.toolId?r:Vo(Vo({},r),{},{toolId:e.toolId,selectionsIds:e.keepSelections?r.selectionsIds:[]})};function qo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function At(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?qo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):qo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var ir="TOGGLE_FLIP",tg=function(r,e){var n="isFlipped".concat(e.direction===Kn.X?"X":"Y");return At(At({},r),{},{isDesignState:!e.dismissHistory,adjustments:At(At({},r.adjustments),{},h({},n,!r.adjustments[n]))})};function Zo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ye(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Zo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Zo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var sr="SET_CROP",ng=function(r,e){var n=(n=r.adjustments.crop)!=null?n:{},t={x:(t=G(e.x))!=null?t:n.x,y:(t=G(e.y))!=null?t:n.y,ratio:typeof e.ratio=="string"?e.ratio:(t=G(e.ratio))!=null?t:n.ratio,width:(t=G(e.width))!=null?t:n.width,height:(t=G(e.height))!=null?t:n.height,ratioTitleKey:(t=e.ratioTitleKey)!=null?t:n.ratioTitleKey,ratioGroupKey:e.ratioGroupKey,ratioFolderKey:e.ratioFolderKey};return n.x!==t.x||n.y!==t.y||n.width!==t.width&&(t.width!==G(r.shownImageDimensions.width)||n.width)||n.height!==t.height&&(t.height!==G(r.shownImageDimensions.height)||n.height)||n.ratio!==t.ratio||n.ratioTitleKey!==t.ratioTitleKey||n.ratioGroupKey!==t.ratioGroupKey||n.ratioFolderKey!==t.ratioFolderKey?Ye(Ye({},r),{},{isDesignState:!e.dismissHistory,adjustments:Ye(Ye({},r.adjustments),{},{crop:Ye(Ye({},n),t)})}):r};function Jo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function kt(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Jo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Jo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var qs="CHANGE_ROTATION",rg=function(r,e){return r.adjustments.rotation===e.rotation?r:kt(kt({},r),{},{isDesignState:!e.dismissHistory,adjustments:kt(kt({},r.adjustments),{},{rotation:e.rotation})})};function Qo(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ea(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Qo(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Qo(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var og=function(r,e,n,t){if(r.factor===De)return{x:0,y:0,factor:De};var o=r.factor>e.factor,i=(r.x-e.x||0)/e.factor,a=(r.y-e.y||0)/e.factor,i={x:r.x-i*r.factor,y:r.y-a*r.factor};return o&&e.factor===1||(i.x=Math.min(0,Math.max(i.x,n*(1-e.factor))),i.y=Math.min(0,Math.max(i.y,t*(1-e.factor)))),r.factor<1&&(a=n-n*r.factor,o=t-t*r.factor,i.x+=a/2,i.y+=o/2),ea(ea({},i),{},{factor:r.factor})},ag=["preparedDimensions"];function ta(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ue(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ta(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ta(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var it="ZOOM_CANVAS",ig=.05,sg=55,cg=function(r,e){var n,t=ee(parseFloat(e.factor).toFixed(2),ig,sg);return(n=e.preparedDimensions?(e.preparedDimensions,Z(e,ag)):(e={x:e.x||e.x===0?(n=e.x)!=null?n:r.zoom.x:r.canvasWidth/2,y:e.y||e.y===0?(n=e.y)!=null?n:r.zoom.y:r.canvasHeight/2},og(Ue(Ue({},e),{},{factor:t}),r.zoom,r.canvasWidth,r.canvasHeight))).factor===r.zoom.factor&&n.x===r.zoom.x&&n.y===r.zoom.y?r:Ue(Ue({},r),{},{zoom:Ue(Ue({},r.zoom),n)})};function na(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ra(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?na(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):na(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Zs="SET_CANVAS_SIZE",lg=function(r,e){if(r.canvasWidth===e.canvasWidth&&r.canvasHeight===e.canvasHeight)return r;var n=r.initialCanvasWidth,n=n===void 0?e.canvasWidth:n,t=r.initialCanvasHeight,t=t===void 0?e.canvasHeight:t,a=Tn(r.initialCanvasWidth,r.initialCanvasHeight,r.originalImage.width,r.originalImage.height),o=a*r.originalImage.width,a=a*r.originalImage.height,i=1;return n===e.canvasWidth&&t===e.canvasHeight||(o=e.canvasWidth/o,a=e.canvasHeight/a,i=Math.min(o,a)),ra(ra({},r),{},{initialCanvasWidth:n,initialCanvasHeight:t,canvasWidth:e.canvasWidth,canvasHeight:e.canvasHeight,canvasScale:i})};function oa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function aa(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?oa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):oa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Js="SET_ORIGINAL_IMAGE",ug=function(r,e){return aa(aa({},r),{},{feedback:{},originalImage:e.originalImage,imgSrc:e.originalImage.src})};function ia(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Rt(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ia(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ia(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Qs="SET_SHOWN_IMAGE_DIMENSIONS",dg=function(r,e){return Rt(Rt({},r),{},{shownImageDimensions:Rt(Rt({},r.shownImageDimensions),e.shownImageDimensions),designLayer:e.designLayer||r.designLayer,previewGroup:e.previewGroup||r.previewGroup})};function sa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ca(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?sa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):sa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var ec="REMOVE_ANNOTATIONS",pg=function(r,e){var n=r.annotations,t=r.selectionsIds;return e.annotationsIds.forEach(function(o){var a;t=t.filter(function(i){return i!==o}),r.designLayer&&n[o]&&((a=r.designLayer.findOne("#".concat(o)))&&a.destroy(),delete n[o])}),ca(ca({},r),{},{isDesignState:e.isDesignState||!0,annotations:n,selectionsIds:[]})};function la(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ve(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?la(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):la(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var tc="DUPLICATE_ANNOTATIONS",fg=function(r,e){var n=r.annotations,t={};return e.annotationsIds.forEach(function(i){var a,i=n[i];i&&(a=Jt(i.name),t[a]=Ve(Ve({},i),{},{id:a,x:i.x+20,y:i.y+20}))}),Ve(Ve({},r),{},{isDesignState:!e.dismissHistory,annotations:Ve(Ve({},n),t)})};function ua(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function da(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ua(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ua(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var cr="ENABLE_TEXT_CONTENT_EDIT",gg=function(r,e){return da(da({},r),{},{textIdOfEditableContent:e.textIdOfEditableContent||null})};function pa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ft(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?pa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):pa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var tt="SET_RESIZE",mg=function(r,e){return ft(ft({},r),{},{isDesignState:!e.dismissHistory,resize:ft(ft(ft({},r.resize),e),{},{manualChangeDisabled:(r=e.manualChangeDisabled)!=null&&r})})};function fa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ga(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?fa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):fa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var nc="SET_SAVED",hg=function(r){return r.haveNotSavedChanges?ga(ga({},r),{},{haveNotSavedChanges:!1}):r};function ma(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Og(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ma(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ma(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var wt=function(r){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],t=Og({},r);return Object.keys(e).forEach(function(o){var a=e[o];a!==void 0&&(Gt(a)!=="object"||a===null||Array.isArray(a)||!r[o]||Gt(r[o])!=="object"?t[o]=n&&Array.isArray(t[o])&&Array.isArray(a)?[].concat(oe(t[o]),oe(a)):a:t[o]=wt(r[o],a))}),t},Xt="UPDATE_STATE",yg=function(r,e){return e=e&&typeof e=="function"?e(r):e,e?wt(r,e):r};function ha(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Oa(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ha(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ha(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var z,rc="SET_LATEST_COLOR",bg=function(r,e){return r.latestColor===e.latestColor?r:Oa(Oa({},r),{},{latestColor:e.latestColor})},ya=(h(z={},Js,ug),h(z,$e,Cd),h(z,Yn,xd),h(z,Xn,Yl),h(z,Ot,qf),h(z,at,Zf),h(z,ar,Jf),h(z,An,Qf),h(z,Us,Hf),h(z,qt,eg),h(z,it,cg),h(z,Zs,lg),h(z,Qs,dg),h(z,cr,gg),h(z,rc,bg),h(z,Si,Hl),h(z,Vs,Yf),h(z,Re,Vf),h(z,sr,ng),h(z,qs,rg),h(z,ir,tg),h(z,tt,mg),h(z,ec,pg),h(z,tc,fg),h(z,Zn,Ss),h(z,Gn,ms),h(z,Hn,hs),h(z,nc,hg),h(z,Xt,yg),z),vg=.05,wg=12,Eg=function(){return 2*(window?Math.min(window.innerHeight,window.innerWidth)*vg:wg)},ba=function(t,a){var n=t.x,t=t.y,a=a*Math.PI/180,o=Math.cos(a),a=Math.sin(a);return{x:n*o-t*a,y:t*o+n*a}},Sg=function(r,e,n){return!r||!e||!n&&n!==0?{x:0,y:0,rotation:n}:(r={x:-r/2,y:-e/2},e=ba(r,0),r=ba(r,n),{x:r.x-e.x,y:r.y-e.y,rotation:n})},Be={definitions:{id:le.string.isRequired,name:le.string.isRequired,rotation:le.number,scaleX:le.number,scaleY:le.number,stroke:le.string,strokeWidth:le.number,shadowOffsetX:le.number,shadowOffsetY:le.number,shadowBlur:le.number,shadowColor:le.string,shadowOpacity:le.number,opacity:le.number},defaults:{rotation:0,scaleX:1,scaleY:1,stroke:void 0,strokeWidth:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,shadowBlur:void 0,shadowColor:void 0,shadowOpacity:void 0,opacity:1}},Tg=["id","name","fill","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity","cornerRadius"];function va(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function wa(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?va(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):va(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var oc=function(P){var e=P.id,n=P.name,t=P.fill,o=P.x,a=P.y,i=P.width,s=P.height,l=P.scaleX,d=P.scaleY,u=P.rotation,O=P.annotationEvents,S=P.stroke,p=P.strokeWidth,y=P.shadowOffsetX,v=P.shadowOffsetY,w=P.shadowBlur,m=P.shadowColor,f=P.shadowOpacity,I=P.opacity,g=P.cornerRadius,P=Z(P,Tg);return c.createElement(gi,ae({id:e,name:n,rotation:u,scaleX:l,scaleY:d,stroke:S,strokeWidth:p,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:m,shadowOpacity:f,fill:t,x:o,y:a,width:i,height:s,opacity:I,cornerRadius:g},O,P))},Pg=(oc.defaultProps=wa(wa({},Be.defaults),{},{fill:"#000",cornerRadius:0,width:0,height:0}),["id","name","fill","x","y","radiusX","radiusY","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"]);function Ea(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Sa(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ea(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ea(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var ac=function(g){var e=g.id,n=g.name,t=g.fill,o=g.x,a=g.y,i=g.radiusX,s=g.radiusY,l=g.scaleX,d=g.scaleY,u=g.rotation,O=g.annotationEvents,S=g.stroke,p=g.strokeWidth,y=g.shadowOffsetX,v=g.shadowOffsetY,w=g.shadowBlur,m=g.shadowColor,f=g.shadowOpacity,I=g.opacity,g=Z(g,Pg);return c.createElement(mi,ae({id:e,name:n,rotation:u,scaleX:l,scaleY:d,stroke:S,strokeWidth:p,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:m,shadowOpacity:f,fill:t,x:o,y:a,radiusX:i,radiusY:s,offsetX:-i,offsetY:-s,opacity:I},O,g))},Ig=(ac.defaultProps=Sa(Sa({},Be.defaults),{},{fill:"#000",radiusX:0,radiusY:0}),["id","name","fill","x","y","radius","scaleX","scaleY","rotation","sides","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"]);function Ta(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Pa(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ta(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ta(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var ic=function(g){var e=g.id,n=g.name,t=g.fill,o=g.x,a=g.y,i=g.radius,s=g.scaleX,l=g.scaleY,d=g.rotation,u=g.sides,O=g.annotationEvents,S=g.stroke,p=g.strokeWidth,y=g.shadowOffsetX,v=g.shadowOffsetY,w=g.shadowBlur,m=g.shadowColor,f=g.shadowOpacity,I=g.opacity,g=Z(g,Ig);return c.createElement(sl,ae({id:e,name:n,rotation:d,scaleX:s,scaleY:l,stroke:S,strokeWidth:p,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:m,shadowOpacity:f,fill:t,x:o,y:a,radius:i,offsetX:-i,offsetY:-i,sides:u,opacity:I},O,g))},jg=(ic.defaultProps=Pa(Pa({},Be.defaults),{},{fill:"#000",sides:3}),["id","name","text","fontFamily","fontSize","fontStyle","fill","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity","letterSpacing","lineHeight","align"]);function Ia(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ja(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ia(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ia(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var sc=function(x){var e=x.id,n=x.name,t=x.text,o=x.fontFamily,a=x.fontSize,i=x.fontStyle,s=x.fill,l=x.x,d=x.y,u=x.width,O=x.height,S=x.scaleX,p=x.scaleY,y=x.rotation,v=x.annotationEvents,w=x.stroke,m=x.strokeWidth,f=x.shadowOffsetX,I=x.shadowOffsetY,g=x.shadowBlur,P=x.shadowColor,j=x.shadowOpacity,C=x.opacity,B=x.letterSpacing,N=x.lineHeight,L=x.align,x=Z(x,jg);return c.createElement(cl,ae({id:e,name:n,rotation:y,scaleX:S,scaleY:p,stroke:w,strokeWidth:m,shadowOffsetX:f,shadowOffsetY:I,shadowBlur:g,shadowColor:P,shadowOpacity:j,opacity:C,fill:s,text:t,fontFamily:o,fontStyle:i,fontSize:a,letterSpacing:B,lineHeight:N,align:L,x:l,y:d,width:u,height:O},v,x))},Cg=(sc.defaultProps=ja(ja({},Be.defaults),{},{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur imperdiet tortor quis odio facilisis, id aliquet nulla facilisis. Etiam tincidunt tempor odio nec placerat.",fontFamily:"Arial",fontSize:14,fill:"#000",width:0,height:0,letterSpacing:void 0,lineHeight:void 0,align:"left"}),function(r){return r=r.split("/"),r[r.length-1].split("?")[0]}),cc=function(r,e){return new Promise(function(n,t){var o=new Image;o.src=r,o.crossOrigin="Anonymous",o.name=e!=null?e:Cg(r),o.onload=function(){n(o)},o.onerror=function(){t(new Error("Error in loading the image with the provided url: ".concat(r)))}})},xg=["id","name","image","x","y","width","height","scaleX","scaleY","rotation","annotationEvents","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"];function Ca(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function xa(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ca(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ca(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var lc=function(g){var e=g.id,n=g.name,t=g.image,o=g.x,a=g.y,i=g.width,s=g.height,l=g.scaleX,d=g.scaleY,u=g.rotation,O=g.annotationEvents,S=g.stroke,p=g.strokeWidth,y=g.shadowOffsetX,v=g.shadowOffsetY,w=g.shadowBlur,m=g.shadowColor,f=g.shadowOpacity,I=g.opacity,g=Z(g,xg),C=b.exports.useState(null),C=T(C,2),P=C[0],j=C[1],C=(b.exports.useEffect(function(){typeof t=="string"&&cc(t).then(j)},[t]),t instanceof HTMLImageElement);return C||P?c.createElement(Zt,ae({id:e,name:n,rotation:u,scaleX:l,scaleY:d,stroke:S,strokeWidth:p,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:m,shadowOpacity:f,image:C?t:P,x:o,y:a,width:i,height:s,opacity:I},g,O,g)):null},_g=(lc.defaultProps=xa(xa({},Be.defaults),{},{width:0,height:0}),["id","name","scaleX","scaleY","rotation","annotationEvents","points","lineCap","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","tension","opacity"]);function _a(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Na(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?_a(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):_a(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var kn=function(f){var e=f.id,n=f.name,t=f.scaleX,o=f.scaleY,a=f.rotation,i=f.annotationEvents,s=f.points,l=f.lineCap,d=f.stroke,u=f.strokeWidth,O=f.shadowOffsetX,S=f.shadowOffsetY,p=f.shadowBlur,y=f.shadowColor,v=f.shadowOpacity,w=f.tension,m=f.opacity,f=Z(f,_g);return c.createElement(ll,ae({id:e,name:n,rotation:a,scaleX:t,scaleY:o,stroke:d,strokeWidth:u,shadowOffsetX:O,shadowOffsetY:S,shadowBlur:p,shadowColor:y,shadowOpacity:v,points:s,lineCap:l,tension:w,hitStrokeWidth:20,x:0,y:0,opacity:m},i,f))},Ng=(kn.defaultProps=Na(Na({},Be.defaults),{},{stroke:"#000000",strokeWidth:1,lineCap:"butt",annotationEvents:{},tension:void 0}),["id","name","fill","pointerLength","pointerWidth","scaleX","scaleY","rotation","annotationEvents","points","lineCap","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","opacity"]);function Aa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ka(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Aa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Aa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var ve,Ra=function(g){var e=g.id,n=g.name,t=g.fill,o=g.pointerLength,a=g.pointerWidth,i=g.scaleX,s=g.scaleY,l=g.rotation,d=g.annotationEvents,u=g.points,O=g.lineCap,S=g.stroke,p=g.strokeWidth,y=g.shadowOffsetX,v=g.shadowOffsetY,w=g.shadowBlur,m=g.shadowColor,f=g.shadowOpacity,I=g.opacity,g=Z(g,Ng);return c.createElement(ul,ae({id:e,name:n,rotation:l,scaleX:i,scaleY:s,stroke:S,strokeWidth:p,shadowOffsetX:y,shadowOffsetY:v,shadowBlur:w,shadowColor:m,shadowOpacity:f,fill:t,x:0,y:0,points:u,pointerLength:o,pointerWidth:a,lineCap:O,opacity:I},d,g))},Ag=(Ra.defaultProps=ka(ka({},Be.defaults),{},{stroke:"#000000",strokeWidth:6,fill:void 0,lineCap:"butt",pointerLength:void 0,pointerWidth:void 0}),h(ve={},E.RECT,oc),h(ve,E.ELLIPSE,ac),h(ve,E.POLYGON,ic),h(ve,E.TEXT,sc),h(ve,E.IMAGE,lc),h(ve,E.LINE,kn),h(ve,E.ARROW,Ra),h(ve,E.PEN,kn),ve),kg=function(t){var e=t.annotation,n=t.annotationEvents,t=t.selectionsIds,o=Ag[e.name];return c.createElement(o,ae({key:e.id,annotationEvents:n,draggable:t.includes(e.id)},e))},Rg=b.exports.memo(kg),Lg=function(){var r=D(),n=r.annotations,e=n===void 0?{}:n,n=r.selectionsIds,t=n===void 0?[]:n,o=Jd();return b.exports.useMemo(function(){return Object.values(e).map(function(a){return c.createElement(Rg,{key:a.id,annotation:a,annotationEvents:o,selectionsIds:t})})},[e,o,t])},Fg=function(r,e){return c.createElement(dl,ae({ref:e},r))},Dg=b.exports.forwardRef(Fg);function La(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function fn(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?La(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):La(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Mg=Eg(),$g=function(){var r=b.exports.useRef(),j=D(),e=j.initialCanvasWidth,n=j.initialCanvasHeight,$=j.canvasWidth,t=j.canvasHeight,o=j.dispatch,m=j.toolId,a=j.canvasScale,l=j.originalImage,i=l===void 0?{}:l,l=j.finetunes,s=l===void 0?[]:l,l=j.finetunesProps,l=l===void 0?{}:l,p=j.filter,d=p===void 0?null:p,p=j.adjustments,S=(p=p===void 0?{}:p).rotation,u=S===void 0?0:S,S=p.crop,O=S===void 0?{}:S,S=p.isFlippedX,p=p.isFlippedY,j=j.resize,y=b.exports.useRef(),v=b.exports.useRef(),w=m===E.CROP,m=b.exports.useMemo(function(){return d?[].concat(oe(s),[d]):s},[s,d]),f=b.exports.useMemo(function(){var J=i.width-Mg;return{width:J,height:J/(i.width/i.height)}},[i]),R=b.exports.useMemo(function(){return xe(i.width,i.height,u)},[i,u]),I=b.exports.useMemo(function(){return Tn(e,n,i.width,i.height)},[i,e,n]),g=b.exports.useMemo(function(){return{width:f.width*I,height:f.height*I}},[f,I]),P=j.width&&!w?j.width/((P=(P=O.width)!=null?P:g.width)!=null?P:R.width):1,j=j.height&&!w?j.height/((j=(j=O.height)!=null?j:g.height)!=null?j:R.height):1,C=$/(2*a)-g.width*P/2,B=t/(2*a)-g.height*j/2,N=$/(2*a)-g.width/2,L=t/(2*a)-g.height/2,x=b.exports.useMemo(function(){return{x:Math.round(C),y:Math.round(B),abstractX:Math.round(N),abstractY:Math.round(L),width:g.width,height:g.height,scaledBy:a}},[a,C,B,N,L,g]),A=b.exports.useCallback(function(){y.current?y.current.cache():setTimeout(A,0)},[]),R=xe(x.width,x.height,u),$=w?1:Tn(x.width,x.height,R.width,R.height);return b.exports.useEffect(function(){return i&&A(),function(){var J;(J=y.current)!=null&&J.clearCache()}},[i]),b.exports.useEffect(function(){x&&o({type:Qs,payload:{shownImageDimensions:x,designLayer:r.current,previewGroup:v.current}})},[x]),!C||!B||!x?null:(t=Sg(O.x,O.y,u),R=C+(!w&&O.width?(S?-1:1)*(x.width/2-O.x-O.width/2+t.x)*P:0),t=B+(!w&&O.height?(p?-1:1)*(x.height/2-O.y-O.height/2+t.y)*j:0),R=w?N:R,t=w?L:t,c.createElement($n,{id:Wl,ref:r,xPadding:R,yPadding:t,offsetX:g.width/2,offsetY:g.height/2,x:g.width*P/2+R,y:g.height*j/2+t,scaleX:(S?-1:1)*(w?1:P)*$,scaleY:(p?-1:1)*(w?1:j)*$,rotation:w?0:u,clipFunc:function(J){var V=w&&!((V=r.current)!=null&&(V=V.attrs)!=null&&V.isSaving),Se=V?fn(fn({},x),{},{x:0,y:0}):{width:O.width||x.width,height:O.height||x.height,x:O.x||0,y:O.y||0};Gl(J,fn({ratio:O.ratio},Se),V),r.current&&r.current.setAttrs({clipX:Se.x,clipY:Se.y,clipWidth:Se.width,clipHeight:Se.height})}},c.createElement(Zt,ae({id:bi,image:i,width:g.width,height:g.height,offsetX:g.width/2,offsetY:g.height/2,x:g.width/2,y:g.height/2,listening:!1,filters:m,ref:y},l)),c.createElement(Lg,null),c.createElement(Dg,{ref:v})))},Bg=function(r,e){return G(r)===G(e)};function Fa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function zg(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Fa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Fa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Kg=function(r,t){var n=t.width-(2*r.radiusX||r.width),t=t.height-(2*r.radiusY||r.height);return{x:G(Math.min(Math.max(r.x,0),n)),y:G(Math.min(Math.max(r.y,0),t))}},gn=function(r,e,n,t){var o,a,i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{},s={x:G(n.abstractX*n.scaledBy),y:G(n.abstractY*n.scaledBy),width:G(n.width*n.scaledBy),height:G(n.height*n.scaledBy)},l=zg({},e);return e.x<s.x&&(l.x=s.x,l.width=r.x-s.x+r.width),e.y<s.y&&(l.y=s.y,l.height=r.y-s.y+r.height),l.x+l.width>s.x+s.width&&(l.width=s.x+s.width-l.x),l.y+l.height>s.y+s.height&&(l.height=s.y+s.height-l.y),t&&!Bg(l.width/l.height,t)&&(o=l.height*t,a=l.width/t,G(l.y+a)<=s.y+s.height?l.height=a:l.width=o),(i.minWidth&&l.width<=i.minWidth||i.maxWidth&&l.width>=i.maxWidth)&&(l.width=ee(l.width,i.minWidth,i.maxWidth),l.x=r.x,l.y=r.y,t&&(l.height=l.width/t)),(i.minHeight&&e.height<=i.minHeight||i.maxHeight&&e.height>=i.maxHeight)&&(l.height=ee(l.height,i.minHeight,i.maxHeight),l.x=r.x,l.y=r.y,t&&(l.width=l.height*t)),l};function Da(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function de(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Da(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Da(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var Wg=function(){function r(){return f===wi?i.width/i.height:f}function e(V,A){var R=V.width,$=V.height,J=V.x,V=V.y,J={x:d?s.width-J-R:J,y:u?s.height-V-$:V,width:R,height:$},V=l.width>=O.width&&l.height>=O.height;O.width&&O.height&&(R<O.width||$<O.height)&&V&&t({type:$e,payload:{feedback:{message:S("cropSizeLowerThanResizedWarning"),status:rt.WARNING}}}),t({type:sr,payload:de(de(de({},l),J),{},{dismissHistory:A})})}function n($,A){y.current&&p.current&&y.current.nodes([p.current]);var R=w.current,$={width:$,height:A,x:($=l.x)!=null?$:0,y:(A=l.y)!=null?A:0};e(gn($,$,de(de({},R),{},{abstractX:0,abstractY:0}),!(I||g)&&r(),m),!0)}var N=D(),t=N.dispatch,o=N.theme,a=N.designLayer,i=N.originalImage,s=N.shownImageDimensions,L=N.adjustments,j=(L=L===void 0?{}:L).crop,l=j===void 0?{}:j,d=L.isFlippedX,u=L.isFlippedY,j=N.resize,O=j===void 0?{}:j,L=N.config,S=N.t,p=b.exports.useRef(),y=b.exports.useRef(),v=b.exports.useRef(),w=b.exports.useRef(),m=L[E.CROP],f=l.ratio||m.ratio,I=f===Ei,g=f===Me;if(b.exports.useEffect(function(){return a&&y.current&&p.current&&(v.current&&v.current.cache(),y.current.nodes([p.current])),function(){v.current&&v.current.clearCache()}},[a,i,s]),b.exports.useEffect(function(){var x,A;w.current&&(A=w.current,n((x=l.width)!=null?x:A.width,(x=l.height)!=null?x:A.height))},[f]),b.exports.useEffect(function(){y.current&&p.current&&w.current&&l.width&&l.height&&n(l.width,l.height)},[m,s.width,s.height]),b.exports.useEffect(function(){s&&(w.current=s)},[s]),!a)return null;function P(x){var A=1<arguments.length&&arguments[1]!==void 0&&arguments[1];x.target&&e({width:x.target.width()*x.target.scaleX(),height:x.target.height()*x.target.scaleY(),x:x.target.x(),y:x.target.y()},A)}var j=I||g?void 0:["top-left","bottom-left","top-right","bottom-right"],N=l.width||l.height?l:(N=s.scaledBy<1?s.scaledBy:1,L=de(de({},s),{},{width:s.width/N,height:s.height/N}),gn(L,de(de({},L),{},{x:0,y:0}),de(de({},L),{},{abstractX:0,abstractY:0}),!(I||g)&&r(),m)),L=N.x,L=L===void 0?0:L,C=N.y,C=C===void 0?0:C,B=N.width,N=N.height,L={x:d?s.width-L-B:L,y:u?s.height-C-N:C,ref:p,fill:"#FFFFFF",scaleX:1,scaleY:1,globalCompositeOperation:"destination-out",onDragEnd:P,onDragMove:function(x){x=x.target,x.setAttrs(Kg(x.attrs,w.current))},onTransformEnd:P,draggable:!0};return c.createElement(c.Fragment,null,c.createElement(Zt,{image:i,x:d?s.width:0,y:u?s.height:0,width:s.width,height:s.height,filters:[U.Filters.Blur,U.Filters.Brighten],blurRadius:10,brightness:-.3,scaleX:d?-1:1,scaleY:u?-1:1,ref:v}),g?c.createElement(mi,ae({},L,{radiusX:B/2,radiusY:N/2,offset:{x:-B/2,y:-N/2}})):c.createElement(gi,ae({},L,{width:B,height:N})),c.createElement(hi,{centeredScaling:!1,flipEnabled:!1,rotateEnabled:!1,nodes:p.current?[p.current]:[],anchorSize:14,anchorCornerRadius:7,enabledAnchors:j,ignoreStroke:!1,anchorStroke:o.palette["accent-primary"],anchorFill:o.palette["access-primary"],anchorStrokeWidth:2,borderStroke:o.palette["accent-primary"],borderStrokeWidth:2,borderDash:[4],keepRatio:!I||!g,ref:y,boundBoxFunc:function(x,A){return gn(x,A,w.current,!(I||g)&&r(),m)}}))},Xg=function(){function r(){s.length===1&&s[0].name()===E.TEXT&&a({type:cr,payload:{textIdOfEditableContent:s[0].id()}})}var e,i=D(),t=i.selectionsIds,n=t===void 0?[]:t,t=i.theme,o=i.designLayer,a=i.dispatch,i=i.config.useCloudimage,s=b.exports.useMemo(function(){return o!=null&&o.findOne?n.map(function(l){return o.findOne("#".concat(l))}).filter(Boolean):[]},[n]);return c.createElement(hi,{id:vi,centeredScaling:!1,rotationSnaps:[0,45,90,135,180,225,270,315],nodes:s,rotateAnchorOffset:30,anchorSize:14,anchorCornerRadius:7,padding:s.length===1&&(e=s[0].attrs.padding)!=null?e:1,ignoreStroke:!1,anchorStroke:t.palette["accent-primary"],anchorFill:t.palette["access-primary"],anchorStrokeWidth:2,borderStroke:t.palette["accent-primary"],borderStrokeWidth:2,borderDash:[4],rotateEnabled:!i,onMouseOver:function(){a({type:Ot,payload:{pointerCssIcon:we.MOVE}})},onMouseLeave:function(){a({type:Ot,payload:{pointerCssIcon:we.DRAW}})},onDblClick:r,onDblTap:r,flipEnabled:!0,shouldOverdrawWholeArea:!0})},Gg=function(){var e=D(),r=e.toolId,e=e.shownImageDimensions;return c.createElement($n,{id:yi,x:e.abstractX||0,y:e.abstractY||0},c.createElement(Xg,null),r===E.CROP&&c.createElement(Wg,null))},Hg=k.div.withConfig({componentId:"sc-1tst9ex-0"})(function(t){var e=t.theme,n=t.top,t=t.left;return`
  position: absolute;
  z-index: 1;
  background: `.concat(e.palette["bg-secondary"],`;
  border-radius: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0px 1px 2px `).concat(e.palette["light-shadow"],`;
  top: `).concat((n||0)+8,`px;
  left: `).concat((t||0)+4,`px;
  transform: translateX(-50%);
  height: 32px;
`)}),Yg=function(){var s=D(),n=s.selectionsIds,r=n===void 0?[]:n,e=s.designLayer,n=s.annotations,t=s.dispatch,s=b.exports.useState({left:0,top:0}),s=T(s,2),o=s[0],a=s[1],i=b.exports.useMemo(function(){var d;return e==null||(d=e.getStage())==null?void 0:d.findOne("#".concat(vi))},[e]),s=r.length,l=Qt(function(){i&&a({left:(i.x()+i.width()/2)*i.scaleX(),top:(i.y()+i.height())*i.scaleY()})},0);return b.exports.useEffect(function(){l()},[r,i,n]),s!==0&&i?c.createElement(Hg,{className:"FIE_annotation-controls-overlay",left:o.left,top:o.top},r[0]!==Ce&&c.createElement(Fe,{color:"link",size:"sm",onClick:function(){t({type:tc,payload:{annotationsIds:r}})}},c.createElement(Oi,null)),c.createElement(Fe,{color:"link",size:"sm",onClick:function(){t({type:ec,payload:{annotationsIds:r}})}},c.createElement(pl,null))):null};function Ma(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function $a(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ma(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ma(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}function Ug(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Ba(r,e){return{x:(r.x+e.x)/2,y:(r.y+e.y)/2}}var Ze=null,ht=0,Vg=function(r,e){r.evt.preventDefault();var n,t,o,a,i,s,l=r.evt.touches[0],d=r.evt.touches[1];l&&d&&((r=r.currentTarget).isDragging()&&r.stopDrag(),l={x:l.clientX,y:l.clientY},d={x:d.clientX,y:d.clientY},Ze?(n=Ba(l,d),t=Ug(l,d),ht=ht||t,s=(n.x-r.x())/r.scaleX(),o=(n.y-r.y())/r.scaleX(),r=r.scaleX()*(t/ht),a=n.x-Ze.x,i=n.y-Ze.y,s={x:n.x-s*r+a,y:n.y-o*r+i},ht=t,Ze=n,e($a($a({},s),{},{factor:r,preparedDimensions:!0}))):Ze=Ba(l,d))},qg=function(r){ht=0,Ze=null,typeof r=="function"&&r()},Zg=k.div.withConfig({componentId:"sc-3ln9py-0"})(["width:100%;position:relative;height:calc(100% - 94px - 12px);background:",";overflow:hidden;min-height:250px;flex-grow:1;"],function(r){return r.theme.palette["bg-primary"]}),Jg=k.img.withConfig({componentId:"sc-3ln9py-1"})(["max-width:98%;max-height:98%;box-shadow:0 0 0 5px rgba(0,0,0,0.1);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2;"]),Qg=k(li).withConfig({componentId:"sc-3ln9py-2"})(["outline:none;"]);function za(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ka(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?za(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):za(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var em=.006,tm=function(i){function e(C){l({type:it,payload:C})}function n(){return I(u!==X.ANNOTATE||u===X.WATERMARK)}function t(C){(C.code==="Space"||C.key==="Control")&&!C.repeat&&v.factor>w&&m&&(C.preventDefault(),I(!0),l({type:Ot,payload:{pointerCssIcon:we.DRAG}}))}function o(C){C.code==="Space"&&(C.preventDefault(),n())}function a(){s.current&&s.current.container().focus()}var i=i.children,s=(fl(!0),b.exports.useRef()),P=D(),l=P.dispatch,d=P.pointerCssIcon,u=P.tabId,g=P.toolId,O=P.canvasWidth,S=P.canvasHeight,p=P.canvasScale,j=P.selectionsIds,y=j===void 0?[]:j,j=P.zoom,v=j===void 0?{}:j,j=P.config.previewPixelRatio,w=(U.pixelRatio=j,De),m=g!==E.CROP,P=b.exports.useState(u!==X.ANNOTATE&&u!==X.WATERMARK&&v.factor>w),j=T(P,2),f=j[0],I=j[1],g=b.exports.useMemo(function(){return{cursor:d===we.DEFAULT&&u===X.ANNOTATE?we.DRAW:d}},[u,d]),P=b.exports.useCallback(function(C){var B,N;C.evt.preventDefault(),(B=(N=C.currentTarget).container)!=null&&B.call(N).focus(),C.target instanceof U.Stage&&0<y.length&&l({type:ar})},[y]),j=(b.exports.useEffect(function(){l({type:Ot,payload:{pointerCssIcon:we[f?"DRAG":"DEFAULT"]}})},[f]),b.exports.useEffect(function(){var C;return I(u!==X.ANNOTATE&&u!==X.WATERMARK&&v.factor>w),s.current&&((C=s.current.container()).addEventListener("mouseenter",a),C.addEventListener("keydown",t),C.addEventListener("keyup",o)),function(){C&&(C.removeEventListener("mouseenter",a),C.removeEventListener("keydown",t),C.removeEventListener("keyup",o))}},[u,v.factor,w]),p*(m&&v.factor||w));return c.createElement(Qg,{className:"FIE_canvas-node",tabIndex:-1,ref:s,width:O,height:S,scaleX:j,scaleY:j,x:m&&v.x||null,y:m&&v.y||null,zoomFactor:m&&v.factor||w,onWheel:m?function(N){N.evt.preventDefault();var B=(v.factor||w)+N.evt.deltaY*-em,N=N.currentTarget.getPointerPosition();e(Ka(Ka({},N),{},{factor:B}))}:void 0,onTap:P,onClick:P,onTouchMove:m?function(C){return Vg(C,e)}:void 0,onDragStart:function(C){1<((C=C.evt.touches)==null?void 0:C.length)&&I(!1)},onTouchEnd:m?function(){qg(n)}:void 0,dragBoundFunc:function(C){return{x:Math.min(0,Math.max(C.x,O*(1-v.factor))),y:Math.min(0,Math.max(C.y,S*(1-v.factor)))}},draggable:m&&f,onDragEnd:function(C){C.currentTarget.draggable()&&C.target.nodeType.toLowerCase()==="stage"&&m&&f&&e({factor:v.factor,x:C.target.x(),y:C.target.y(),preparedDimensions:!0})},style:g},i)},nm=b.exports.memo(tm),rm=function(){var t=Jn(),r=T(t,1)[0],e=D(),n=b.exports.useCallback(function(i){var a=i.width,i=i.height;e.dispatch({type:Zs,payload:{canvasWidth:a,canvasHeight:i}})},[]),t=b.exports.useCallback(function(o){r(o,n)},[]);return c.createElement(Zg,{className:"FIE_canvas-container",ref:t},!e.textIdOfEditableContent&&c.createElement(Yg,null),e.isShowOriginalImage&&c.createElement(Jg,{className:"FIE_original-image-compare",src:e.originalImage.src}),c.createElement(nm,null,c.createElement(Md,{overridingValue:e},c.createElement($g,null),c.createElement(Gg,null))))},om=k.div.withConfig({componentId:"sc-etsyb6-0"})(["display:inline-block;height:",";width:",";border-radius:1px;background:#dfe7ed;"],function(r){return r.height},function(r){return r.width}),uc=function(n){var e=n.height,n=n.width;return c.createElement(om,{height:e,width:n})},am=(uc.defaultProps={height:"11px",width:"1px"},k.div.withConfig({componentId:"sc-21g986-0"})(["padding:12px 12px 8px 12px;box-sizing:border-box;position:relative;width:100%;display:flex;align-items:center;justify-content:space-between;",";[data-phone='true'] &{padding:6px 6px 4px 6px;}"],function(r){return r.reverseDirection?"flex-direction: row-reverse":""})),lr=k(Fe).withConfig({componentId:"sc-21g986-1"})(["margin:",";:first-of-type{margin:",";}width:23px;height:23px;padding:4px;"],function(r){return r=r.margin,r!=null?r:"0 4px"},function(r){return r=r.margin,r!=null?r:"0 4px 0 8px"}),Rn=k(Fe).withConfig({componentId:"sc-21g986-2"})(["width:20px;height:20px;margin:0 ",";padding:4px;"],function(r){return(r=r.horizontalMargin)!=null?r:"4px"}),Wa=k.div.withConfig({componentId:"sc-21g986-3"})(["display:flex;align-items:center;",";"],function(r){return r.reverseDirection?"flex-direction: row-reverse":""}),im=k(H).withConfig({componentId:"sc-21g986-4"})(["cursor:pointer;"]),sm=k.span.withConfig({componentId:"sc-21g986-5"})(["font-size:11px;line-height:12px;"]),dc=k(Fe).withConfig({componentId:"sc-21g986-6"})(["padding:0;z-index:111;"]),cm=(k(Le).withConfig({componentId:"sc-21g986-7"})(["padding:4px 12px;"]),k(Bn).withConfig({componentId:"sc-21g986-8"})(["width:200px;"])),lm=k(ui).withConfig({componentId:"sc-21g986-9"})(["width:60px;margin-left:4px;"]),um=k.div.withConfig({componentId:"sc-21g986-10"})(["width:100%;margin-top:8px;"]),dm=k.div.withConfig({componentId:"sc-21g986-11"})(["margin-top:8px;width:100%;"]),pm=function(){var r=D(),e=r.haveNotSavedChanges,n=r.config.onClose;return typeof n=="function"?c.createElement(dc,{className:"FIE_topbar-close-button",color:"link",size:"sm",onClick:function(){n(Wn.CLOSE_BUTTON,e)}},n&&c.createElement(gl,null)):c.createElement("span",null)},fm=k(ml).withConfig({componentId:"sc-kpjpf5-0"})([".SfxModalTitle-LabelPrimary{font-size:14px;line-height:16px;font-weight:500;}"]);function Xa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function Ga(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Xa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Xa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var gm={width:300},ur=function(v){var e=v.title,n=v.hint,t=v.Icon,o=v.onDone,a=v.onCancel,i=v.doneLabel,s=v.cancelLabel,l=v.isOpened,d=v.doneButtonStyle,u=v.doneButtonColor,u=u===void 0?"link":u,O=v.cancelButtonColor,O=O===void 0?"link":O,S=v.children,p=v.areButtonsDisabled,y=v.zIndex,v=v.className;return c.createElement(hl,{className:v,open:l,onClose:a,style:Ga(Ga({},gm),{},{zIndex:y}),onKeyUp:function(w){w.key==="Enter"&&o(w)}},c.createElement(fm,{icon:c.createElement(t,{size:25}),iconShadow:!0,onClose:a,primary:e,secondary:n,variant:"with-icon"}),S&&c.createElement(Ol,null,S),c.createElement(yl,{align:"center"},c.createElement(Le,{color:O,onClick:a,size:"md",disabled:p},s),c.createElement(Le,{color:u,onClick:o,size:"md",style:d,disabled:p},i)))};function Ha(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function re(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Ha(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Ha(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}ur.defaultProps={hint:"",isOpened:!1,doneLabel:"Yes",cancelLabel:"No",doneButtonStyle:void 0,doneButtonColor:"link",cancelButtonColor:"link",children:void 0,areButtonsDisabled:!1,zIndex:void 0,className:void 0};var mn,mm={marginBottom:16},hm={width:67},Om={marginLeft:12},hn=!0,Ya=function(){function r(){var R=B(j);(o.current||w)(R.imageData,R.designState),o.current=null,y&&p&&p(Wn.AFTER_SAVE,u)}function e(){if(typeof(o.current||w)!="function")throw new Error("Please provide onSave function handler.");return j.name&&j.extension?void x():void i({type:$e,payload:{feedback:{message:O("nameIsRequired")}}})}function n(){var R;return I?(R=B(j),void(o.current||w)(R.imageData,R.designState)):o.current||typeof v!="function"||v(j)!==!1?void P(!0):void e()}function t(R,$){if(typeof R!="function")throw new Error("onSave function callback is required as an argument to the passed function.");o.current=R,$()}var A=D(),o=b.exports.useRef(),a=A.theme,i=A.dispatch,s=A.originalImage,l=A.resize,d=A.isLoadingGlobally,u=A.haveNotSavedChanges,L=A.feedback,O=A.t,N=A.adjustments,S=(N=N===void 0?{}:N).crop,N=A.config,p=N.onClose,y=N.closeAfterSave,v=N.onBeforeSave,w=N.onSave,m=N.forceToPngInEllipticalCrop,f=N.defaultSavedImageType,I=N.useCloudimage,A=N.moreSaveOptions,N=b.exports.useState(!1),N=T(N,2),g=N[0],P=N[1],N=b.exports.useState({quality:.92}),N=T(N,2),j=N[0],C=N[1],B=Ps(),N=["jpeg","jpg","webp"].includes(j.extension),L=L.duration===0,x=function(){i({type:Yn}),P(!1),setTimeout(r,3)},A=(b.exports.useEffect(function(){var R,$;!s||j.name&&j.extension||(R=($=Ts(s.name,m&&S.ratio===Me?"png":nt.includes(f==null?void 0:f.toLowerCase())&&f)).name,$=$.extension,C(re(re({},j),{},{name:R,extension:$})))},[s,g]),b.exports.useEffect(function(){C(re(re({},j),{},{size:{width:l.width,height:l.height}}))},[l]),b.exports.useEffect(function(){return hn=!0,function(){hn=!1}},[]),Array.isArray(A)&&0<A.length?A.map(function(R,$){return re(re({},R),{},{key:"".concat(R.label||$,"-option-key"),onClick:typeof R.onClick=="function"?function(){return R.onClick(function(J){return t(J,n)},function(J){return t(J,x)})}:void 0})}):[]);return c.createElement(c.Fragment,null,c.createElement(or,{className:"FIE_topbar-save",color:"primary",label:O("save"),onClick:n,menuPosition:"bottom",menuItems:A,menuStyle:Om,wrapperStyle:hm,disabled:d||L}),g&&c.createElement(ur,{className:"FIE_save-modal",title:O("saveAsModalLabel"),Icon:function(R){return c.createElement(bl,ae({color:a.palette["accent-primary"]},R))},isOpened:g,onCancel:function(){hn&&g&&(o.current=null,P(!1))},onDone:e,doneLabel:O("save"),cancelLabel:O("cancel"),doneButtonColor:"primary",areButtonsDisabled:d,zIndex:11110},c.createElement(cm,{className:"FIE_save-file-name-input",value:j.name,onChange:function(R){R=R.target.value,C(re(re({},j),{},{name:R}))},size:"sm",placeholder:O("name"),error:!!j.name,focusOnMount:!0}),c.createElement(lm,{className:"FIE_save-extension-selector",onChange:function(R){return C(re(re({},j),{},{extension:R}))},value:j.extension,placeholder:O("extension"),size:"sm"},nt.map(function(R){return c.createElement(st,{key:R,value:R},R)})),N&&c.createElement(um,{className:"FIE_save-quality-wrapper"},c.createElement(H,null,O("quality")),c.createElement(te,{annotation:"%",min:1,max:100,onChange:function(R){C(re(re({},j),{},{quality:ee(R/100,.01,1)}))},value:parseInt(100*j.quality,10),width:"100%",style:mm})),c.createElement(dm,{className:"FIE_save-resize-wrapper"},c.createElement(H,null,O("resize")),c.createElement(rr,{onChange:function(R){C(re(re({},j),{},{size:re(re({},j.size),R)}))},currentSize:(j==null?void 0:j.size)||{},hideResetButton:!0,alignLeft:!0}))))},Ln=function(n){function e(){d(!1)}var n=n.margin,i=D(),t=i.dispatch,o=i.isResetted,o=o===void 0||o,a=i.theme,s=i.feedback,i=i.t,s=s.duration===0,u=b.exports.useState(!1),u=T(u,2),l=u[0],d=u[1],u=b.exports.useCallback(function(){t({type:Hn}),e()},[]);return c.createElement(c.Fragment,null,c.createElement(lr,{className:"FIE_topbar-reset-button",color:"link",onClick:o?void 0:function(){d(!0)},disabled:o||s,title:i("resetOperations"),margin:n},c.createElement(vl,{size:12})),l&&c.createElement(ur,{title:i("changesLoseConfirmation"),hint:i("changesLoseConfirmationHint"),isOpened:l,onCancel:e,onDone:u,Icon:function(){return c.createElement(wl,{color:a.palette.warning,size:25})},doneLabel:i("continue"),cancelLabel:i("cancel"),doneButtonColor:"error",doneButtonStyle:{background:a.palette.warning}}))},Fn=(Ln.defaultProps={margin:void 0},function(e){var e=e.margin,a=D(),n=a.dispatch,t=a.hasUndo,t=t!==void 0&&t,o=a.t,a=a.feedback.duration===0,i=b.exports.useCallback(function(){n({type:Zn})},[]);return c.createElement(lr,{className:"FIE_topbar-undo-button",color:"link",onClick:t?i:void 0,disabled:!t||a,title:o("undoTitle"),margin:e},c.createElement(El,{size:12}))}),Dn=(Fn.defaultProps={margin:void 0},function(e){var e=e.margin,o=D(),n=o.dispatch,t=o.hasRedo,t=t!==void 0&&t,o=o.t,a=b.exports.useCallback(function(){n({type:Gn})},[]);return c.createElement(lr,{className:"FIE_topbar-redo-button",color:"link",onClick:t?a:void 0,disabled:!t,title:o("redoTitle"),margin:e},c.createElement(Sl,{size:12}))}),ym=(Dn.defaultProps={margin:void 0},function(){function r(){e({type:An,payload:{isShow:!0}}),document.addEventListener("mouseup",d),document.addEventListener("mouseleave",d),document.addEventListener("touchcancel",d),document.addEventListener("touchend",d)}var l=D(),e=l.dispatch,n=l.isResetted,n=n===void 0||n,t=l.originalImage,o=l.resize,i=l.adjustments,a=i.crop,i=i.rotation,s=l.shownImageDimensions,l=l.t,d=function(){e({type:An,payload:{isShow:!1}}),document.removeEventListener("mouseup",d),document.removeEventListener("mouseleave",d),document.removeEventListener("touchcancel",d),document.removeEventListener("touchend",d)};return t?(o=Hs(o===void 0?{}:o,a,s,t,i===void 0?0:i),c.createElement(c.Fragment,null,c.createElement(H,{title:l("imageDimensionsHoverTitle")},"".concat(o.width," x ").concat(o.height," px")),c.createElement(Rn,{color:"link",horizontalMargin:"8px",onMouseDown:n?void 0:r,onTouchStart:n?void 0:r,disabled:n,title:l("showImageTitle")},c.createElement(Tl,null)))):null}),bm=[{labelKey:"fitSize",factor:"fit"},{labelKey:"actualSize",factor:1},{label:"25%",factor:.25},{label:"50%",factor:.5},{label:"75%",factor:.75},{label:"125%",factor:1.25},{label:"170%",factor:1.7},{label:"300%",factor:3},{label:"500%",factor:5},{label:"1000%",factor:10}],Ua=1.1,vm=function(){function r(w){t({type:it,payload:{factor:w}})}function e(){var w=s.width&&s.height&&s||d.width&&d.height&&d||i,w=Ut(d.width&&d.height&&d||i,w);r(w||De)}function n(w){p(S?null:w.target)}var u=D(),t=u.dispatch,v=u.zoom,o=v===void 0?{}:v,v=u.toolId,O=u.feedback,a=u.t,i=u.shownImageDimensions,s=u.resize,l=u.originalImage,d=u.adjustments.crop,u=u.config.useZoomPresetsMenu,O=O.duration===0,y=b.exports.useState(null),y=T(y,2),S=y[0],p=y[1],y=v===E.CROP||O,v=!l||s.width||s.height?o.factor:Math.min(i.width*o.factor/l.width,i.height*o.factor/l.height);return c.createElement(c.Fragment,null,c.createElement(Rn,{onClick:function(){r(o.factor/Ua)},color:"link",title:a("zoomOutTitle"),disabled:y},c.createElement(Pl,null)),c.createElement(im,{title:a("toggleZoomMenuTitle"),onClick:y?void 0:u?n:e,"aria-disabled":y},"".concat(G(100*v,0),"%")),c.createElement(bt,{anchorEl:S,onClose:n,open:!!S,position:"bottom"},bm.map(function(I){var m=I.factor,f=I.labelKey,I=I.label;return c.createElement(st,{key:I||f,onClick:function(){var g=m;if(g==="fit")return e(),void n();g=Math.min(g*l.width/i.width,g*l.height/i.height),r(g),n()}},c.createElement(fi,null,I!=null?I:a(f)))})),c.createElement(Rn,{onClick:function(){r(o.factor*Ua)},color:"link",title:a("zoomInTitle"),disabled:y},c.createElement(Il,null)))},wm=function(){var r=D(),e=r.t,n=r.haveNotSavedChanges,t=r.config.onClose;return typeof t=="function"?c.createElement(dc,{className:"FIE_topbar-back-button",color:"link",size:"sm",onClick:function(){t(Wn.CLOSE_BUTTON,n)}},t&&c.createElement(c.Fragment,null,c.createElement(pi,{size:9}),c.createElement(sm,null,e("back")))):c.createElement("span",null)},Em=function(){var r=D().config.showBackButton,e=Qn();return c.createElement(am,{reverseDirection:r,className:"FIE_topbar"},c.createElement(Wa,{reverseDirection:r,className:"FIE_topbar-buttons-wrapper"},e?c.createElement("div",null,c.createElement(Ya,null),c.createElement("div",{style:{marginTop:6},className:"FIE_topbar-history-buttons"},c.createElement(Ln,{margin:"0"}),c.createElement(Fn,{margin:"0"}),c.createElement(Dn,{margin:"0"}))):c.createElement(c.Fragment,null,c.createElement(Ya,null),c.createElement("div",{className:"FIE_topbar-history-buttons"},c.createElement(Ln,null),c.createElement(Fn,null),c.createElement(Dn,null)))),c.createElement(Wa,{className:"FIE_topbar-center-options"},c.createElement(ym,null),c.createElement(uc,null),c.createElement(vm,null)),r?c.createElement(wm,null):c.createElement(pm,null))},Sm=k.div.withConfig({componentId:"sc-qhd6ow-0"})(["padding:0 12px 12px 0;overflow-y:auto;max-height:100%;[data-phone='true'] &{display:flex;padding:0;}"]),Tm=k.div.withConfig({componentId:"sc-qhd6ow-1"})(function(r){return r=r.theme,`
    width: 67px;
    height: 62px;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    background: `.concat(r.palette["bg-primary"],`;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;

    [data-phone='true'] & {
      margin-bottom: 0;
      height: 50px;
      border-radius: 0;
    }

    &,
    * {
      cursor: pointer;
    }

    &:hover {
      background: `).concat(r.palette["bg-primary-active"],`;
    }

    &[aria-selected='true'] {
      background: `).concat(r.palette["bg-primary-active"],`;

      * {
        color: `).concat(r.palette["accent-primary-active"],`;
      }
    }
  `)}),Pm=k(H).withConfig({componentId:"sc-qhd6ow-2"})(["margin-top:6px;font-size:11px;line-height:12px;[data-phone='true'] &{font-size:10px;}"]),Va=function(i){var e=i.id,n=i.label,t=i.Icon,o=i.isSelected,a=i.onClick,i=b.exports.useCallback(function(){typeof a=="function"&&a(e)},[e]);return c.createElement(Tm,{className:"FIE_tab","aria-selected":o,onClick:i},c.createElement(t,null),n&&c.createElement(Pm,{className:"FIE_tab-label"},n))},Im=(Va.defaultProps={isSelected:!1,onClick:void 0,label:void 0},b.exports.memo(Va)),On=[{id:X.ADJUST,labelKey:"adjustTab",icon:jl},{id:X.FINETUNE,labelKey:"finetuneTab",icon:Cl},{id:X.FILTERS,labelKey:"filtersTab",icon:xl,hideFn:function(r){return r.useCloudimage}},{id:X.WATERMARK,labelKey:"watermarkTab",icon:_l},{id:X.ANNOTATE,labelKey:"annotateTab",icon:Nl,hideFn:function(r){return r.useCloudimage}},{id:X.RESIZE,labelKey:"resizeTab",icon:Al}],qa=function(){var s=D(),r=s.t,e=s.dispatch,t=s.tabId,n=t===void 0?null:t,t=s.config,o=t.tabsIds,a=t.defaultTabId,i=t.useCloudimage,s=b.exports.useMemo(function(){var d=[];return 0<Object.keys(o).length?On.forEach(function(u){var O=o.indexOf(u.id);O!==-1&&(d[O]=u)}):d=On,(0<d.length?d:On).filter(function(u){return u=u.hideFn,!u||!u({useCloudimage:i})})},[o]),l=b.exports.useCallback(function(d){e({type:Us,payload:{tabId:d}})},[]);return s.length===1?null:c.createElement(Sm,{className:"FIE_tabs"},s.map(function(S){var u=S.id,O=S.labelKey,S=S.icon;return c.createElement(Im,{key:u,id:u,label:r(O),Icon:S,isSelected:(n||a)===u,onClick:l})}))},Za=function(r){return r=r.children,c.createElement(kd,{className:"FIE_tool-options-wrapper",hasChildren:!!r},r)},Ja=(Za.defaultProps={children:void 0},function(){var p=D(),r=p.t,e=p.dispatch,S=p.tabId,n=p.toolId,t=p.annotations,a=p.selectionsIds,o=a===void 0?[]:a,a=p.config,p=a.defaultTabId,i=a.defaultToolId,s=a.useCloudimage,l=S||p,d=n||i||((a=Wt[l])==null?void 0:a[0]),u=b.exports.useMemo(function(){return Wt[l]||[]},[l]),O=b.exports.useCallback(function(y){e({type:qt,payload:{toolId:y}})},[]),S=b.exports.useMemo(function(){return u.map(function(y){var w=pt[y],v=w.Item,w=w.hideFn;return v&&(!w||!w({useCloudimage:s}))&&c.createElement(v,{key:y,selectTool:O,t:r,isSelected:d===y})})},[u,d]),p=b.exports.useMemo(function(){if(!d)return!1;if(l===X.ANNOTATE){var y,v=o.length;if(v===1)return y=t[o[0]],(y=pt[y.name])==null?void 0:y.ItemOptions;if(1<v)return null}return l&&d&&Wt[l].includes(d)&&(!((y=pt[n])!=null&&y.hideFn)||!((v=pt[n])!=null&&v.hideFn({useCloudimage:s})))&&((y=pt[n])==null?void 0:y.ItemOptions)},[l,d,t,o]);return b.exports.useEffect(function(){!n&&d&&e({type:qt,payload:{toolId:d}})},[]),c.createElement(_d,{className:"FIE_tools-bar-wrapper"},c.createElement(Za,null,p&&c.createElement(p,{t:r})),S&&c.createElement(Nd,{className:"FIE_tools-bar"},S))}),jm={horizontal:"center",vertical:"bottom"},Cm=(h(mn={},rt.ERROR,"sad"),h(mn,rt.WARNING,"worried"),mn),pc=function(e){var e=e.anchorOrigin,n=D(),t=n.feedback,t=t===void 0?{}:t,o=n.dispatch;return t.message?c.createElement(kl,{className:"FIE_feedback-robot",anchorOrigin:e,autoHideDuration:(n=t.duration)!=null?n:5e3,message:t.message,open:!!t.message,status:Cm[t.status||rt.ERROR],onClose:function(){o({type:$e,payload:{feedback:{}}})}}):null},xm=(pc.defaultProps={anchorOrigin:jm},Rl(["0%{transform:rotate(0);animation-timing-function:cubic-bezier(0.55,0.055,0.675,0.19);}50%{transform:rotate(900deg);animation-timing-function:cubic-bezier(0.215,0.61,0.355,1);}100%{transform:rotate(1800deg);}"])),_m=k.div.withConfig({componentId:"sc-m42fbk-0"})(["background:rgba(0,0,0,0.25);display:flex;align-items:center;justify-content:center;position:absolute;z-index:11111;top:0;bottom:0;right:0;left:0;flex-direction:column;user-select:none;label{color:#ffffff;}"]),Nm=k.div.withConfig({componentId:"sc-m42fbk-1"})(["display:inline-block;position:relative;width:80px;height:80px;:after{content:' ';display:block;border-radius:50%;width:0;height:0;margin:8px;box-sizing:border-box;border:32px solid #fff;border-color:#fff transparent #fff transparent;animation:"," 1.2s infinite;}"],xm),fc=function(r){return r=r.label,c.createElement(_m,{className:"FIE_spinner-wrapper"},c.createElement(Nm,{className:"FIE_spinner"}),r&&c.createElement(H,{className:"FIE_spinner-label"},r))},Am=(fc.defaultProps={label:""},["cropX2","cropY2","crop","watermark"]);function Qa(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function he(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?Qa(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Qa(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var km=function(r,e){var n,t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{};switch(r){case"wat_text":return{watermark:{text:e.replaceAll("+"," ")}};case"wat_font":return{watermark:{fontFamily:e}};case"wat_color":return{watermark:{fill:"#".concat(e)}};case"wat_fontsize":return{watermark:{fontSize:parseFloat(e)}};case"wat_opacity":return{watermark:{opacity:parseFloat(e)}};case"wat_pos":var i=e.split(","),i=T(i,2),a=i[0],i=i[1];return{watermark:{x:parseFloat(a)/100*t.width,y:parseFloat(i)/100*t.height}};case"wat_url":return{watermark:{image:decodeURIComponent(e)}};case"wat_scale":return a=e.split(","),i=T(a,2),a=i[0],i=i[1],{watermark:{width:parseFloat(a)/100*(t.width||0),height:parseFloat(i)/100*(t.height||0)}};case"tl_px":return a=e.split(","),i=T(a,2),a=i[0],i=i[1],{crop:{x:Oe(parseFloat(a),0,o.width,0,t.width),y:Oe(parseFloat(i),0,o.height,0,t.height)}};case"br_px":return a=e.split(","),i=T(a,2),a=i[0],i=i[1],{cropX2:Oe(parseFloat(a),0,o.width,0,t.width),cropY2:Oe(parseFloat(i),0,o.height,0,t.height)};case"round":return{crop:{ratio:Me}};case"w":return{resize:{width:parseFloat(e)}};case"h":return{resize:{height:parseFloat(e)}};case"r":return{adjustments:{rotation:-parseInt(e,10)}};case"flip":case"mirror":return{adjustments:{isFlippedX:e.includes("x")||e.includes("h"),isFlippedY:e.includes("y")||e.includes("v")}};default:return Object.keys(Kt).forEach(function(s){Kt[s].cloudimage.name===r.toLowerCase()&&(n=s)}),n?(a=Kt[n],i=a.cloudimage,a=a.internal,{finetunes:[U.Filters[n]],finetunesProps:h({},a.propName,Oe(parseFloat(e),i.min,i.max,a.min,a.max))}):null}},Rm=function(l,e,n){if(!l)return null;var l=l.split("&"),t={},l=(l.forEach(function(u){var u=u.split("="),u=T(u,2),O=u[0],u=u[1],O=km(O,u,e,n);O&&(t=wt(t,O,!0))}),t),o=l.cropX2,a=l.cropY2,i=l.crop,s=l.watermark,l=Z(l,Am);return he(he(he({},l),o&&a&&i?{adjustments:he(he({},l.adjustments),{},{crop:he(he({},i),{},{width:(o||0)-i.x,height:(a||0)-i.y})})}:{}),{},{annotations:he({},s?h({},Ce,he(he({},s),{},{x:((i==null?void 0:i.x)||0)+(s.x||0),y:((i==null?void 0:i.y)||0)+(s.y||0),id:Ce,name:s.text?E.TEXT:E.IMAGE},s.text?{width:s.text.length*s.fontSize,height:s.fontSize}:{})):{})})},yn=function(r,e){return r&&e&&(r instanceof HTMLImageElement&&r.src===e.src&&r.width===e.width&&r.height===e.height||((r==null?void 0:r.src)||r)===e.src)},Lm=k.div.attrs(function(n){var e,n=n.$size,n=n===void 0?{}:n;return{style:{width:(e=n.width)!=null?e:"100%",height:(e=n.height)!=null?e:"100%"}}}).withConfig({componentId:"sc-ugtqr7-0"})(["display:flex;flex-direction:column;align-items:center;height:100%;max-height:100%;width:100%;max-width:100%;overflow:auto;position:relative;min-height:250px;min-width:300px;"]),Fm=k.div.withConfig({componentId:"sc-ugtqr7-1"})(["display:flex;align-items:flex-start;width:100%;padding:12px;box-sizing:border-box;height:calc(100% - 95px);flex-grow:1;[data-phone='true'] &{padding:0;}"]),Dm=k.div.withConfig({componentId:"sc-ugtqr7-2"})(["height:100%;width:calc(100% - 80px);flex-grow:1;overflow-y:auto;display:flex;flex-direction:column;"]),Mm=k.div.withConfig({componentId:"sc-ugtqr7-3"})(["width:100%;flex-grow:1;"]);function ei(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function ti(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ei(Object(e),!0).forEach(function(t){h(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ei(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}var $m=function(){function r(W){return new Promise(function(mr){var ct,ye=(W==null?void 0:W.src)||W;V.current===ye||!ye&&s||yn(ye,s)?V.current||mr():(ct=function(){V.current=null,mr()},V.current=ye,typeof W=="string"?cc(W,I).then(fr).catch(gr).finally(ct):(W instanceof HTMLImageElement?fr(W):gr(d("invalidImageError")),ct()))})}function e(W){Se.current&&(W.preventDefault(),W.returnValue="")}function n(){var W=0<arguments.length&&arguments[0]!==void 0?arguments[0]:function(){return[]};i({type:Yn}),Promise.all(W()).finally(function(){i({type:Xn})})}function t(){O&&0<Object.keys(O).length&&i({type:Xt,payload:ti(ti({},O),{},{finetunes:fs(O==null?void 0:O.finetunes),filter:ds(O==null?void 0:O.filter)})})}var u=D(),A=u.config,o=u.isLoadingGlobally,a=u.haveNotSavedChanges,i=u.dispatch,s=u.originalImage,l=u.shownImageDimensions,d=u.t,u=u.feedback,u=u===void 0?{}:u,O=A.loadableDesignState,S=A.useCloudimage,p=A.cloudimage,y=A.source,v=A.avoidChangesNotSavedAlertOnLeave,w=A.useBackendTranslations,m=A.translations,f=A.language,I=A.defaultSavedImageName,g=A.observePluginContainerSize,P=A.showCanvasOnly,j=A.getCurrentImgDataFnRef,C=A.updateStateFnRef,A=Jn(),A=T(A,2),B=A[0],N=A[1],A=b.exports.useState({width:void 0,height:void 0}),A=T(A,2),L=A[0],x=A[1],A=Qn(),R=b.exports.useRef(null),$=b.exports.useRef(!0),J=b.exports.useRef(!1),V=b.exports.useRef(null),Se=b.exports.useRef(a),pr=Ps(),fr=b.exports.useCallback(function(W){i({type:Js,payload:{originalImage:W}})},[]),gr=b.exports.useCallback(function(W){i({type:$e,payload:{feedback:{message:W.message||W,duration:0}}})},[]);return b.exports.useEffect(function(){$.current||!y||yn(y,s)||(J.current=!1,n(function(){return[r(y)]}))},[y]),b.exports.useEffect(function(){var W;$.current||((W=O==null?void 0:O.imgSrc)&&!yn(W,s)?n(function(){return[r(W).then(t)]}):t())},[O]),b.exports.useEffect(function(){0<Object.keys(l||{}).length&&!Object.keys(l).some(function(W){return!l[W]})&&s&&S&&p!=null&&p.loadableQuery&&!J.current&&(i({type:Xt,payload:Rm(p.loadableQuery,l,s)}),J.current=!0)},[l,s,S,p]),b.exports.useEffect(function(){var W=!1;return g&&R.current?B(R.current.parentNode,function(ye){var ct=ye.width,ye=ye.height;return x({width:ct,height:ye})}):L.width&&L.height&&!W&&x({width:void 0,height:void 0}),function(){g&&R.current&&N(R.current),W=!0}},[g]),b.exports.useEffect(function(){return n(function(){return[r((O==null?void 0:O.imgSrc)||y)].concat(oe(w?[Ld(f,m)]:[]))}),$.current=!1,window&&!v&&window.addEventListener("beforeunload",e),function(){window&&!v&&window.removeEventListener("beforeunload",e)}},[]),b.exports.useEffect(function(){C&&Gt(C)==="object"&&(C.current=function(W){i({type:Xt,payload:W})})},[C,i]),b.exports.useEffect(function(){j&&Gt(j)==="object"&&(j.current=pr)},[pr]),b.exports.useEffect(function(){Se.current=a},[a]),c.createElement(Lm,{className:Ht,"data-phone":A,ref:R,$size:L},o&&c.createElement(fc,{label:d("loading")}),!P&&c.createElement(Em,null),s&&u.duration!==0&&c.createElement(Fm,{className:"FIE_main-container"},!A&&!P&&c.createElement(qa,null),c.createElement(Dm,{className:"FIE_editor-content"},c.createElement(rm,null),!P&&(A?c.createElement(Mm,{className:"FIE_phone-tools-tabs-wrapper"},c.createElement(Ja,null),c.createElement(qa,null)):c.createElement(Ja,null)))),c.createElement(pc,null))},Bm=b.exports.memo($m),zm=zn([".","{font-family:",";}.SfxModal-Wrapper *{font-family:",";}"],Ht,function(e){var e=e.theme;return((e=(e===void 0?{}:e).typography)==null?void 0:e.fontFamily)||"Arial"},function(e){var e=e.theme;return((e=(e===void 0?{}:e).typography)==null?void 0:e.fontFamily)||"Arial"}),Km=zn([".Menu-open{overflow:visible !important;}.",",#SfxPopper{box-sizing:border-box;.SfxPopper-root .SfxMenu-root{overflow:visible;width:max-content;.SfxMenuItem-prefix{margin-right:6px;}}}.",' *,#SfxPopper *{box-sizing:border-box;scrollbar-color:rgba(203,211,218,1) rgba(203,211,218,0.35);:disabled,[aria-disabled="true"]{cursor:not-allowed;}&::-webkit-scrollbar{width:4px;height:4px;}&::-webkit-scrollbar-track{background:rgba(203,211,218,0.35);}&::-webkit-scrollbar-thumb{background:rgba(203,211,218,1);border-radius:10px;}}'],Ht,Ht),Wm=zn([":not(button) > svg:not([color]){color:","}"],function(r){return r.theme.palette["icons-primary"]}),ni=function(r){var e=r.img,n=r.source,t=r.useCloudimage,o=r.cloudimage;if(e)throw new Error("`img` is renamed to `source` please consider renaming it from your configurations.");if(!n||typeof n!="string"&&!(n instanceof HTMLImageElement))throw new Error("`source` property is required either a string of image url or a HTMLImageElement for the image that will be edited.");if(t&&o!=null&&(e=o.imageSealing)!=null&&e.enable&&(o==null||(n=o.imageSealing)==null||!n.salt))throw new Error("`salt` property of imageSealing object is required in cloudimage mode as long as `imageSealing` is enabled.");return t=wt(Ti,r),c.createElement(c.StrictMode,null,c.createElement(Ll,{theme:t.theme},c.createElement(zm,null),c.createElement(Wm,null),c.createElement(Km,null),c.createElement(bs,{config:t},c.createElement(Bm,null))))},Xm=(ni.defaultProps={useCloudimage:!1,cloudimage:{},img:void 0},b.exports.memo(ni));function ri(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function oi(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ri(Object(e),!0).forEach(function(t){Sn(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ri(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}function Lt(r,e,n){Gm(r,e),e.set(r,n)}function Gm(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}var gt,bn=new WeakMap,vn=new WeakMap,Ft=new WeakMap,Dt=new WeakMap,ke=function(){function r(e){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(Ml(this,r),Lt(this,bn,{writable:!0,value:void 0}),Lt(this,vn,{writable:!0,value:void 0}),Lt(this,Ft,{writable:!0,value:void 0}),Lt(this,Dt,{writable:!0,value:void 0}),this.container=e,this.config=n,!(e&&e instanceof HTMLElement))throw new Error("`container` (argument 0) is required to initialize the image editor plugin.");Tt(this,bn,br.exports.render),Tt(this,vn,br.exports.unmountComponentAtNode),Tt(this,Ft,{}),Tt(this,Dt,{})}return Fl(r,[{key:"render",value:function(e){Dl(e)==="object"&&(this.config=this.config=wt(this.config||{},e)),this.config=oi(oi({},this.config),{},{getCurrentImgDataFnRef:ze(this,Ft),updateStateFnRef:ze(this,Dt)}),ze(this,bn).call(this,b.exports.createElement(Xm,this.config),this.container)}},{key:"terminate",value:function(){ze(this,vn).call(this,this.container)}},{key:"getCurrentImgData",value:function(e){var n,t;return((n=ze(this,Ft))==null||(t=n.current)==null?void 0:t.call(n,e))||{}}},{key:"updateState",value:function(e){var n,t;(n=ze(this,Dt))!=null&&(t=n.current)!=null&&t.call(n,e)}}]),r}(),ai=(Sn(ke,"TABS",X),Sn(ke,"TOOLS",E),ke.TABS=X,ke.TOOLS=E,function(r){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:5;return r&&+parseFloat(r).toFixed(e)}),wn=ke.TOOLS,Hm=[{titleKey:"socialMedia",icon:zl,groups:[{titleKey:"linkedIn",items:[{titleKey:"profilePhoto",width:400,height:400,descriptionKey:"liProfilePhotoSize",disableManualResize:!1},{titleKey:"profileCoverPhoto",width:1584,height:396,descriptionKey:"liProfileCoverPhotoSize"},{titleKey:"blogPostPhoto",width:1200,height:627,descriptionKey:"liBlogPostPhotoSize"},{titleKey:"companyLogo",width:300,height:300,descriptionKey:"liCompanyLogoSize"},{titleKey:"companyPageCover",width:1128,height:191,descriptionKey:"liCompanyPageCoverSize"}]},{titleKey:"twitter",items:[{titleKey:"profilePhoto",width:400,height:400,descriptionKey:"twProfilePhotoSize"},{titleKey:"headerPhoto",width:1500,height:500,descriptionKey:"twHeaderPhotoSize"},{titleKey:"inStreamPhoto",width:1600,height:1900,descriptionKey:"twInStreamPhotoSize"}]},{titleKey:"instagram",items:[{titleKey:"profilePhoto",width:320,height:320,descriptionKey:"igProfilePhotoSize"},{titleKey:"feedPortraitPhoto",width:1080,height:1350,descriptionKey:"igFeedPortraitPhotoSize"},{titleKey:"feedLandscapePhoto",width:1080,height:566,descriptionKey:"igFeedLandscapePhotoSize"},{titleKey:"feedSquarePhoto",width:1080,height:1080,descriptionKey:"igFeedSquarePhotoSize"},{titleKey:"storyPhoto",width:1080,height:1920,descriptionKey:"igStoryPhotoSize"}]},{titleKey:"facebook",items:[{titleKey:"profilePhoto",width:170,height:170,descriptionKey:"fbProfilePhotoSize"},{titleKey:"profileCoverPhoto",width:851,height:315,descriptionKey:"fbProfileCoverPhotoSize"},{titleKey:"eventCoverPhoto",width:1200,height:628,descriptionKey:"fbEventCoverPhotoSize"},{titleKey:"timelinePhoto",width:1200,height:630,descriptionKey:"fbTimelinePhotoSize"},{titleKey:"storyPhoto",width:1080,height:1920,descriptionKey:"fbStoryPhotoSize"}]}]}],Ym=(mt(gt={},wn.CROP,{presetsItems:[{titleKey:"classicTv",descriptionKey:"4:3",ratio:ai(4/3),icon:$l},{titleKey:"cinemascope",descriptionKey:"21:9",ratio:ai(21/9),icon:Bl}],presetsFolders:Hm}),mt(gt,wn.WATERMARK,{gallery:["https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/PNG/SCALEFLEX+LOGO+-+Color+Dark+text.png?vh=45cac1","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGOTYPE+WITH+SCALEFLEX-01-01.png?vh=76c5a7","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGO+WITH+SCALEFLEX-01.png?vh=467711","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGO+WITH+SCALEFLEX+ON+WHITE+BG.png?vh=7ae33c","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+with+Scaleflex/LOGO+WITH+SCALEFLEX+ON+BLACK+BG.png?vh=619469","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+Icon/FILEROBOT+ICON.png?vh=a4578e","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+Icon/FILEROBOT+ICON+ON+WHITE+BG.png?vh=fa44f7","https://assets.scaleflex.com/Marketing/Logos/Filerobot+Logos/Logo+Vertical/FILEROBOT+LOGO+VERTICAL.png?vh=05c4c3","https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/PNG/SCALEFLEX+LOGO+-+Grayscale+Dark+text.png?vh=313898","https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/Logo+Vertical/SCALEFLEX+LOGO+VERTICAL+WHITE+TEXT.png?vh=fca07b","https://assets.scaleflex.com/Marketing/Logos/Scaleflex+Logos/Logo+Vertical/SCALEFLEX+LOGO+VERTICAL.PNG?vh=9a6fa1"]}),mt(gt,wn.TEXT,{text:"Filerobot..."}),mt(gt,"moreSaveOptions",[{label:"[optional] Save option 1",icon:'<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.6358 1.52611L10.6367 1.52669C12.0996 2.48423 13.0845 3.97393 13.4308 5.67868C13.7768 7.38223 13.4302 9.13505 12.3952 10.5416L12.39 10.5495C11.4327 12.0121 9.94346 12.9968 8.23923 13.3433C7.8098 13.4238 7.35685 13.4767 6.93362 13.4767C3.87462 13.4767 1.16037 11.323 0.519402 8.23739L0.439941 7.68114V7.66612C0.439941 7.51027 0.483542 7.38547 0.56594 7.28247C0.641164 7.18844 0.75786 7.12545 0.882464 7.10167C1.03156 7.10432 1.15179 7.14773 1.25156 7.22754C1.34816 7.30483 1.41201 7.4259 1.43422 7.55435C1.60415 8.96178 2.28062 10.2289 3.35006 11.1576L3.35104 11.1584C5.69121 13.1603 9.21628 12.8792 11.1914 10.5379C13.1928 8.19761 12.9116 4.67271 10.5702 2.6978C9.44164 1.73866 8.00291 1.28774 6.53782 1.40044L6.53642 1.40056C5.21046 1.51341 3.97038 2.10561 3.04061 3.03539L2.70462 3.37138L3.76055 3.27979L3.7724 3.27705C4.02521 3.21871 4.29448 3.3949 4.35713 3.66641C4.41517 3.91791 4.24109 4.1857 3.97196 4.25015L1.82243 4.62652C1.69199 4.6481 1.55534 4.62267 1.46788 4.5527L1.45879 4.54543L1.4488 4.53944C1.35779 4.48483 1.27678 4.36595 1.25738 4.24958L0.819079 2.08516L0.818029 2.08061C0.759688 1.8278 0.935874 1.55854 1.20739 1.49588C1.45905 1.43781 1.72702 1.61214 1.79125 1.88157L1.96243 2.82299L2.19817 2.56396C4.3538 0.195428 7.94737 -0.257315 10.6358 1.52611Z" fill="#5D6D7E"/><path d="M7.49822 3.76409V7.16923L9.24296 8.91397C9.32292 8.99394 9.38351 9.11495 9.38351 9.25603C9.38351 9.37909 9.3437 9.49734 9.24296 9.59809C9.16576 9.67528 9.0184 9.73864 8.9009 9.73864C8.77784 9.73864 8.65958 9.69883 8.55884 9.59809L6.67355 7.7128C6.59636 7.6356 6.533 7.48823 6.533 7.37074V3.76409C6.533 3.50452 6.75603 3.28148 7.0156 3.28148C7.3025 3.28148 7.49822 3.4772 7.49822 3.76409Z" fill="#5D6D7E"/></svg>',onClick:function(r){return r(console.log)}},{label:"[optional] Save option 2",icon:Oi,onClick:function(r,e){return e(console.log)}}]),gt);function ii(r,e){var n,t=Object.keys(r);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(r),e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)),t}function si(r){for(var e,n=1;n<arguments.length;n++)e=arguments[n]==null?{}:arguments[n],n%2?ii(Object(e),!0).forEach(function(t){mt(r,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):ii(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))});return r}function ie(r){return document.getElementById(r)}var Um=ie("crop"),Vm=ie("finetune"),Je=ie("filter"),Mt=ie("filter-label"),qm=ie("watermark"),Qe=ie("annotate"),$t=ie("annotate-label"),Zm=ie("resize"),Jm=ie("add-image"),gc=ie("mode-options"),Qm=ie("js-code-tab"),eh=ie("js-code-wrapper"),th=ie("react-code-tab"),nh=ie("react-code-wrapper"),rh=ie("cdn-code-tab"),oh=ie("cdn-code-wrapper"),ah=document.querySelectorAll(".copy-button"),ih=document.querySelectorAll("[data-accordion]"),yt=!1,ue=ke.TABS,Mn={"js-code-tab":eh,"react-code-tab":nh,"cdn-code-tab":oh},sh=["https://scaleflex.cloudimg.io/v7/demo/river.png?w=100","https://scaleflex.cloudimg.io/v7/demo/spencer-davis-unsplash.jpg?w=100","https://scaleflex.cloudimg.io/v7/demo/damian-markutt-unsplash.jpg?w=100"],pe=[ue.ADJUST,ue.FINETUNE,ue.FILTERS,ue.WATERMARK,ue.ANNOTATE,ue.RESIZE],ch={adjust:ue.ADJUST,finetune:ue.FINETUNE,filter:ue.FILTERS,watermark:ue.WATERMARK,annotate:ue.ANNOTATE,resize:ue.RESIZE},lh=si(si({},Ym),{},{source:"https://scaleflex.cloudimg.io/v7/demo/river.png",tabsIds:pe,defaultTabId:ue.RESIZE,defaultToolId:null,observePluginContainerSize:!0,cloudimage:{token:"demo",version:"v7"}});function uh(r,e){var n=document.createElement("a");n.href=r,yt?n.target="_blank":n.download=e,n.style="position: absolute; z-index: -111; visibility: none;",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var Et=new ke(document.querySelector("#editor_container"),lh);function qe(e){var e=e.target,t=e.value,n=e.checked,t=ch[t];if(n)pe.includes(t)||pe.push(t);else{if(n=pe.indexOf(t),pe.includes(t)&&pe.length===1)return void(e.checked=!0);pe.splice(n,1)}Et.render({tabsIds:[].concat(pe)})}function dr(r,n){var n=n.replace(/\?.+/g,""),t=document.querySelector("[data-image-editor-active-image]");t&&t.removeAttribute("data-image-editor-active-image"),r.setAttribute("data-image-editor-active-image",""),Et.render({source:n})}function mc(r){var e=document.querySelector(".uploaded-imgs-wrapper"),n=document.createElement("div");return n.style.backgroundImage="url(".concat(r,")"),n.className="uploaded-img",n.onclick=function(){return dr(n,r)},e.appendChild(n),e.scrollTop=e.scrollHeight,n}function dh(r){r=URL.createObjectURL(r.target.files[0]),dr(mc(r),r),Et.render({source:r})}function ph(){yt=gc.value==="Cloudimage"?(Qe.checked=!1,Qe.disabled=!0,$t.style.color="gray",$t.style.cursor="auto",Je.checked=!1,Je.disabled=!0,Mt.style.color="gray",Mt.style.cursor="auto",!0):(pe.includes(Qe.name)&&(Qe.checked=!0),pe.includes(Je.name)&&(Je.checked=!0),Je.disabled=!1,Mt.style.color="#203254",Mt.style.cursor="pointer",Qe.disabled=!1,$t.style.color="#203254",!($t.style.cursor="pointer")),Et.render({useCloudimage:yt,tabsIds:[].concat(pe)})}function fh(r){r=r.target.id,r=Mn[r],Object.values(Mn).forEach(function(e){e.style.display="none"}),r.style.display="unset"}function En(n){var e=n.target||n,n=(fh(n),document.querySelector("[selected-tab]"));n&&n.removeAttribute("selected-tab"),e.setAttribute("selected-tab","")}function gh(n){var e=n.currentTarget.getElementsByTagName("p")[0],n=document.querySelector("[selected-tab]").id,n=Mn[n];navigator.clipboard.writeText(n.innerText),e.innerHTML==="Copy"&&(e.innerHTML="copied",setTimeout(function(){e.innerHTML="Copy"},500))}function mh(r){r=r.target.getAttribute("data-accordion"),r=document.querySelector('[data-accordion-content="'.concat(r,'"]')),r.style.display=r!=null&&r.offsetWidth?"none":"block"}Et.render({onSave:function(r){uh(r[yt?"cloudimageUrl":"imageBase64"],r.fullName)},useCloudimage:yt}),document.onreadystatechange=function(){sh.forEach(function(r,e){var n=mc(r);e||dr(n,r)})},Um.addEventListener("change",qe),Vm.addEventListener("change",qe),Je.addEventListener("change",qe),qm.addEventListener("change",qe),Qe.addEventListener("change",qe),Zm.addEventListener("change",qe),Jm.addEventListener("change",dh),gc.addEventListener("change",ph),Qm.addEventListener("click",En),th.addEventListener("click",En),rh.addEventListener("click",En),ah.forEach(function(r){r.addEventListener("click",gh)}),ih.forEach(function(r){r.addEventListener("click",mh)});
